{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/scrollytell.ts","webpack:///./src/app.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Story","config","this","activePanelIndex","progressValue","frameCount","container","document","querySelector","containerSelector","Error","cstyle","window","getComputedStyle","getPropertyValue","panels","querySelectorAll","panelSelector","chart","chartSelector","fullsizeChart","height","getBoundingClientRect","style","top","segments","segmentSelector","segment","developerHud","showDeveloperHud","tick","render","requestAnimationFrame","enable","developerHudCanvas","visibility","canvas","createElement","position","width","left","zIndex","pointerEvents","appendChild","dpr","devicePixelRatio","clientWidth","clientHeight","developerHudContext","getContext","scale","font","scrollTop","undefined","cbox","guideline","bottom","prevActivePanel","prevProgressValue","index","panel","entries","pbox","active","ratio","panelChanged","progressChanged","exitHandler","enterHandler","progressHandler","renderDeveloperHud","containerBox","ctx","clearRect","beginPath","fillStyle","rect","fill","pvText","toFixed","fillText","panelText","frameText","strokeStyle","moveTo","lineTo","right","stroke","setLineDash","frame","production","indexOf","console","info","story","getElementById","canvas2d","canvas3d","context2d","lineWidth","x0","Math","sin","x1","onload"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\n * @license\n * Copyright 2019 Google LLC\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/**\n * The context for all animation corresponding to a container element.\n */\nexport class Story {\n    constructor(config) {\n        this.config = config;\n        this.activePanelIndex = -1;\n        this.progressValue = -1;\n        this.frameCount = 0;\n        this.container = document.querySelector(config.containerSelector);\n        if (!this.container) {\n            throw Error(\"Scrollytell container not found.\");\n        }\n        const cstyle = window.getComputedStyle(this.container);\n        if (cstyle.getPropertyValue(\"overflow-y\") !== \"scroll\") {\n            throw Error(\"Scrollytell container must have overflow-y:scroll.\");\n        }\n        if (cstyle.getPropertyValue(\"position\") !== \"relative\") {\n            throw Error(\"Scrollytell container must have position:relative.\");\n        }\n        this.panels = document.querySelectorAll(config.panelSelector);\n        if (!this.panels) {\n            throw Error(\"Scrollytell panels not found.\");\n        }\n        this.chart = document.querySelector(config.chartSelector);\n        if (config.fullsizeChart && !this.chart) {\n            throw Error(\"Scrollytell chart not found.\");\n        }\n        if (config.fullsizeChart) {\n            const height = this.container.getBoundingClientRect().height;\n            this.chart.style.height = `${height}px`;\n            this.chart.style.top = \"0\";\n            const segments = document.querySelectorAll(config.segmentSelector);\n            for (const segment of segments) {\n                segment.style.height = `${height}px`;\n            }\n        }\n        if (config.developerHud) {\n            this.showDeveloperHud(true);\n        }\n        this.tick = this.render.bind(this);\n        window.requestAnimationFrame(this.tick);\n    }\n    /**\n     * Returns the zero-based index of the panel that is currently overlapping\n     * the guideline. Returns -1 if no such panel exists.\n     */\n    getActivePanelIndex() {\n        return this.activePanelIndex;\n    }\n    /**\n     * Returns a percentage in the range [0, 1] that represents the position of\n     * the active panel relative to the guideline. Returns 0 when the top of the\n     * panel aligns with the guideline, +1 when the bottom of the panel aligns\n     * with the guideline, and -1 if no panel is overlapping the guideline.\n     */\n    getProgressValue() {\n        return this.progressValue;\n    }\n    /**\n     * Toggles the heads-up-display for development purposes. Do not enable\n     * when your site is in production.\n     */\n    showDeveloperHud(enable) {\n        if (this.developerHudCanvas) {\n            const visibility = enable ? \"visible\" : \"hidden\";\n            this.developerHudCanvas.style.visibility = visibility;\n            return;\n        }\n        if (!enable) {\n            return;\n        }\n        const canvas = document.createElement(\"canvas\");\n        const style = canvas.style;\n        style.position = \"fixed\";\n        style.width = \"100%\";\n        style.height = \"100%\";\n        style.left = \"0\";\n        style.top = \"0\";\n        style.zIndex = \"100\";\n        style.pointerEvents = \"none\";\n        this.container.appendChild(canvas);\n        const dpr = window.devicePixelRatio;\n        canvas.width = canvas.clientWidth * dpr;\n        canvas.height = canvas.clientHeight * dpr;\n        this.developerHudContext = canvas.getContext(\"2d\");\n        this.developerHudContext.scale(dpr, dpr);\n        this.developerHudCanvas = canvas;\n        const family = \"'Lexend Deca', sans-serif\";\n        this.developerHudContext.font = `bold 14px ${family}`;\n        // Force a redraw on the next frame.\n        this.scrollTop = undefined;\n    }\n    render() {\n        // Take care not to do work if no scrolling has occurred. This is an\n        // important optimization because it can save power on mobile devices.\n        const scrollTop = this.container.scrollTop;\n        if (scrollTop === this.scrollTop) {\n            window.requestAnimationFrame(this.tick);\n            return;\n        }\n        this.scrollTop = scrollTop;\n        // Determine the guideline Y coordinate.\n        const cbox = this.container.getBoundingClientRect();\n        const guideline = (cbox.top + cbox.bottom) / 2;\n        // Determine the active panel and progress value.\n        const prevActivePanel = this.activePanelIndex;\n        const prevProgressValue = this.progressValue;\n        this.activePanelIndex = -1;\n        this.progressValue = -1;\n        for (const [index, panel] of this.panels.entries()) {\n            const pbox = panel.getBoundingClientRect();\n            const outside = pbox.top > guideline || pbox.bottom < guideline;\n            const active = !outside;\n            const ratio = (guideline - pbox.top) / pbox.height;\n            if (active) {\n                this.activePanelIndex = index;\n                this.progressValue = ratio;\n                break;\n            }\n        }\n        const panelChanged = prevActivePanel !== this.activePanelIndex;\n        const progressChanged = prevProgressValue !== this.progressValue;\n        // Trigger scrollytelling events.\n        if (panelChanged) {\n            if (this.config.exitHandler) {\n                this.config.exitHandler(this, prevActivePanel);\n            }\n            if (this.config.enterHandler) {\n                this.config.enterHandler(this, this.activePanelIndex);\n            }\n        }\n        // Do not update the frame count when scrolling between panels (i.e.\n        // when there is no active panel).\n        if (progressChanged || panelChanged) {\n            this.frameCount += 1;\n            if (this.config.progressHandler) {\n                this.config.progressHandler(this, this.progressValue);\n            }\n        }\n        // Render the developer HUD even when the frame count has not been\n        // incremented (i.e. activePanelIndex == -1) because the relative\n        // position of the panel bounding / boxes may have changed.\n        if (this.developerHudContext) {\n            this.renderDeveloperHud(cbox);\n        }\n        window.requestAnimationFrame(this.tick);\n    }\n    renderDeveloperHud(containerBox) {\n        const cbox = containerBox;\n        const ctx = this.developerHudContext;\n        const guideline = (cbox.top + cbox.bottom) / 2;\n        const width = this.developerHudCanvas.width;\n        const height = this.developerHudCanvas.height;\n        // Make the canvas transparent before drawing anything.\n        ctx.clearRect(0, 0, width, height);\n        // Draw semitransparent gray rectangles over each panel.\n        ctx.beginPath();\n        ctx.fillStyle = \"rgba(128, 128, 128, 0.125)\";\n        for (const [index, panel] of this.panels.entries()) {\n            const pbox = panel.getBoundingClientRect();\n            ctx.rect(pbox.left, pbox.top, pbox.width, pbox.height);\n        }\n        ctx.fill();\n        // Draw a semitransparent white background rect under the text.\n        ctx.beginPath();\n        ctx.fillStyle = \"rgba(255, 255, 255, 0.5)\";\n        ctx.rect(0, 0, 200, 100);\n        ctx.fill();\n        // Draw the text.\n        ctx.fillStyle = \"rgba(50, 50, 0, 1)\";\n        const pvText = `progress value = ${this.progressValue.toFixed(2)}`;\n        ctx.fillText(pvText, 10, 20);\n        const panelText = `active panel = ${this.activePanelIndex}`;\n        ctx.fillText(panelText, 10, 40);\n        const frameText = `frame count = ${this.frameCount}`;\n        ctx.fillText(frameText, 10, 60);\n        // Draw the guideline.\n        ctx.strokeStyle = \"rgba(255, 255, 255, 1.0)\";\n        ctx.beginPath();\n        ctx.moveTo(cbox.left, guideline - 1);\n        ctx.lineTo(cbox.right, guideline - 1);\n        ctx.moveTo(cbox.left, guideline + 1);\n        ctx.lineTo(cbox.right, guideline + 1);\n        ctx.stroke();\n        ctx.strokeStyle = \"rgba(0, 0, 0, 1.0)\";\n        ctx.setLineDash([10, 1]);\n        ctx.beginPath();\n        ctx.moveTo(cbox.left, guideline);\n        ctx.lineTo(cbox.right, guideline);\n        ctx.stroke();\n    }\n}\n","import { Story } from \"./scrollytell\";\nexport class App {\n    constructor() {\n        this.frame = 0;\n        this.production = BUILD_COMMAND.indexOf(\"release\") > -1;\n        console.info(this.production ? \"Production mode\" : \"Development mode\");\n        this.story = new Story({\n            chartSelector: \".chart\",\n            containerSelector: \".container\",\n            developerHud: !this.production,\n            fullsizeChart: true,\n            panelSelector: \".panel\",\n            segmentSelector: \"segment\",\n        });\n        this.tick = this.render.bind(this);\n        const checkbox = document.getElementById(\"show_hud\");\n        const canvas2d = document.getElementById(\"canvas2d\");\n        const canvas3d = document.getElementById(\"canvas3d\");\n        const dpr = window.devicePixelRatio;\n        const width = canvas2d.clientWidth * dpr;\n        const height = canvas2d.clientHeight * dpr;\n        this.width = canvas3d.width = canvas2d.width = width;\n        this.height = canvas3d.height = canvas2d.height = height;\n        this.context2d = canvas2d.getContext(\"2d\");\n        this.context2d.lineWidth = 3;\n        window.requestAnimationFrame(this.tick);\n    }\n    render() {\n        const t = this.frame * 0.05;\n        const x0 = this.width / 2 - Math.sin(t) * this.width / 2;\n        const x1 = this.width / 2 + Math.sin(t) * this.width / 2;\n        this.context2d.clearRect(0, 0, this.width, this.height);\n        this.context2d.beginPath();\n        this.context2d.moveTo(x1, 0);\n        this.context2d.lineTo(x0, this.height);\n        this.context2d.moveTo(x1, this.height);\n        this.context2d.lineTo(x0, 0);\n        this.context2d.stroke();\n        this.frame += 1;\n        window.requestAnimationFrame(this.tick);\n    }\n}\nwindow.onload = () => {\n    // tslint:disable-next-line: no-string-literal\n    window[\"app\"] = new App();\n};\n"],"sourceRoot":""}