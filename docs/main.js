!function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
class o{constructor(e){if(this.config=e,this.activePanelIndex=-1,this.progressValue=-1,this.frameCount=0,this.container=document.querySelector(e.containerSelector),!this.container)throw Error("Scrollytell container not found.");const t=window.getComputedStyle(this.container);if("scroll"!==t.getPropertyValue("overflow-y"))throw Error("Scrollytell container must have overflow-y:scroll.");if("relative"!==t.getPropertyValue("position"))throw Error("Scrollytell container must have position:relative.");if(this.panels=document.querySelectorAll(e.panelSelector),!this.panels)throw Error("Scrollytell panels not found.");if(this.chart=document.querySelector(e.chartSelector),e.fullsizeChart&&!this.chart)throw Error("Scrollytell chart not found.");if(e.fullsizeChart){const t=this.container.getBoundingClientRect().height;this.chart.style.height=`${t}px`,this.chart.style.top="0";const i=document.querySelectorAll(e.segmentSelector);for(const e of i)e.style.height=`${t}px`}e.developerHud&&this.showDeveloperHud(!0),this.tick=this.render.bind(this),window.requestAnimationFrame(this.tick)}getActivePanelIndex(){return this.activePanelIndex}getProgressValue(){return this.progressValue}showDeveloperHud(e){if(this.developerHudCanvas){const t=e?"visible":"hidden";return void(this.developerHudCanvas.style.visibility=t)}if(!e)return;const t=document.createElement("canvas"),i=t.style;i.position="fixed",i.width="100%",i.height="100%",i.left="0",i.top="0",i.zIndex="100",i.pointerEvents="none",this.container.appendChild(t);const o=window.devicePixelRatio;t.width=t.clientWidth*o,t.height=t.clientHeight*o,this.developerHudContext=t.getContext("2d"),this.developerHudContext.scale(o,o),this.developerHudCanvas=t;this.developerHudContext.font="bold 14px 'Lexend Deca', sans-serif",this.scrollTop=void 0}render(){const e=this.container.scrollTop;if(e===this.scrollTop)return void window.requestAnimationFrame(this.tick);this.scrollTop=e;const t=this.container.getBoundingClientRect(),i=(t.top+t.bottom)/2,o=this.activePanelIndex,n=this.progressValue;this.activePanelIndex=-1,this.progressValue=-1;for(const[e,t]of this.panels.entries()){const o=t.getBoundingClientRect(),n=!(o.top>i||o.bottom<i),r=(i-o.top)/o.height;if(n){this.activePanelIndex=e,this.progressValue=r;break}}const r=o!==this.activePanelIndex,s=n!==this.progressValue;r&&(this.config.exitHandler&&this.config.exitHandler(this,o),this.config.enterHandler&&this.config.enterHandler(this,this.activePanelIndex)),(s||r)&&(this.frameCount+=1,this.config.progressHandler&&this.config.progressHandler(this,this.progressValue)),this.developerHudContext&&this.renderDeveloperHud(t),window.requestAnimationFrame(this.tick)}renderDeveloperHud(e){const t=e,i=this.developerHudContext,o=(t.top+t.bottom)/2,n=this.developerHudCanvas.width,r=this.developerHudCanvas.height;i.clearRect(0,0,n,r),i.beginPath(),i.fillStyle="rgba(128, 128, 128, 0.125)";for(const[e,t]of this.panels.entries()){const e=t.getBoundingClientRect();i.rect(e.left,e.top,e.width,e.height)}i.fill(),i.beginPath(),i.fillStyle="rgba(255, 255, 255, 0.5)",i.rect(0,0,200,100),i.fill(),i.fillStyle="rgba(50, 50, 0, 1)";const s=`progress value = ${this.progressValue.toFixed(2)}`;i.fillText(s,10,20);const l=`active panel = ${this.activePanelIndex}`;i.fillText(l,10,40);const h=`frame count = ${this.frameCount}`;i.fillText(h,10,60),i.strokeStyle="rgba(255, 255, 255, 1.0)",i.beginPath(),i.moveTo(t.left,o-1),i.lineTo(t.right,o-1),i.moveTo(t.left,o+1),i.lineTo(t.right,o+1),i.stroke(),i.strokeStyle="rgba(0, 0, 0, 1.0)",i.setLineDash([10,1]),i.beginPath(),i.moveTo(t.left,o),i.lineTo(t.right,o),i.stroke()}}i.d(t,"App",function(){return n});class n{constructor(){this.frame=0,this.production="build:release".indexOf("release")>-1,console.info(this.production?"Production mode":"Development mode"),this.story=new o({chartSelector:".chart",containerSelector:".container",developerHud:!this.production,fullsizeChart:!0,panelSelector:".panel",segmentSelector:"segment"}),this.tick=this.render.bind(this);document.getElementById("show_hud");const e=document.getElementById("canvas2d"),t=document.getElementById("canvas3d"),i=window.devicePixelRatio,n=e.clientWidth*i,r=e.clientHeight*i;this.width=t.width=e.width=n,this.height=t.height=e.height=r,this.context2d=e.getContext("2d"),this.context2d.lineWidth=3,window.requestAnimationFrame(this.tick)}render(){const e=.05*this.frame,t=this.width/2-Math.sin(e)*this.width/2,i=this.width/2+Math.sin(e)*this.width/2;this.context2d.clearRect(0,0,this.width,this.height),this.context2d.beginPath(),this.context2d.moveTo(i,0),this.context2d.lineTo(t,this.height),this.context2d.moveTo(i,this.height),this.context2d.lineTo(t,0),this.context2d.stroke(),this.frame+=1,window.requestAnimationFrame(this.tick)}}window.onload=()=>{window.app=new n}}]);
//# sourceMappingURL=main.js.map