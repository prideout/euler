!function(e){var r={};function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(r){return e[r]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=17)}([function(e,r,t){(function(r,n,i){var o=function(e){var o,a=void 0!==(e=e||{})?e:{},s={};for(o in a)a.hasOwnProperty(o)&&(s[o]=a[o]);a.arguments=[],a.thisProgram="./this.program",a.quit=function(e,r){throw r},a.preRun=[],a.postRun=[];var u=!1,c=!1,f=!1,l=!1;u="object"==typeof window,c="function"==typeof importScripts,f="object"==typeof r&&!u&&!c,l=!u&&!f&&!c;var d,p,m="";function h(e){return a.locateFile?a.locateFile(e,m):m+e}f?(m=n+"/",a.read=function(e,r){var n;return d||(d=t(1)),p||(p=t(2)),e=p.normalize(e),n=d.readFileSync(e),r?n:n.toString()},a.readBinary=function(e){var r=a.read(e,!0);return r.buffer||(r=new Uint8Array(r)),T(r.buffer),r},r.argv.length>1&&(a.thisProgram=r.argv[1].replace(/\\/g,"/")),a.arguments=r.argv.slice(2),r.on("uncaughtException",function(e){if(!(e instanceof Yf))throw e}),r.on("unhandledRejection",Qf),a.quit=function(e){r.exit(e)},a.inspect=function(){return"[Emscripten Module object]"}):l?("undefined"!=typeof read&&(a.read=function(e){return read(e)}),a.readBinary=function(e){var r;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(T("object"==typeof(r=read(e,"binary"))),r)},"undefined"!=typeof scriptArgs?a.arguments=scriptArgs:void 0!==arguments&&(a.arguments=arguments),"function"==typeof quit&&(a.quit=function(e){quit(e)})):(u||c)&&(c?m=self.location.href:document.currentScript&&(m=document.currentScript.src),m=0!==m.indexOf("blob:")?m.substr(0,m.lastIndexOf("/")+1):"",a.read=function(e){var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},c&&(a.readBinary=function(e){var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),a.readAsync=function(e,r,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?r(n.response):t()},n.onerror=t,n.send(null)},a.setWindowTitle=function(e){document.title=e});var g=a.print||("undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null),y=a.printErr||("undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||g);for(o in s)s.hasOwnProperty(o)&&(a[o]=s[o]);s=void 0;var v={"f64-rem":function(e,r){return e%r},debugger:function(){}};new Array(0);function _(e,r,t){return t?+(e>>>0)+4294967296*+(r>>>0):+(e>>>0)+4294967296*+(0|r)}var b,E=0,w=function(e){E=e},x=function(){return E};"object"!=typeof WebAssembly&&y("no native wasm support detected");var S=!1;function T(e,r){e||Qf("Assertion failed: "+r)}var P="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function A(e,r,t){for(var n=r+t,i=r;e[i]&&!(i>=n);)++i;if(i-r>16&&e.subarray&&P)return P.decode(e.subarray(r,i));for(var o="";r<i;){var a=e[r++];if(128&a){var s=63&e[r++];if(192!=(224&a)){var u=63&e[r++];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&e[r++])<65536)o+=String.fromCharCode(a);else{var c=a-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function C(e,r){return e?A(N,e,r):""}function D(e,r,t,n){if(!(n>0))return 0;for(var i=t,o=t+n-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a);if(s<=127){if(t>=o)break;r[t++]=s}else if(s<=2047){if(t+1>=o)break;r[t++]=192|s>>6,r[t++]=128|63&s}else if(s<=65535){if(t+2>=o)break;r[t++]=224|s>>12,r[t++]=128|s>>6&63,r[t++]=128|63&s}else{if(t+3>=o)break;r[t++]=240|s>>18,r[t++]=128|s>>12&63,r[t++]=128|s>>6&63,r[t++]=128|63&s}}return r[t]=0,t-i}function B(e,r,t){return D(e,N,r,t)}function k(e){for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++t)),n<=127?++r:r+=n<=2047?2:n<=65535?3:4}return r}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");function I(e){return e}function M(e){return e.replace(/__Z[\w\d_]+/g,function(e){var r=I(e);return e===r?e:r+" ["+e+"]"})}function F(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(r){e=r}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function R(){var e=F();return a.extraStackTrace&&(e+="\n"+a.extraStackTrace()),M(e)}var L,O,N,U,G,V,W,$,j,z=16384,H=65536;function q(e,r){return e%r>0&&(e+=r-e%r),e}function Y(e){a.buffer=L=e}function X(){a.HEAP8=O=new Int8Array(L),a.HEAP16=U=new Int16Array(L),a.HEAP32=V=new Int32Array(L),a.HEAPU8=N=new Uint8Array(L),a.HEAPU16=G=new Uint16Array(L),a.HEAPU32=W=new Uint32Array(L),a.HEAPF32=$=new Float32Array(L),a.HEAPF64=j=new Float64Array(L)}var Q=5787728,K=544592,Z=5242880,J=a.TOTAL_MEMORY||16777216;function ee(e){for(;e.length>0;){var r=e.shift();if("function"!=typeof r){var t=r.func;"number"==typeof t?void 0===r.arg?a.dynCall_v(t):a.dynCall_vi(t,r.arg):t(void 0===r.arg?null:r.arg)}else r()}}J<Z&&y("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+J+"! (TOTAL_STACK="+Z+")"),a.buffer?L=a.buffer:("object"==typeof WebAssembly&&"function"==typeof WebAssembly.Memory?(b=new WebAssembly.Memory({initial:J/H}),L=b.buffer):L=new ArrayBuffer(J),a.buffer=L),X(),V[K>>2]=Q;var re=[],te=[],ne=[],ie=[],oe=!1;function ae(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)fe(a.preRun.shift());ee(re)}function se(){oe||(oe=!0,a.noFSInit||He.init.initialized||He.init(),Ve.init(),ee(te))}function ue(){He.ignorePermissions=!1,ee(ne)}function ce(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)le(a.postRun.shift());ee(ie)}function fe(e){re.unshift(e)}function le(e){ie.unshift(e)}var de=Math.abs,pe=Math.ceil,me=Math.floor,he=Math.min,ge=0,ye=null,ve=null;function _e(e){return e}function be(e){ge++,a.monitorRunDependencies&&a.monitorRunDependencies(ge)}function Ee(e){if(ge--,a.monitorRunDependencies&&a.monitorRunDependencies(ge),0==ge&&(null!==ye&&(clearInterval(ye),ye=null),ve)){var r=ve;ve=null,r()}}a.preloadedImages={},a.preloadedAudios={};var we="data:application/octet-stream;base64,";function xe(e){return String.prototype.startsWith?e.startsWith(we):0===e.indexOf(we)}var Se="filament.wasm";function Te(){try{if(a.wasmBinary)return new Uint8Array(a.wasmBinary);if(a.readBinary)return a.readBinary(Se);throw"both async and sync fetching of the wasm failed"}catch(e){Qf(e)}}function Pe(){return a.wasmBinary||!u&&!c||"function"!=typeof fetch?new Promise(function(e,r){e(Te())}):fetch(Se,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Se+"'";return e.arrayBuffer()}).catch(function(){return Te()})}function Ae(e){var r={env:e,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:v};function t(e,r){var t=e.exports;a.asm=t,Ee()}if(be(),a.instantiateWasm)try{return a.instantiateWasm(r,t)}catch(e){return y("Module.instantiateWasm callback failed with error: "+e),!1}function n(e){t(e.instance)}function i(e){Pe().then(function(e){return WebAssembly.instantiate(e,r)}).then(e,function(e){y("failed to asynchronously prepare wasm: "+e),Qf(e)})}return a.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||xe(Se)||"function"!=typeof fetch?i(n):WebAssembly.instantiateStreaming(fetch(Se,{credentials:"same-origin"}),r).then(n,function(e){y("wasm streaming compile failed: "+e),y("falling back to ArrayBuffer instantiation"),i(n)}),{}}xe(Se)||(Se=h(Se)),a.asm=function(e,r,t){return r.memory=b,r.table=new WebAssembly.Table({initial:2132,maximum:2132,element:"anyfunc"}),r.__memory_base=1024,r.__table_base=0,Ae(r)},te.push({func:function(){qf()}});var Ce=544832;function De(e,r,t,n,i,o,a){var s=V[e>>2],u=V[e+4>>2],c=V[r>>2],f=V[r+4>>2];return s===c&&u===f?(V[e>>2]=t,V[e+4>>2]=n,1):(V[r>>2]=s,V[r+4>>2]=u,0)}function Be(e,r,t,n){var i=V[e>>2],o=V[e+4>>2];return V[e>>2]=zf(i,o,r,t),V[e+4>>2]=x(),0|(w(o),i)}function ke(){return!!ke.uncaught_exception}function Ie(e){try{return jf(e)}catch(e){}}var Me={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||Me.infos[e])return e;for(var r in Me.infos)for(var t=+r,n=Me.infos[t].adjusted,i=n.length,o=0;o<i;o++)if(n[o]===e)return t;return e},addRef:function(e){e&&Me.infos[e].refcount++},decRef:function(e){if(e){var r=Me.infos[e];T(r.refcount>0),r.refcount--,0!==r.refcount||r.rethrown||(r.destructor&&a.dynCall_vi(r.destructor,e),delete Me.infos[e],Ie(e))}},clearRef:function(e){e&&(Me.infos[e].refcount=0)}};function Fe(e){var r=Me.infos[e];return r&&!r.caught&&(r.caught=!0,ke.uncaught_exception--),r&&(r.rethrown=!1),Me.caught.push(e),Me.addRef(Me.deAdjust(e)),e}function Re(){throw S=!0,"Pure virtual function called!"}function Le(e){throw Me.last||(Me.last=e),e}function Oe(){var e=Me.last;if(!e)return 0|(w(0),0);var r=Me.infos[e],t=r.type;if(!t)return 0|(w(0),e);var n=Array.prototype.slice.call(arguments);a.___cxa_is_pointer_type(t);Oe.buffer||(Oe.buffer=Hf(4)),V[Oe.buffer>>2]=e,e=Oe.buffer;for(var i=0;i<n.length;i++)if(n[i]&&a.___cxa_can_catch(n[i],t,e))return e=V[e>>2],r.adjusted.push(e),0|(w(n[i]),e);return e=V[e>>2],0|(w(t),e)}function Ne(){}function Ue(e){return a.___errno_location&&(V[a.___errno_location()>>2]=e),e}var Ge={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,r){for(var t=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(r)for(;t;t--)e.unshift("..");return e},normalize:function(e){var r="/"===e.charAt(0),t="/"===e.substr(-1);return(e=Ge.normalizeArray(e.split("/").filter(function(e){return!!e}),!r).join("/"))||r||(e="."),e&&t&&(e+="/"),(r?"/":"")+e},dirname:function(e){var r=Ge.splitPath(e),t=r[0],n=r[1];return t||n?(n&&(n=n.substr(0,n.length-1)),t+n):"."},basename:function(e){if("/"===e)return"/";var r=e.lastIndexOf("/");return-1===r?e:e.substr(r+1)},extname:function(e){return Ge.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return Ge.normalize(e.join("/"))},join2:function(e,r){return Ge.normalize(e+"/"+r)},resolve:function(){for(var e="",r=!1,t=arguments.length-1;t>=-1&&!r;t--){var n=t>=0?arguments[t]:He.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,r="/"===n.charAt(0)}return(r?"/":"")+(e=Ge.normalizeArray(e.split("/").filter(function(e){return!!e}),!r).join("/"))||"."},relative:function(e,r){function t(e){for(var r=0;r<e.length&&""===e[r];r++);for(var t=e.length-1;t>=0&&""===e[t];t--);return r>t?[]:e.slice(r,t-r+1)}e=Ge.resolve(e).substr(1),r=Ge.resolve(r).substr(1);for(var n=t(e.split("/")),i=t(r.split("/")),o=Math.min(n.length,i.length),a=o,s=0;s<o;s++)if(n[s]!==i[s]){a=s;break}var u=[];for(s=a;s<n.length;s++)u.push("..");return(u=u.concat(i.slice(a))).join("/")}},Ve={ttys:[],init:function(){},shutdown:function(){},register:function(e,r){Ve.ttys[e]={input:[],output:[],ops:r},He.registerDevice(e,Ve.stream_ops)},stream_ops:{open:function(e){var r=Ve.ttys[e.node.rdev];if(!r)throw new He.ErrnoError(qe.ENODEV);e.tty=r,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,r,t,n,i){if(!e.tty||!e.tty.ops.get_char)throw new He.ErrnoError(qe.ENXIO);for(var o=0,a=0;a<n;a++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(e){throw new He.ErrnoError(qe.EIO)}if(void 0===s&&0===o)throw new He.ErrnoError(qe.EAGAIN);if(null==s)break;o++,r[t+a]=s}return o&&(e.node.timestamp=Date.now()),o},write:function(e,r,t,n,i){if(!e.tty||!e.tty.ops.put_char)throw new He.ErrnoError(qe.ENXIO);try{for(var o=0;o<n;o++)e.tty.ops.put_char(e.tty,r[t+o])}catch(e){throw new He.ErrnoError(qe.EIO)}return n&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(f){var n=new i(256),o=0,a="win32"!=r.platform,s=r.stdin.fd;if(a){var u=!1;try{s=Lf.openSync("/dev/stdin","r"),u=!0}catch(e){}}try{o=Lf.readSync(s,n,0,256,null)}catch(e){if(-1==e.toString().indexOf("EOF"))throw e;o=0}u&&Lf.closeSync(s),t=o>0?n.slice(0,o).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;e.input=Uf(t,!0)}return e.input.shift()},put_char:function(e,r){null===r||10===r?(g(A(e.output,0)),e.output=[]):0!=r&&e.output.push(r)},flush:function(e){e.output&&e.output.length>0&&(g(A(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,r){null===r||10===r?(y(A(e.output,0)),e.output=[]):0!=r&&e.output.push(r)},flush:function(e){e.output&&e.output.length>0&&(y(A(e.output,0)),e.output=[])}}},We={ops_table:null,mount:function(e){return We.createNode(null,"/",16895,0)},createNode:function(e,r,t,n){if(He.isBlkdev(t)||He.isFIFO(t))throw new He.ErrnoError(qe.EPERM);We.ops_table||(We.ops_table={dir:{node:{getattr:We.node_ops.getattr,setattr:We.node_ops.setattr,lookup:We.node_ops.lookup,mknod:We.node_ops.mknod,rename:We.node_ops.rename,unlink:We.node_ops.unlink,rmdir:We.node_ops.rmdir,readdir:We.node_ops.readdir,symlink:We.node_ops.symlink},stream:{llseek:We.stream_ops.llseek}},file:{node:{getattr:We.node_ops.getattr,setattr:We.node_ops.setattr},stream:{llseek:We.stream_ops.llseek,read:We.stream_ops.read,write:We.stream_ops.write,allocate:We.stream_ops.allocate,mmap:We.stream_ops.mmap,msync:We.stream_ops.msync}},link:{node:{getattr:We.node_ops.getattr,setattr:We.node_ops.setattr,readlink:We.node_ops.readlink},stream:{}},chrdev:{node:{getattr:We.node_ops.getattr,setattr:We.node_ops.setattr},stream:He.chrdev_stream_ops}});var i=He.createNode(e,r,t,n);return He.isDir(i.mode)?(i.node_ops=We.ops_table.dir.node,i.stream_ops=We.ops_table.dir.stream,i.contents={}):He.isFile(i.mode)?(i.node_ops=We.ops_table.file.node,i.stream_ops=We.ops_table.file.stream,i.usedBytes=0,i.contents=null):He.isLink(i.mode)?(i.node_ops=We.ops_table.link.node,i.stream_ops=We.ops_table.link.stream):He.isChrdev(i.mode)&&(i.node_ops=We.ops_table.chrdev.node,i.stream_ops=We.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[r]=i),i},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var r=[],t=0;t<e.usedBytes;++t)r.push(e.contents[t]);return r}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array},expandFileStorage:function(e,r){var t=e.contents?e.contents.length:0;if(!(t>=r)){r=Math.max(r,t*(t<1048576?2:1.125)|0),0!=t&&(r=Math.max(r,256));var n=e.contents;e.contents=new Uint8Array(r),e.usedBytes>0&&e.contents.set(n.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,r){if(e.usedBytes!=r){if(0==r)return e.contents=null,void(e.usedBytes=0);if(!e.contents||e.contents.subarray){var t=e.contents;return e.contents=new Uint8Array(new ArrayBuffer(r)),t&&e.contents.set(t.subarray(0,Math.min(r,e.usedBytes))),void(e.usedBytes=r)}if(e.contents||(e.contents=[]),e.contents.length>r)e.contents.length=r;else for(;e.contents.length<r;)e.contents.push(0);e.usedBytes=r}},node_ops:{getattr:function(e){var r={};return r.dev=He.isChrdev(e.mode)?e.id:1,r.ino=e.id,r.mode=e.mode,r.nlink=1,r.uid=0,r.gid=0,r.rdev=e.rdev,He.isDir(e.mode)?r.size=4096:He.isFile(e.mode)?r.size=e.usedBytes:He.isLink(e.mode)?r.size=e.link.length:r.size=0,r.atime=new Date(e.timestamp),r.mtime=new Date(e.timestamp),r.ctime=new Date(e.timestamp),r.blksize=4096,r.blocks=Math.ceil(r.size/r.blksize),r},setattr:function(e,r){void 0!==r.mode&&(e.mode=r.mode),void 0!==r.timestamp&&(e.timestamp=r.timestamp),void 0!==r.size&&We.resizeFileStorage(e,r.size)},lookup:function(e,r){throw He.genericErrors[qe.ENOENT]},mknod:function(e,r,t,n){return We.createNode(e,r,t,n)},rename:function(e,r,t){if(He.isDir(e.mode)){var n;try{n=He.lookupNode(r,t)}catch(e){}if(n)for(var i in n.contents)throw new He.ErrnoError(qe.ENOTEMPTY)}delete e.parent.contents[e.name],e.name=t,r.contents[t]=e,e.parent=r},unlink:function(e,r){delete e.contents[r]},rmdir:function(e,r){var t=He.lookupNode(e,r);for(var n in t.contents)throw new He.ErrnoError(qe.ENOTEMPTY);delete e.contents[r]},readdir:function(e){var r=[".",".."];for(var t in e.contents)e.contents.hasOwnProperty(t)&&r.push(t);return r},symlink:function(e,r,t){var n=We.createNode(e,r,41471,0);return n.link=t,n},readlink:function(e){if(!He.isLink(e.mode))throw new He.ErrnoError(qe.EINVAL);return e.link}},stream_ops:{read:function(e,r,t,n,i){var o=e.node.contents;if(i>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-i,n);if(a>8&&o.subarray)r.set(o.subarray(i,i+a),t);else for(var s=0;s<a;s++)r[t+s]=o[i+s];return a},write:function(e,r,t,n,i,o){if(!1,!n)return 0;var a=e.node;if(a.timestamp=Date.now(),r.subarray&&(!a.contents||a.contents.subarray)){if(0===a.usedBytes&&0===i)return a.contents=new Uint8Array(r.subarray(t,t+n)),a.usedBytes=n,n;if(i+n<=a.usedBytes)return a.contents.set(r.subarray(t,t+n),i),n}if(We.expandFileStorage(a,i+n),a.contents.subarray&&r.subarray)a.contents.set(r.subarray(t,t+n),i);else for(var s=0;s<n;s++)a.contents[i+s]=r[t+s];return a.usedBytes=Math.max(a.usedBytes,i+n),n},llseek:function(e,r,t){var n=r;if(1===t?n+=e.position:2===t&&He.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new He.ErrnoError(qe.EINVAL);return n},allocate:function(e,r,t){We.expandFileStorage(e.node,r+t),e.node.usedBytes=Math.max(e.node.usedBytes,r+t)},mmap:function(e,r,t,n,i,o,a){if(!He.isFile(e.node.mode))throw new He.ErrnoError(qe.ENODEV);var s,u,c=e.node.contents;if(2&a||c.buffer!==r&&c.buffer!==r.buffer){if((i>0||i+n<e.node.usedBytes)&&(c=c.subarray?c.subarray(i,i+n):Array.prototype.slice.call(c,i,i+n)),u=!0,!(s=Hf(n)))throw new He.ErrnoError(qe.ENOMEM);r.set(c,s)}else u=!1,s=c.byteOffset;return{ptr:s,allocated:u}},msync:function(e,r,t,n,i){if(!He.isFile(e.node.mode))throw new He.ErrnoError(qe.ENODEV);if(2&i)return 0;We.stream_ops.write(e,r,0,n,t,!1);return 0}}},$e={dbs:{},indexedDB:function(){if("undefined"!=typeof indexedDB)return indexedDB;var e=null;return"object"==typeof window&&(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),T(e,"IDBFS used, but indexedDB not supported"),e},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(e){return We.mount.apply(null,arguments)},syncfs:function(e,r,t){$e.getLocalSet(e,function(n,i){if(n)return t(n);$e.getRemoteSet(e,function(e,n){if(e)return t(e);var o=r?n:i,a=r?i:n;$e.reconcile(o,a,t)})})},getDB:function(e,r){var t,n=$e.dbs[e];if(n)return r(null,n);try{t=$e.indexedDB().open(e,$e.DB_VERSION)}catch(e){return r(e)}if(!t)return r("Unable to connect to IndexedDB");t.onupgradeneeded=function(e){var r,t=e.target.result,n=e.target.transaction;(r=t.objectStoreNames.contains($e.DB_STORE_NAME)?n.objectStore($e.DB_STORE_NAME):t.createObjectStore($e.DB_STORE_NAME)).indexNames.contains("timestamp")||r.createIndex("timestamp","timestamp",{unique:!1})},t.onsuccess=function(){n=t.result,$e.dbs[e]=n,r(null,n)},t.onerror=function(e){r(this.error),e.preventDefault()}},getLocalSet:function(e,r){var t={};function n(e){return"."!==e&&".."!==e}function i(e){return function(r){return Ge.join2(e,r)}}for(var o=He.readdir(e.mountpoint).filter(n).map(i(e.mountpoint));o.length;){var a,s=o.pop();try{a=He.stat(s)}catch(e){return r(e)}He.isDir(a.mode)&&o.push.apply(o,He.readdir(s).filter(n).map(i(s))),t[s]={timestamp:a.mtime}}return r(null,{type:"local",entries:t})},getRemoteSet:function(e,r){var t={};$e.getDB(e.mountpoint,function(e,n){if(e)return r(e);try{var i=n.transaction([$e.DB_STORE_NAME],"readonly");i.onerror=function(e){r(this.error),e.preventDefault()},i.objectStore($e.DB_STORE_NAME).index("timestamp").openKeyCursor().onsuccess=function(e){var i=e.target.result;if(!i)return r(null,{type:"remote",db:n,entries:t});t[i.primaryKey]={timestamp:i.key},i.continue()}}catch(e){return r(e)}})},loadLocalEntry:function(e,r){var t,n;try{n=He.lookupPath(e).node,t=He.stat(e)}catch(e){return r(e)}return He.isDir(t.mode)?r(null,{timestamp:t.mtime,mode:t.mode}):He.isFile(t.mode)?(n.contents=We.getFileDataAsTypedArray(n),r(null,{timestamp:t.mtime,mode:t.mode,contents:n.contents})):r(new Error("node type not supported"))},storeLocalEntry:function(e,r,t){try{if(He.isDir(r.mode))He.mkdir(e,r.mode);else{if(!He.isFile(r.mode))return t(new Error("node type not supported"));He.writeFile(e,r.contents,{canOwn:!0})}He.chmod(e,r.mode),He.utime(e,r.timestamp,r.timestamp)}catch(e){return t(e)}t(null)},removeLocalEntry:function(e,r){try{He.lookupPath(e);var t=He.stat(e);He.isDir(t.mode)?He.rmdir(e):He.isFile(t.mode)&&He.unlink(e)}catch(e){return r(e)}r(null)},loadRemoteEntry:function(e,r,t){var n=e.get(r);n.onsuccess=function(e){t(null,e.target.result)},n.onerror=function(e){t(this.error),e.preventDefault()}},storeRemoteEntry:function(e,r,t,n){var i=e.put(t,r);i.onsuccess=function(){n(null)},i.onerror=function(e){n(this.error),e.preventDefault()}},removeRemoteEntry:function(e,r,t){var n=e.delete(r);n.onsuccess=function(){t(null)},n.onerror=function(e){t(this.error),e.preventDefault()}},reconcile:function(e,r,t){var n=0,i=[];Object.keys(e.entries).forEach(function(t){var o=e.entries[t],a=r.entries[t];(!a||o.timestamp>a.timestamp)&&(i.push(t),n++)});var o=[];if(Object.keys(r.entries).forEach(function(t){r.entries[t];e.entries[t]||(o.push(t),n++)}),!n)return t(null);var a=0,s=("remote"===e.type?e.db:r.db).transaction([$e.DB_STORE_NAME],"readwrite"),u=s.objectStore($e.DB_STORE_NAME);function c(e){return e?c.errored?void 0:(c.errored=!0,t(e)):++a>=n?t(null):void 0}s.onerror=function(e){c(this.error),e.preventDefault()},i.sort().forEach(function(e){"local"===r.type?$e.loadRemoteEntry(u,e,function(r,t){if(r)return c(r);$e.storeLocalEntry(e,t,c)}):$e.loadLocalEntry(e,function(r,t){if(r)return c(r);$e.storeRemoteEntry(u,e,t,c)})}),o.sort().reverse().forEach(function(e){"local"===r.type?$e.removeLocalEntry(e,c):$e.removeRemoteEntry(u,e,c)})}},je={isWindows:!1,staticInit:function(){je.isWindows=!!r.platform.match(/^win/);var e=r.binding("constants");e.fs&&(e=e.fs),je.flagsForNodeMap={1024:e.O_APPEND,64:e.O_CREAT,128:e.O_EXCL,0:e.O_RDONLY,2:e.O_RDWR,4096:e.O_SYNC,512:e.O_TRUNC,1:e.O_WRONLY}},bufferFrom:function(e){return i.alloc?i.from(e):new i(e)},mount:function(e){return T(f),je.createNode(null,"/",je.getMode(e.opts.root),0)},createNode:function(e,r,t,n){if(!He.isDir(t)&&!He.isFile(t)&&!He.isLink(t))throw new He.ErrnoError(qe.EINVAL);var i=He.createNode(e,r,t);return i.node_ops=je.node_ops,i.stream_ops=je.stream_ops,i},getMode:function(e){var r;try{r=Lf.lstatSync(e),je.isWindows&&(r.mode=r.mode|(292&r.mode)>>2)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}return r.mode},realPath:function(e){for(var r=[];e.parent!==e;)r.push(e.name),e=e.parent;return r.push(e.mount.opts.root),r.reverse(),Ge.join.apply(null,r)},flagsForNode:function(e){e&=-2097153,e&=-2049,e&=-32769,e&=-524289;var r=0;for(var t in je.flagsForNodeMap)e&t&&(r|=je.flagsForNodeMap[t],e^=t);if(e)throw new He.ErrnoError(qe.EINVAL);return r},node_ops:{getattr:function(e){var r,t=je.realPath(e);try{r=Lf.lstatSync(t)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}return je.isWindows&&!r.blksize&&(r.blksize=4096),je.isWindows&&!r.blocks&&(r.blocks=(r.size+r.blksize-1)/r.blksize|0),{dev:r.dev,ino:r.ino,mode:r.mode,nlink:r.nlink,uid:r.uid,gid:r.gid,rdev:r.rdev,size:r.size,atime:r.atime,mtime:r.mtime,ctime:r.ctime,blksize:r.blksize,blocks:r.blocks}},setattr:function(e,r){var t=je.realPath(e);try{if(void 0!==r.mode&&(Lf.chmodSync(t,r.mode),e.mode=r.mode),void 0!==r.timestamp){var n=new Date(r.timestamp);Lf.utimesSync(t,n,n)}void 0!==r.size&&Lf.truncateSync(t,r.size)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}},lookup:function(e,r){var t=Ge.join2(je.realPath(e),r),n=je.getMode(t);return je.createNode(e,r,n)},mknod:function(e,r,t,n){var i=je.createNode(e,r,t,n),o=je.realPath(i);try{He.isDir(i.mode)?Lf.mkdirSync(o,i.mode):Lf.writeFileSync(o,"",{mode:i.mode})}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}return i},rename:function(e,r,t){var n=je.realPath(e),i=Ge.join2(je.realPath(r),t);try{Lf.renameSync(n,i)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}},unlink:function(e,r){var t=Ge.join2(je.realPath(e),r);try{Lf.unlinkSync(t)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}},rmdir:function(e,r){var t=Ge.join2(je.realPath(e),r);try{Lf.rmdirSync(t)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}},readdir:function(e){var r=je.realPath(e);try{return Lf.readdirSync(r)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}},symlink:function(e,r,t){var n=Ge.join2(je.realPath(e),r);try{Lf.symlinkSync(t,n)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}},readlink:function(e){var r=je.realPath(e);try{return r=Lf.readlinkSync(r),r=Of.relative(Of.resolve(e.mount.opts.root),r)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}}},stream_ops:{open:function(e){var r=je.realPath(e.node);try{He.isFile(e.node.mode)&&(e.nfd=Lf.openSync(r,je.flagsForNode(e.flags)))}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}},close:function(e){try{He.isFile(e.node.mode)&&e.nfd&&Lf.closeSync(e.nfd)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}},read:function(e,r,t,n,i){if(0===n)return 0;try{return Lf.readSync(e.nfd,je.bufferFrom(r.buffer),t,n,i)}catch(e){throw new He.ErrnoError(qe[e.code])}},write:function(e,r,t,n,i){try{return Lf.writeSync(e.nfd,je.bufferFrom(r.buffer),t,n,i)}catch(e){throw new He.ErrnoError(qe[e.code])}},llseek:function(e,r,t){var n=r;if(1===t)n+=e.position;else if(2===t&&He.isFile(e.node.mode))try{n+=Lf.fstatSync(e.nfd).size}catch(e){throw new He.ErrnoError(qe[e.code])}if(n<0)throw new He.ErrnoError(qe.EINVAL);return n}}},ze={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(e){T(c),ze.reader||(ze.reader=new FileReaderSync);var r=ze.createNode(null,"/",ze.DIR_MODE,0),t={};function n(e){for(var n=e.split("/"),i=r,o=0;o<n.length-1;o++){var a=n.slice(0,o+1).join("/");t[a]||(t[a]=ze.createNode(i,n[o],ze.DIR_MODE,0)),i=t[a]}return i}function i(e){var r=e.split("/");return r[r.length-1]}return Array.prototype.forEach.call(e.opts.files||[],function(e){ze.createNode(n(e.name),i(e.name),ze.FILE_MODE,0,e,e.lastModifiedDate)}),(e.opts.blobs||[]).forEach(function(e){ze.createNode(n(e.name),i(e.name),ze.FILE_MODE,0,e.data)}),(e.opts.packages||[]).forEach(function(e){e.metadata.files.forEach(function(r){var t=r.filename.substr(1);ze.createNode(n(t),i(t),ze.FILE_MODE,0,e.blob.slice(r.start,r.end))})}),r},createNode:function(e,r,t,n,i,o){var a=He.createNode(e,r,t);return a.mode=t,a.node_ops=ze.node_ops,a.stream_ops=ze.stream_ops,a.timestamp=(o||new Date).getTime(),T(ze.FILE_MODE!==ze.DIR_MODE),t===ze.FILE_MODE?(a.size=i.size,a.contents=i):(a.size=4096,a.contents={}),e&&(e.contents[r]=a),a},node_ops:{getattr:function(e){return{dev:1,ino:void 0,mode:e.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:e.size,atime:new Date(e.timestamp),mtime:new Date(e.timestamp),ctime:new Date(e.timestamp),blksize:4096,blocks:Math.ceil(e.size/4096)}},setattr:function(e,r){void 0!==r.mode&&(e.mode=r.mode),void 0!==r.timestamp&&(e.timestamp=r.timestamp)},lookup:function(e,r){throw new He.ErrnoError(qe.ENOENT)},mknod:function(e,r,t,n){throw new He.ErrnoError(qe.EPERM)},rename:function(e,r,t){throw new He.ErrnoError(qe.EPERM)},unlink:function(e,r){throw new He.ErrnoError(qe.EPERM)},rmdir:function(e,r){throw new He.ErrnoError(qe.EPERM)},readdir:function(e){var r=[".",".."];for(var t in e.contents)e.contents.hasOwnProperty(t)&&r.push(t);return r},symlink:function(e,r,t){throw new He.ErrnoError(qe.EPERM)},readlink:function(e){throw new He.ErrnoError(qe.EPERM)}},stream_ops:{read:function(e,r,t,n,i){if(i>=e.node.size)return 0;var o=e.node.contents.slice(i,i+n),a=ze.reader.readAsArrayBuffer(o);return r.set(new Uint8Array(a),t),o.size},write:function(e,r,t,n,i){throw new He.ErrnoError(qe.EIO)},llseek:function(e,r,t){var n=r;if(1===t?n+=e.position:2===t&&He.isFile(e.node.mode)&&(n+=e.node.size),n<0)throw new He.ErrnoError(qe.EINVAL);return n}}},He={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(e){if(!(e instanceof He.ErrnoError))throw e+" : "+R();return Ue(e.errno)},lookupPath:function(e,r){if(r=r||{},!(e=Ge.resolve(He.cwd(),e)))return{path:"",node:null};var t={follow_mount:!0,recurse_count:0};for(var n in t)void 0===r[n]&&(r[n]=t[n]);if(r.recurse_count>8)throw new He.ErrnoError(40);for(var i=Ge.normalizeArray(e.split("/").filter(function(e){return!!e}),!1),o=He.root,a="/",s=0;s<i.length;s++){var u=s===i.length-1;if(u&&r.parent)break;if(o=He.lookupNode(o,i[s]),a=Ge.join2(a,i[s]),He.isMountpoint(o)&&(!u||u&&r.follow_mount)&&(o=o.mounted.root),!u||r.follow)for(var c=0;He.isLink(o.mode);){var f=He.readlink(a);if(a=Ge.resolve(Ge.dirname(a),f),o=He.lookupPath(a,{recurse_count:r.recurse_count}).node,c++>40)throw new He.ErrnoError(40)}}return{path:a,node:o}},getPath:function(e){for(var r;;){if(He.isRoot(e)){var t=e.mount.mountpoint;return r?"/"!==t[t.length-1]?t+"/"+r:t+r:t}r=r?e.name+"/"+r:e.name,e=e.parent}},hashName:function(e,r){for(var t=0,n=0;n<r.length;n++)t=(t<<5)-t+r.charCodeAt(n)|0;return(e+t>>>0)%He.nameTable.length},hashAddNode:function(e){var r=He.hashName(e.parent.id,e.name);e.name_next=He.nameTable[r],He.nameTable[r]=e},hashRemoveNode:function(e){var r=He.hashName(e.parent.id,e.name);if(He.nameTable[r]===e)He.nameTable[r]=e.name_next;else for(var t=He.nameTable[r];t;){if(t.name_next===e){t.name_next=e.name_next;break}t=t.name_next}},lookupNode:function(e,r){var t=He.mayLookup(e);if(t)throw new He.ErrnoError(t,e);for(var n=He.hashName(e.id,r),i=He.nameTable[n];i;i=i.name_next){var o=i.name;if(i.parent.id===e.id&&o===r)return i}return He.lookup(e,r)},createNode:function(e,r,t,n){if(!He.FSNode){He.FSNode=function(e,r,t,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=He.nextInode++,this.name=r,this.mode=t,this.node_ops={},this.stream_ops={},this.rdev=n},He.FSNode.prototype={};Object.defineProperties(He.FSNode.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return He.isDir(this.mode)}},isDevice:{get:function(){return He.isChrdev(this.mode)}}})}var i=new He.FSNode(e,r,t,n);return He.hashAddNode(i),i},destroyNode:function(e){He.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return 49152==(49152&e)},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(e){var r=He.flagModes[e];if(void 0===r)throw new Error("Unknown file open mode: "+e);return r},flagsToPermissionString:function(e){var r=["r","w","rw"][3&e];return 512&e&&(r+="w"),r},nodePermissions:function(e,r){return He.ignorePermissions?0:(-1===r.indexOf("r")||292&e.mode)&&(-1===r.indexOf("w")||146&e.mode)&&(-1===r.indexOf("x")||73&e.mode)?0:13},mayLookup:function(e){var r=He.nodePermissions(e,"x");return r||(e.node_ops.lookup?0:13)},mayCreate:function(e,r){try{He.lookupNode(e,r);return 17}catch(e){}return He.nodePermissions(e,"wx")},mayDelete:function(e,r,t){var n;try{n=He.lookupNode(e,r)}catch(e){return e.errno}var i=He.nodePermissions(e,"wx");if(i)return i;if(t){if(!He.isDir(n.mode))return 20;if(He.isRoot(n)||He.getPath(n)===He.cwd())return 16}else if(He.isDir(n.mode))return 21;return 0},mayOpen:function(e,r){return e?He.isLink(e.mode)?40:He.isDir(e.mode)&&("r"!==He.flagsToPermissionString(r)||512&r)?21:He.nodePermissions(e,He.flagsToPermissionString(r)):2},MAX_OPEN_FDS:4096,nextfd:function(e,r){e=e||0,r=r||He.MAX_OPEN_FDS;for(var t=e;t<=r;t++)if(!He.streams[t])return t;throw new He.ErrnoError(24)},getStream:function(e){return He.streams[e]},createStream:function(e,r,t){He.FSStream||(He.FSStream=function(){},He.FSStream.prototype={},Object.defineProperties(He.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}}));var n=new He.FSStream;for(var i in e)n[i]=e[i];e=n;var o=He.nextfd(r,t);return e.fd=o,He.streams[o]=e,e},closeStream:function(e){He.streams[e]=null},chrdev_stream_ops:{open:function(e){var r=He.getDevice(e.node.rdev);e.stream_ops=r.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new He.ErrnoError(29)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,r){return e<<8|r},registerDevice:function(e,r){He.devices[e]={stream_ops:r}},getDevice:function(e){return He.devices[e]},getMounts:function(e){for(var r=[],t=[e];t.length;){var n=t.pop();r.push(n),t.push.apply(t,n.mounts)}return r},syncfs:function(e,r){"function"==typeof e&&(r=e,e=!1),He.syncFSRequests++,He.syncFSRequests>1&&console.log("warning: "+He.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var t=He.getMounts(He.root.mount),n=0;function i(e){return He.syncFSRequests--,r(e)}function o(e){if(e)return o.errored?void 0:(o.errored=!0,i(e));++n>=t.length&&i(null)}t.forEach(function(r){if(!r.type.syncfs)return o(null);r.type.syncfs(r,e,o)})},mount:function(e,r,t){var n,i="/"===t,o=!t;if(i&&He.root)throw new He.ErrnoError(16);if(!i&&!o){var a=He.lookupPath(t,{follow_mount:!1});if(t=a.path,n=a.node,He.isMountpoint(n))throw new He.ErrnoError(16);if(!He.isDir(n.mode))throw new He.ErrnoError(20)}var s={type:e,opts:r,mountpoint:t,mounts:[]},u=e.mount(s);return u.mount=s,s.root=u,i?He.root=u:n&&(n.mounted=s,n.mount&&n.mount.mounts.push(s)),u},unmount:function(e){var r=He.lookupPath(e,{follow_mount:!1});if(!He.isMountpoint(r.node))throw new He.ErrnoError(22);var t=r.node,n=t.mounted,i=He.getMounts(n);Object.keys(He.nameTable).forEach(function(e){for(var r=He.nameTable[e];r;){var t=r.name_next;-1!==i.indexOf(r.mount)&&He.destroyNode(r),r=t}}),t.mounted=null;var o=t.mount.mounts.indexOf(n);t.mount.mounts.splice(o,1)},lookup:function(e,r){return e.node_ops.lookup(e,r)},mknod:function(e,r,t){var n=He.lookupPath(e,{parent:!0}).node,i=Ge.basename(e);if(!i||"."===i||".."===i)throw new He.ErrnoError(22);var o=He.mayCreate(n,i);if(o)throw new He.ErrnoError(o);if(!n.node_ops.mknod)throw new He.ErrnoError(1);return n.node_ops.mknod(n,i,r,t)},create:function(e,r){return r=void 0!==r?r:438,r&=4095,r|=32768,He.mknod(e,r,0)},mkdir:function(e,r){return r=void 0!==r?r:511,r&=1023,r|=16384,He.mknod(e,r,0)},mkdirTree:function(e,r){for(var t=e.split("/"),n="",i=0;i<t.length;++i)if(t[i]){n+="/"+t[i];try{He.mkdir(n,r)}catch(e){if(17!=e.errno)throw e}}},mkdev:function(e,r,t){return void 0===t&&(t=r,r=438),r|=8192,He.mknod(e,r,t)},symlink:function(e,r){if(!Ge.resolve(e))throw new He.ErrnoError(2);var t=He.lookupPath(r,{parent:!0}).node;if(!t)throw new He.ErrnoError(2);var n=Ge.basename(r),i=He.mayCreate(t,n);if(i)throw new He.ErrnoError(i);if(!t.node_ops.symlink)throw new He.ErrnoError(1);return t.node_ops.symlink(t,n,e)},rename:function(e,r){var t,n,i=Ge.dirname(e),o=Ge.dirname(r),a=Ge.basename(e),s=Ge.basename(r);try{t=He.lookupPath(e,{parent:!0}).node,n=He.lookupPath(r,{parent:!0}).node}catch(e){throw new He.ErrnoError(16)}if(!t||!n)throw new He.ErrnoError(2);if(t.mount!==n.mount)throw new He.ErrnoError(18);var u,c=He.lookupNode(t,a),f=Ge.relative(e,o);if("."!==f.charAt(0))throw new He.ErrnoError(22);if("."!==(f=Ge.relative(r,i)).charAt(0))throw new He.ErrnoError(39);try{u=He.lookupNode(n,s)}catch(e){}if(c!==u){var l=He.isDir(c.mode),d=He.mayDelete(t,a,l);if(d)throw new He.ErrnoError(d);if(d=u?He.mayDelete(n,s,l):He.mayCreate(n,s))throw new He.ErrnoError(d);if(!t.node_ops.rename)throw new He.ErrnoError(1);if(He.isMountpoint(c)||u&&He.isMountpoint(u))throw new He.ErrnoError(16);if(n!==t&&(d=He.nodePermissions(t,"w")))throw new He.ErrnoError(d);try{He.trackingDelegate.willMovePath&&He.trackingDelegate.willMovePath(e,r)}catch(t){console.log("FS.trackingDelegate['willMovePath']('"+e+"', '"+r+"') threw an exception: "+t.message)}He.hashRemoveNode(c);try{t.node_ops.rename(c,n,s)}catch(e){throw e}finally{He.hashAddNode(c)}try{He.trackingDelegate.onMovePath&&He.trackingDelegate.onMovePath(e,r)}catch(t){console.log("FS.trackingDelegate['onMovePath']('"+e+"', '"+r+"') threw an exception: "+t.message)}}},rmdir:function(e){var r=He.lookupPath(e,{parent:!0}).node,t=Ge.basename(e),n=He.lookupNode(r,t),i=He.mayDelete(r,t,!0);if(i)throw new He.ErrnoError(i);if(!r.node_ops.rmdir)throw new He.ErrnoError(1);if(He.isMountpoint(n))throw new He.ErrnoError(16);try{He.trackingDelegate.willDeletePath&&He.trackingDelegate.willDeletePath(e)}catch(r){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+r.message)}r.node_ops.rmdir(r,t),He.destroyNode(n);try{He.trackingDelegate.onDeletePath&&He.trackingDelegate.onDeletePath(e)}catch(r){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+r.message)}},readdir:function(e){var r=He.lookupPath(e,{follow:!0}).node;if(!r.node_ops.readdir)throw new He.ErrnoError(20);return r.node_ops.readdir(r)},unlink:function(e){var r=He.lookupPath(e,{parent:!0}).node,t=Ge.basename(e),n=He.lookupNode(r,t),i=He.mayDelete(r,t,!1);if(i)throw new He.ErrnoError(i);if(!r.node_ops.unlink)throw new He.ErrnoError(1);if(He.isMountpoint(n))throw new He.ErrnoError(16);try{He.trackingDelegate.willDeletePath&&He.trackingDelegate.willDeletePath(e)}catch(r){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+r.message)}r.node_ops.unlink(r,t),He.destroyNode(n);try{He.trackingDelegate.onDeletePath&&He.trackingDelegate.onDeletePath(e)}catch(r){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+r.message)}},readlink:function(e){var r=He.lookupPath(e).node;if(!r)throw new He.ErrnoError(2);if(!r.node_ops.readlink)throw new He.ErrnoError(22);return Ge.resolve(He.getPath(r.parent),r.node_ops.readlink(r))},stat:function(e,r){var t=He.lookupPath(e,{follow:!r}).node;if(!t)throw new He.ErrnoError(2);if(!t.node_ops.getattr)throw new He.ErrnoError(1);return t.node_ops.getattr(t)},lstat:function(e){return He.stat(e,!0)},chmod:function(e,r,t){var n;"string"==typeof e?n=He.lookupPath(e,{follow:!t}).node:n=e;if(!n.node_ops.setattr)throw new He.ErrnoError(1);n.node_ops.setattr(n,{mode:4095&r|-4096&n.mode,timestamp:Date.now()})},lchmod:function(e,r){He.chmod(e,r,!0)},fchmod:function(e,r){var t=He.getStream(e);if(!t)throw new He.ErrnoError(9);He.chmod(t.node,r)},chown:function(e,r,t,n){var i;"string"==typeof e?i=He.lookupPath(e,{follow:!n}).node:i=e;if(!i.node_ops.setattr)throw new He.ErrnoError(1);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:function(e,r,t){He.chown(e,r,t,!0)},fchown:function(e,r,t){var n=He.getStream(e);if(!n)throw new He.ErrnoError(9);He.chown(n.node,r,t)},truncate:function(e,r){if(r<0)throw new He.ErrnoError(22);var t;"string"==typeof e?t=He.lookupPath(e,{follow:!0}).node:t=e;if(!t.node_ops.setattr)throw new He.ErrnoError(1);if(He.isDir(t.mode))throw new He.ErrnoError(21);if(!He.isFile(t.mode))throw new He.ErrnoError(22);var n=He.nodePermissions(t,"w");if(n)throw new He.ErrnoError(n);t.node_ops.setattr(t,{size:r,timestamp:Date.now()})},ftruncate:function(e,r){var t=He.getStream(e);if(!t)throw new He.ErrnoError(9);if(0==(2097155&t.flags))throw new He.ErrnoError(22);He.truncate(t.node,r)},utime:function(e,r,t){var n=He.lookupPath(e,{follow:!0}).node;n.node_ops.setattr(n,{timestamp:Math.max(r,t)})},open:function(e,r,t,n,i){if(""===e)throw new He.ErrnoError(2);var o;if(t=void 0===t?438:t,t=64&(r="string"==typeof r?He.modeStringToFlags(r):r)?4095&t|32768:0,"object"==typeof e)o=e;else{e=Ge.normalize(e);try{o=He.lookupPath(e,{follow:!(131072&r)}).node}catch(e){}}var s=!1;if(64&r)if(o){if(128&r)throw new He.ErrnoError(17)}else o=He.mknod(e,t,0),s=!0;if(!o)throw new He.ErrnoError(2);if(He.isChrdev(o.mode)&&(r&=-513),65536&r&&!He.isDir(o.mode))throw new He.ErrnoError(20);if(!s){var u=He.mayOpen(o,r);if(u)throw new He.ErrnoError(u)}512&r&&He.truncate(o,0),r&=-641;var c=He.createStream({node:o,path:He.getPath(o),flags:r,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1},n,i);c.stream_ops.open&&c.stream_ops.open(c),!a.logReadFiles||1&r||(He.readFiles||(He.readFiles={}),e in He.readFiles||(He.readFiles[e]=1,console.log("FS.trackingDelegate error on read file: "+e)));try{if(He.trackingDelegate.onOpenFile){var f=0;1!=(2097155&r)&&(f|=He.tracking.openFlags.READ),0!=(2097155&r)&&(f|=He.tracking.openFlags.WRITE),He.trackingDelegate.onOpenFile(e,f)}}catch(r){console.log("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+r.message)}return c},close:function(e){if(He.isClosed(e))throw new He.ErrnoError(9);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{He.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,r,t){if(He.isClosed(e))throw new He.ErrnoError(9);if(!e.seekable||!e.stream_ops.llseek)throw new He.ErrnoError(29);if(0!=t&&1!=t&&2!=t)throw new He.ErrnoError(22);return e.position=e.stream_ops.llseek(e,r,t),e.ungotten=[],e.position},read:function(e,r,t,n,i){if(n<0||i<0)throw new He.ErrnoError(22);if(He.isClosed(e))throw new He.ErrnoError(9);if(1==(2097155&e.flags))throw new He.ErrnoError(9);if(He.isDir(e.node.mode))throw new He.ErrnoError(21);if(!e.stream_ops.read)throw new He.ErrnoError(22);var o=void 0!==i;if(o){if(!e.seekable)throw new He.ErrnoError(29)}else i=e.position;var a=e.stream_ops.read(e,r,t,n,i);return o||(e.position+=a),a},write:function(e,r,t,n,i,o){if(n<0||i<0)throw new He.ErrnoError(22);if(He.isClosed(e))throw new He.ErrnoError(9);if(0==(2097155&e.flags))throw new He.ErrnoError(9);if(He.isDir(e.node.mode))throw new He.ErrnoError(21);if(!e.stream_ops.write)throw new He.ErrnoError(22);1024&e.flags&&He.llseek(e,0,2);var a=void 0!==i;if(a){if(!e.seekable)throw new He.ErrnoError(29)}else i=e.position;var s=e.stream_ops.write(e,r,t,n,i,o);a||(e.position+=s);try{e.path&&He.trackingDelegate.onWriteToFile&&He.trackingDelegate.onWriteToFile(e.path)}catch(r){console.log("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+r.message)}return s},allocate:function(e,r,t){if(He.isClosed(e))throw new He.ErrnoError(9);if(r<0||t<=0)throw new He.ErrnoError(22);if(0==(2097155&e.flags))throw new He.ErrnoError(9);if(!He.isFile(e.node.mode)&&!He.isDir(e.node.mode))throw new He.ErrnoError(19);if(!e.stream_ops.allocate)throw new He.ErrnoError(95);e.stream_ops.allocate(e,r,t)},mmap:function(e,r,t,n,i,o,a){if(1==(2097155&e.flags))throw new He.ErrnoError(13);if(!e.stream_ops.mmap)throw new He.ErrnoError(19);return e.stream_ops.mmap(e,r,t,n,i,o,a)},msync:function(e,r,t,n,i){return e&&e.stream_ops.msync?e.stream_ops.msync(e,r,t,n,i):0},munmap:function(e){return 0},ioctl:function(e,r,t){if(!e.stream_ops.ioctl)throw new He.ErrnoError(25);return e.stream_ops.ioctl(e,r,t)},readFile:function(e,r){if((r=r||{}).flags=r.flags||"r",r.encoding=r.encoding||"binary","utf8"!==r.encoding&&"binary"!==r.encoding)throw new Error('Invalid encoding type "'+r.encoding+'"');var t,n=He.open(e,r.flags),i=He.stat(e).size,o=new Uint8Array(i);return He.read(n,o,0,i,0),"utf8"===r.encoding?t=A(o,0):"binary"===r.encoding&&(t=o),He.close(n),t},writeFile:function(e,r,t){(t=t||{}).flags=t.flags||"w";var n=He.open(e,t.flags,t.mode);if("string"==typeof r){var i=new Uint8Array(k(r)+1),o=D(r,i,0,i.length);He.write(n,i,0,o,void 0,t.canOwn)}else{if(!ArrayBuffer.isView(r))throw new Error("Unsupported data type");He.write(n,r,0,r.byteLength,void 0,t.canOwn)}He.close(n)},cwd:function(){return He.currentPath},chdir:function(e){var r=He.lookupPath(e,{follow:!0});if(null===r.node)throw new He.ErrnoError(2);if(!He.isDir(r.node.mode))throw new He.ErrnoError(20);var t=He.nodePermissions(r.node,"x");if(t)throw new He.ErrnoError(t);He.currentPath=r.path},createDefaultDirectories:function(){He.mkdir("/tmp"),He.mkdir("/home"),He.mkdir("/home/web_user")},createDefaultDevices:function(){var e;if(He.mkdir("/dev"),He.registerDevice(He.makedev(1,3),{read:function(){return 0},write:function(e,r,t,n,i){return n}}),He.mkdev("/dev/null",He.makedev(1,3)),Ve.register(He.makedev(5,0),Ve.default_tty_ops),Ve.register(He.makedev(6,0),Ve.default_tty1_ops),He.mkdev("/dev/tty",He.makedev(5,0)),He.mkdev("/dev/tty1",He.makedev(6,0)),"object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var r=new Uint8Array(1);e=function(){return crypto.getRandomValues(r),r[0]}}else if(f)try{var n=t(16);e=function(){return n.randomBytes(1)[0]}}catch(r){e=function(){return 256*Math.random()|0}}else e=function(){Qf("random_device")};He.createDevice("/dev","random",e),He.createDevice("/dev","urandom",e),He.mkdir("/dev/shm"),He.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){He.mkdir("/proc"),He.mkdir("/proc/self"),He.mkdir("/proc/self/fd"),He.mount({mount:function(){var e=He.createNode("/proc/self","fd",16895,73);return e.node_ops={lookup:function(e,r){var t=+r,n=He.getStream(t);if(!n)throw new He.ErrnoError(9);var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return n.path}}};return i.parent=i,i}},e}},{},"/proc/self/fd")},createStandardStreams:function(){a.stdin?He.createDevice("/dev","stdin",a.stdin):He.symlink("/dev/tty","/dev/stdin"),a.stdout?He.createDevice("/dev","stdout",null,a.stdout):He.symlink("/dev/tty","/dev/stdout"),a.stderr?He.createDevice("/dev","stderr",null,a.stderr):He.symlink("/dev/tty1","/dev/stderr");He.open("/dev/stdin","r"),He.open("/dev/stdout","w"),He.open("/dev/stderr","w")},ensureErrnoError:function(){He.ErrnoError||(He.ErrnoError=function(e,r){this.node=r,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error",this.stack&&Object.defineProperty(this,"stack",{value:(new Error).stack,writable:!0})},He.ErrnoError.prototype=new Error,He.ErrnoError.prototype.constructor=He.ErrnoError,[2].forEach(function(e){He.genericErrors[e]=new He.ErrnoError(e),He.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:function(){He.ensureErrnoError(),He.nameTable=new Array(4096),He.mount(We,{},"/"),He.createDefaultDirectories(),He.createDefaultDevices(),He.createSpecialDirectories(),He.filesystems={MEMFS:We,IDBFS:$e,NODEFS:je,WORKERFS:ze}},init:function(e,r,t){He.init.initialized=!0,He.ensureErrnoError(),a.stdin=e||a.stdin,a.stdout=r||a.stdout,a.stderr=t||a.stderr,He.createStandardStreams()},quit:function(){He.init.initialized=!1;var e=a._fflush;e&&e(0);for(var r=0;r<He.streams.length;r++){var t=He.streams[r];t&&He.close(t)}},getMode:function(e,r){var t=0;return e&&(t|=365),r&&(t|=146),t},joinPath:function(e,r){var t=Ge.join.apply(null,e);return r&&"/"==t[0]&&(t=t.substr(1)),t},absolutePath:function(e,r){return Ge.resolve(r,e)},standardizePath:function(e){return Ge.normalize(e)},findObject:function(e,r){var t=He.analyzePath(e,r);return t.exists?t.object:(Ue(t.error),null)},analyzePath:function(e,r){try{e=(n=He.lookupPath(e,{follow:!r})).path}catch(e){}var t={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=He.lookupPath(e,{parent:!0});t.parentExists=!0,t.parentPath=n.path,t.parentObject=n.node,t.name=Ge.basename(e),n=He.lookupPath(e,{follow:!r}),t.exists=!0,t.path=n.path,t.object=n.node,t.name=n.node.name,t.isRoot="/"===n.path}catch(e){t.error=e.errno}return t},createFolder:function(e,r,t,n){var i=Ge.join2("string"==typeof e?e:He.getPath(e),r),o=He.getMode(t,n);return He.mkdir(i,o)},createPath:function(e,r,t,n){e="string"==typeof e?e:He.getPath(e);for(var i=r.split("/").reverse();i.length;){var o=i.pop();if(o){var a=Ge.join2(e,o);try{He.mkdir(a)}catch(e){}e=a}}return a},createFile:function(e,r,t,n,i){var o=Ge.join2("string"==typeof e?e:He.getPath(e),r),a=He.getMode(n,i);return He.create(o,a)},createDataFile:function(e,r,t,n,i,o){var a=r?Ge.join2("string"==typeof e?e:He.getPath(e),r):e,s=He.getMode(n,i),u=He.create(a,s);if(t){if("string"==typeof t){for(var c=new Array(t.length),f=0,l=t.length;f<l;++f)c[f]=t.charCodeAt(f);t=c}He.chmod(u,146|s);var d=He.open(u,"w");He.write(d,t,0,t.length,0,o),He.close(d),He.chmod(u,s)}return u},createDevice:function(e,r,t,n){var i=Ge.join2("string"==typeof e?e:He.getPath(e),r),o=He.getMode(!!t,!!n);He.createDevice.major||(He.createDevice.major=64);var a=He.makedev(He.createDevice.major++,0);return He.registerDevice(a,{open:function(e){e.seekable=!1},close:function(e){n&&n.buffer&&n.buffer.length&&n(10)},read:function(e,r,n,i,o){for(var a=0,s=0;s<i;s++){var u;try{u=t()}catch(e){throw new He.ErrnoError(5)}if(void 0===u&&0===a)throw new He.ErrnoError(11);if(null==u)break;a++,r[n+s]=u}return a&&(e.node.timestamp=Date.now()),a},write:function(e,r,t,i,o){for(var a=0;a<i;a++)try{n(r[t+a])}catch(e){throw new He.ErrnoError(5)}return i&&(e.node.timestamp=Date.now()),a}}),He.mkdev(i,o,a)},createLink:function(e,r,t,n,i){var o=Ge.join2("string"==typeof e?e:He.getPath(e),r);return He.symlink(t,o)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;var r=!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!a.read)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=Uf(a.read(e.url),!0),e.usedBytes=e.contents.length}catch(e){r=!1}return r||Ue(5),r},createLazyFile:function(e,r,t,n,i){function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(e){if(!(e>this.length-1||e<0)){var r=e%this.chunkSize,t=e/this.chunkSize|0;return this.getter(t)[r]}},o.prototype.setDataGetter=function(e){this.getter=e},o.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",t,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+t+". Status: "+e.status);var r,n=Number(e.getResponseHeader("Content-length")),i=(r=e.getResponseHeader("Accept-Ranges"))&&"bytes"===r,o=(r=e.getResponseHeader("Content-Encoding"))&&"gzip"===r,a=1048576;i||(a=n);var s=this;s.setDataGetter(function(e){var r=e*a,i=(e+1)*a-1;if(i=Math.min(i,n-1),void 0===s.chunks[e]&&(s.chunks[e]=function(e,r){if(e>r)throw new Error("invalid range ("+e+", "+r+") or no bytes requested!");if(r>n-1)throw new Error("only "+n+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",t,!1),n!==a&&i.setRequestHeader("Range","bytes="+e+"-"+r),"undefined"!=typeof Uint8Array&&(i.responseType="arraybuffer"),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw new Error("Couldn't load "+t+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):Uf(i.responseText||"",!0)}(r,i)),void 0===s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]}),!o&&n||(a=n=1,n=this.getter(0).length,a=n,console.log("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!c)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a=new o;Object.defineProperties(a,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var s={isDevice:!1,contents:a}}else s={isDevice:!1,url:t};var u=He.createFile(e,r,s,n,i);s.contents?u.contents=s.contents:s.url&&(u.contents=null,u.url=s.url),Object.defineProperties(u,{usedBytes:{get:function(){return this.contents.length}}});var f={};return Object.keys(u.stream_ops).forEach(function(e){var r=u.stream_ops[e];f[e]=function(){if(!He.forceLoadFile(u))throw new He.ErrnoError(5);return r.apply(null,arguments)}}),f.read=function(e,r,t,n,i){if(!He.forceLoadFile(u))throw new He.ErrnoError(5);var o=e.node.contents;if(i>=o.length)return 0;var a=Math.min(o.length-i,n);if(o.slice)for(var s=0;s<a;s++)r[t+s]=o[i+s];else for(s=0;s<a;s++)r[t+s]=o.get(i+s);return a},u.stream_ops=f,u},createPreloadedFile:function(e,r,t,n,i,o,s,u,c,f){Browser.init();var l=r?Ge.resolve(Ge.join2(e,r)):e;_e("cp "+l);function d(t){function d(t){f&&f(),u||He.createDataFile(e,r,t,n,i,c),o&&o(),Ee()}var p=!1;a.preloadPlugins.forEach(function(e){p||e.canHandle(l)&&(e.handle(t,l,d,function(){s&&s(),Ee()}),p=!0)}),p||d(t)}be(),"string"==typeof t?Browser.asyncLoad(t,function(e){d(e)},s):d(t)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,r,t){r=r||function(){},t=t||function(){};var n=He.indexedDB();try{var i=n.open(He.DB_NAME(),He.DB_VERSION)}catch(e){return t(e)}i.onupgradeneeded=function(){console.log("creating db"),i.result.createObjectStore(He.DB_STORE_NAME)},i.onsuccess=function(){var n=i.result.transaction([He.DB_STORE_NAME],"readwrite"),o=n.objectStore(He.DB_STORE_NAME),a=0,s=0,u=e.length;function c(){0==s?r():t()}e.forEach(function(e){var r=o.put(He.analyzePath(e).object.contents,e);r.onsuccess=function(){++a+s==u&&c()},r.onerror=function(){a+ ++s==u&&c()}}),n.onerror=t},i.onerror=t},loadFilesFromDB:function(e,r,t){r=r||function(){},t=t||function(){};var n=He.indexedDB();try{var i=n.open(He.DB_NAME(),He.DB_VERSION)}catch(e){return t(e)}i.onupgradeneeded=t,i.onsuccess=function(){var n=i.result;try{var o=n.transaction([He.DB_STORE_NAME],"readonly")}catch(e){return void t(e)}var a=o.objectStore(He.DB_STORE_NAME),s=0,u=0,c=e.length;function f(){0==u?r():t()}e.forEach(function(e){var r=a.get(e);r.onsuccess=function(){He.analyzePath(e).exists&&He.unlink(e),He.createDataFile(Ge.dirname(e),Ge.basename(e),r.result,!0,!0,!0),++s+u==c&&f()},r.onerror=function(){s+ ++u==c&&f()}}),o.onerror=t},i.onerror=t}},qe={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86},Ye={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(e,r){if("/"!==r[0]){var t;if(-100===e)t=He.cwd();else{var n=He.getStream(e);if(!n)throw new He.ErrnoError(qe.EBADF);t=n.path}r=Ge.join2(t,r)}return r},doStat:function(e,r,t){try{var n=e(r)}catch(e){if(e&&e.node&&Ge.normalize(r)!==Ge.normalize(He.getPath(e.node)))return-qe.ENOTDIR;throw e}return V[t>>2]=n.dev,V[t+4>>2]=0,V[t+8>>2]=n.ino,V[t+12>>2]=n.mode,V[t+16>>2]=n.nlink,V[t+20>>2]=n.uid,V[t+24>>2]=n.gid,V[t+28>>2]=n.rdev,V[t+32>>2]=0,V[t+36>>2]=n.size,V[t+40>>2]=4096,V[t+44>>2]=n.blocks,V[t+48>>2]=n.atime.getTime()/1e3|0,V[t+52>>2]=0,V[t+56>>2]=n.mtime.getTime()/1e3|0,V[t+60>>2]=0,V[t+64>>2]=n.ctime.getTime()/1e3|0,V[t+68>>2]=0,V[t+72>>2]=n.ino,0},doMsync:function(e,r,t,n){var i=new Uint8Array(N.subarray(e,e+t));He.msync(r,i,0,t,n)},doMkdir:function(e,r){return"/"===(e=Ge.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),He.mkdir(e,r,0),0},doMknod:function(e,r,t){switch(61440&r){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-qe.EINVAL}return He.mknod(e,r,t),0},doReadlink:function(e,r,t){if(t<=0)return-qe.EINVAL;var n=He.readlink(e),i=Math.min(t,k(n)),o=O[r+i];return B(n,r,t+1),O[r+i]=o,i},doAccess:function(e,r){if(-8&r)return-qe.EINVAL;var t;t=He.lookupPath(e,{follow:!0}).node;var n="";return 4&r&&(n+="r"),2&r&&(n+="w"),1&r&&(n+="x"),n&&He.nodePermissions(t,n)?-qe.EACCES:0},doDup:function(e,r,t){var n=He.getStream(t);return n&&He.close(n),He.open(e,r,0,t,t).fd},doReadv:function(e,r,t,n){for(var i=0,o=0;o<t;o++){var a=V[r+8*o>>2],s=V[r+(8*o+4)>>2],u=He.read(e,O,a,s,n);if(u<0)return-1;if(i+=u,u<s)break}return i},doWritev:function(e,r,t,n){for(var i=0,o=0;o<t;o++){var a=V[r+8*o>>2],s=V[r+(8*o+4)>>2],u=He.write(e,O,a,s,n);if(u<0)return-1;i+=u}return i},varargs:0,get:function(e){return Ye.varargs+=4,V[Ye.varargs-4>>2]},getStr:function(){return C(Ye.get())},getStreamFromFD:function(){var e=He.getStream(Ye.get());if(!e)throw new He.ErrnoError(qe.EBADF);return e},getSocketFromFD:function(){var e=SOCKFS.getSocket(Ye.get());if(!e)throw new He.ErrnoError(qe.EBADF);return e},getSocketAddress:function(e){var r=Ye.get(),t=Ye.get();if(e&&0===r)return null;var n=__read_sockaddr(r,t);if(n.errno)throw new He.ErrnoError(n.errno);return n.addr=DNS.lookup_addr(n.addr)||n.addr,n},get64:function(){var e=Ye.get();Ye.get();return e},getZero:function(){Ye.get()}};function Xe(e,r){Ye.varargs=r;try{var t=Ye.getStreamFromFD(),n=(Ye.get(),Ye.get()),i=Ye.get(),o=Ye.get(),a=n;return He.llseek(t,a,o),V[i>>2]=t.position,t.getdents&&0===a&&0===o&&(t.getdents=null),0}catch(e){return void 0!==He&&e instanceof He.ErrnoError||Qf(e),-e.errno}}function Qe(e,r){Ye.varargs=r;try{var t=Ye.getStreamFromFD(),n=Ye.get(),i=Ye.get();return Ye.doWritev(t,n,i)}catch(e){return void 0!==He&&e instanceof He.ErrnoError||Qf(e),-e.errno}}function Ke(e,r){Ye.varargs=r;try{var t=Ye.getStreamFromFD();switch(Ye.get()){case 0:return(n=Ye.get())<0?-qe.EINVAL:He.open(t.path,t.flags,0,n).fd;case 1:case 2:return 0;case 3:return t.flags;case 4:var n=Ye.get();return t.flags|=n,0;case 12:n=Ye.get();return U[n+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-qe.EINVAL;case 9:return Ue(qe.EINVAL),-1;default:return-qe.EINVAL}}catch(e){return void 0!==He&&e instanceof He.ErrnoError||Qf(e),-e.errno}}function Ze(e,r){Ye.varargs=r;try{var t=Ye.getStreamFromFD(),n=Ye.get(),i=Ye.get();return He.read(t,O,n,i)}catch(e){return void 0!==He&&e instanceof He.ErrnoError||Qf(e),-e.errno}}function Je(e,r){Ye.varargs=r;try{var t=Ye.getStr(),n=Ye.get(),i=Ye.get();return He.open(t,n,i).fd}catch(e){return void 0!==He&&e instanceof He.ErrnoError||Qf(e),-e.errno}}function er(e,r){Ye.varargs=r;try{var t=Ye.getStreamFromFD(),n=Ye.get();switch(n){case 21509:case 21505:return t.tty?0:-qe.ENOTTY;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return t.tty?0:-qe.ENOTTY;case 21519:if(!t.tty)return-qe.ENOTTY;var i=Ye.get();return V[i>>2]=0,0;case 21520:return t.tty?-qe.EINVAL:-qe.ENOTTY;case 21531:i=Ye.get();return He.ioctl(t,n,i);case 21523:case 21524:return t.tty?0:-qe.ENOTTY;default:Qf("bad ioctl syscall "+n)}}catch(e){return void 0!==He&&e instanceof He.ErrnoError||Qf(e),-e.errno}}function rr(e,r){Ye.varargs=r;try{var t=Ye.getStreamFromFD();return He.close(t),0}catch(e){return void 0!==He&&e instanceof He.ErrnoError||Qf(e),-e.errno}}var tr={};function nr(e){for(;e.length;){var r=e.pop();e.pop()(r)}}function ir(e){return this.fromWireType(W[e>>2])}var or={},ar={},sr={},ur=48,cr=57;function fr(e){if(void 0===e)return"_unknown";var r=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return r>=ur&&r<=cr?"_"+e:e}function lr(e,r){return e=fr(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(r)}function dr(e,r){var t=lr(r,function(e){this.name=r,this.message=e;var t=new Error(e).stack;void 0!==t&&(this.stack=this.toString()+"\n"+t.replace(/^Error(:[^\n]*)?\n/,""))});return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},t}var pr=void 0;function mr(e){throw new pr(e)}function hr(e,r,t){function n(r){var n=t(r);n.length!==e.length&&mr("Mismatched type converter count");for(var i=0;i<e.length;++i)Tr(e[i],n[i])}e.forEach(function(e){sr[e]=r});var i=new Array(r.length),o=[],a=0;r.forEach(function(e,r){ar.hasOwnProperty(e)?i[r]=ar[e]:(o.push(e),or.hasOwnProperty(e)||(or[e]=[]),or[e].push(function(){i[r]=ar[e],++a===o.length&&n(i)}))}),0===o.length&&n(i)}function gr(e){var r=tr[e];delete tr[e];var t=r.elements,n=t.length,i=t.map(function(e){return e.getterReturnType}).concat(t.map(function(e){return e.setterArgumentType})),o=r.rawConstructor,a=r.rawDestructor;hr([e],i,function(e){return t.forEach(function(r,t){var i=e[t],o=r.getter,a=r.getterContext,s=e[t+n],u=r.setter,c=r.setterContext;r.read=function(e){return i.fromWireType(o(a,e))},r.write=function(e,r){var t=[];u(c,e,s.toWireType(t,r)),nr(t)}}),[{name:r.name,fromWireType:function(e){for(var r=new Array(n),i=0;i<n;++i)r[i]=t[i].read(e);return a(e),r},toWireType:function(e,i){if(n!==i.length)throw new TypeError("Incorrect number of tuple elements for "+r.name+": expected="+n+", actual="+i.length);for(var s=o(),u=0;u<n;++u)t[u].write(s,i[u]);return null!==e&&e.push(a,s),s},argPackAdvance:8,readValueFromPointer:ir,destructorFunction:a}]})}var yr={};function vr(e){var r=yr[e];delete yr[e];var t=r.rawConstructor,n=r.rawDestructor,i=r.fields;hr([e],i.map(function(e){return e.getterReturnType}).concat(i.map(function(e){return e.setterArgumentType})),function(e){var o={};return i.forEach(function(r,t){var n=r.fieldName,a=e[t],s=r.getter,u=r.getterContext,c=e[t+i.length],f=r.setter,l=r.setterContext;o[n]={read:function(e){return a.fromWireType(s(u,e))},write:function(e,r){var t=[];f(l,e,c.toWireType(t,r)),nr(t)}}}),[{name:r.name,fromWireType:function(e){var r={};for(var t in o)r[t]=o[t].read(e);return n(e),r},toWireType:function(e,r){for(var i in o)if(!(i in r))throw new TypeError("Missing field");var a=t();for(i in o)o[i].write(a,r[i]);return null!==e&&e.push(n,a),a},argPackAdvance:8,readValueFromPointer:ir,destructorFunction:n}]})}function _r(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function br(){for(var e=new Array(256),r=0;r<256;++r)e[r]=String.fromCharCode(r);Er=e}var Er=void 0;function wr(e){for(var r="",t=e;N[t];)r+=Er[N[t++]];return r}var xr=void 0;function Sr(e){throw new xr(e)}function Tr(e,r,t){if(t=t||{},!("argPackAdvance"in r))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=r.name;if(e||Sr('type "'+n+'" must have a positive integer typeid pointer'),ar.hasOwnProperty(e)){if(t.ignoreDuplicateRegistrations)return;Sr("Cannot register type '"+n+"' twice")}if(ar[e]=r,delete sr[e],or.hasOwnProperty(e)){var i=or[e];delete or[e],i.forEach(function(e){e()})}}function Pr(e,r,t,n,i){var o=_r(t);Tr(e,{name:r=wr(r),fromWireType:function(e){return!!e},toWireType:function(e,r){return r?n:i},argPackAdvance:8,readValueFromPointer:function(e){var n;if(1===t)n=O;else if(2===t)n=U;else{if(4!==t)throw new TypeError("Unknown boolean type size: "+r);n=V}return this.fromWireType(n[e>>o])},destructorFunction:null})}function Ar(e){if(!(this instanceof Ur))return!1;if(!(e instanceof Ur))return!1;for(var r=this.$$.ptrType.registeredClass,t=this.$$.ptr,n=e.$$.ptrType.registeredClass,i=e.$$.ptr;r.baseClass;)t=r.upcast(t),r=r.baseClass;for(;n.baseClass;)i=n.upcast(i),n=n.baseClass;return r===n&&t===i}function Cr(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function Dr(e){Sr(e.$$.ptrType.registeredClass.name+" instance already deleted")}function Br(){if(this.$$.ptr||Dr(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Object.create(Object.getPrototypeOf(this),{$$:{value:Cr(this.$$)}});return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function kr(e){var r=e.$$;r.smartPtr?r.smartPtrType.rawDestructor(r.smartPtr):r.ptrType.registeredClass.rawDestructor(r.ptr)}function Ir(){this.$$.ptr||Dr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Sr("Object already scheduled for deletion"),this.$$.count.value-=1,0===this.$$.count.value&&kr(this),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Mr(){return!this.$$.ptr}var Fr=void 0,Rr=[];function Lr(){for(;Rr.length;){var e=Rr.pop();e.$$.deleteScheduled=!1,e.delete()}}function Or(){return this.$$.ptr||Dr(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Sr("Object already scheduled for deletion"),Rr.push(this),1===Rr.length&&Fr&&Fr(Lr),this.$$.deleteScheduled=!0,this}function Nr(){Ur.prototype.isAliasOf=Ar,Ur.prototype.clone=Br,Ur.prototype.delete=Ir,Ur.prototype.isDeleted=Mr,Ur.prototype.deleteLater=Or}function Ur(){}var Gr={};function Vr(e,r,t){if(void 0===e[r].overloadTable){var n=e[r];e[r]=function(){return e[r].overloadTable.hasOwnProperty(arguments.length)||Sr("Function '"+t+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[r].overloadTable+")!"),e[r].overloadTable[arguments.length].apply(this,arguments)},e[r].overloadTable=[],e[r].overloadTable[n.argCount]=n}}function Wr(e,r,t){a.hasOwnProperty(e)?((void 0===t||void 0!==a[e].overloadTable&&void 0!==a[e].overloadTable[t])&&Sr("Cannot register public name '"+e+"' twice"),Vr(a,e,e),a.hasOwnProperty(t)&&Sr("Cannot register multiple overloads of a function with the same number of arguments ("+t+")!"),a[e].overloadTable[t]=r):(a[e]=r,void 0!==t&&(a[e].numArguments=t))}function $r(e,r,t,n,i,o,a,s){this.name=e,this.constructor=r,this.instancePrototype=t,this.rawDestructor=n,this.baseClass=i,this.getActualType=o,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}function jr(e,r,t){for(;r!==t;)r.upcast||Sr("Expected null or instance of "+t.name+", got an instance of "+r.name),e=r.upcast(e),r=r.baseClass;return e}function zr(e,r){if(null===r)return this.isReference&&Sr("null is not a valid "+this.name),0;r.$$||Sr('Cannot pass "'+Rt(r)+'" as a '+this.name),r.$$.ptr||Sr("Cannot pass deleted object as a pointer of type "+this.name);var t=r.$$.ptrType.registeredClass;return jr(r.$$.ptr,t,this.registeredClass)}function Hr(e,r){var t;if(null===r)return this.isReference&&Sr("null is not a valid "+this.name),this.isSmartPointer?(t=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,t),t):0;r.$$||Sr('Cannot pass "'+Rt(r)+'" as a '+this.name),r.$$.ptr||Sr("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&r.$$.ptrType.isConst&&Sr("Cannot convert argument of type "+(r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name)+" to parameter type "+this.name);var n=r.$$.ptrType.registeredClass;if(t=jr(r.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===r.$$.smartPtr&&Sr("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?t=r.$$.smartPtr:Sr("Cannot convert argument of type "+(r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:t=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)t=r.$$.smartPtr;else{var i=r.clone();t=this.rawShare(t,Dt(function(){i.delete()})),null!==e&&e.push(this.rawDestructor,t)}break;default:Sr("Unsupporting sharing policy")}return t}function qr(e,r){if(null===r)return this.isReference&&Sr("null is not a valid "+this.name),0;r.$$||Sr('Cannot pass "'+Rt(r)+'" as a '+this.name),r.$$.ptr||Sr("Cannot pass deleted object as a pointer of type "+this.name),r.$$.ptrType.isConst&&Sr("Cannot convert argument of type "+r.$$.ptrType.name+" to parameter type "+this.name);var t=r.$$.ptrType.registeredClass;return jr(r.$$.ptr,t,this.registeredClass)}function Yr(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Xr(e){this.rawDestructor&&this.rawDestructor(e)}function Qr(e){null!==e&&e.delete()}function Kr(e,r,t){if(r===t)return e;if(void 0===t.baseClass)return null;var n=Kr(e,r,t.baseClass);return null===n?null:t.downcast(n)}function Zr(){return Object.keys(tt).length}function Jr(){var e=[];for(var r in tt)tt.hasOwnProperty(r)&&e.push(tt[r]);return e}function et(e){Fr=e,Rr.length&&Fr&&Fr(Lr)}function rt(){a.getInheritedInstanceCount=Zr,a.getLiveInheritedInstances=Jr,a.flushPendingDeletes=Lr,a.setDelayFunction=et}var tt={};function nt(e,r){for(void 0===r&&Sr("ptr should not be undefined");e.baseClass;)r=e.upcast(r),e=e.baseClass;return r}function it(e,r){return r=nt(e,r),tt[r]}function ot(e,r){return r.ptrType&&r.ptr||mr("makeClassHandle requires ptr and ptrType"),!!r.smartPtrType!==!!r.smartPtr&&mr("Both smartPtrType and smartPtr must be specified"),r.count={value:1},Object.create(e,{$$:{value:r}})}function at(e){var r=this.getPointee(e);if(!r)return this.destructor(e),null;var t=it(this.registeredClass,r);if(void 0!==t){if(0===t.$$.count.value)return t.$$.ptr=r,t.$$.smartPtr=e,t.clone();var n=t.clone();return this.destructor(e),n}function i(){return this.isSmartPointer?ot(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:r,smartPtrType:this,smartPtr:e}):ot(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o,a=this.registeredClass.getActualType(r),s=Gr[a];if(!s)return i.call(this);o=this.isConst?s.constPointerType:s.pointerType;var u=Kr(r,this.registeredClass,o.registeredClass);return null===u?i.call(this):this.isSmartPointer?ot(o.registeredClass.instancePrototype,{ptrType:o,ptr:u,smartPtrType:this,smartPtr:e}):ot(o.registeredClass.instancePrototype,{ptrType:o,ptr:u})}function st(){ut.prototype.getPointee=Yr,ut.prototype.destructor=Xr,ut.prototype.argPackAdvance=8,ut.prototype.readValueFromPointer=ir,ut.prototype.deleteObject=Qr,ut.prototype.fromWireType=at}function ut(e,r,t,n,i,o,a,s,u,c,f){this.name=e,this.registeredClass=r,this.isReference=t,this.isConst=n,this.isSmartPointer=i,this.pointeeType=o,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=u,this.rawShare=c,this.rawDestructor=f,i||void 0!==r.baseClass?this.toWireType=Hr:n?(this.toWireType=zr,this.destructorFunction=null):(this.toWireType=qr,this.destructorFunction=null)}function ct(e,r,t){a.hasOwnProperty(e)||mr("Replacing nonexistant public symbol"),void 0!==a[e].overloadTable&&void 0!==t?a[e].overloadTable[t]=r:(a[e]=r,a[e].argCount=t)}function ft(e,r){var t;if(e=wr(e),void 0!==a["FUNCTION_TABLE_"+e])t=a["FUNCTION_TABLE_"+e][r];else if("undefined"!=typeof FUNCTION_TABLE)t=FUNCTION_TABLE[r];else{var n=a["dynCall_"+e];void 0===n&&void 0===(n=a["dynCall_"+e.replace(/f/g,"d")])&&Sr("No dynCall invoker for signature: "+e),t=function(t){for(var n=[],i=1;i<e.length;++i)n.push("a"+i);var o="return function "+("dynCall_"+e+"_"+r)+"("+n.join(", ")+") {\n";return o+="    return dynCall(rawFunction"+(n.length?", ":"")+n.join(", ")+");\n",o+="};\n",new Function("dynCall","rawFunction",o)(t,r)}(n)}return"function"!=typeof t&&Sr("unknown function pointer with signature "+e+": "+r),t}var lt=void 0;function dt(e){var r=$f(e),t=wr(r);return jf(r),t}function pt(e,r){var t=[],n={};throw r.forEach(function e(r){n[r]||ar[r]||(sr[r]?sr[r].forEach(e):(t.push(r),n[r]=!0))}),new lt(e+": "+t.map(dt).join([", "]))}function mt(e,r,t,n,i,o,a,s,u,c,f,l,d){f=wr(f),o=ft(i,o),s&&(s=ft(a,s)),c&&(c=ft(u,c)),d=ft(l,d);var p=fr(f);Wr(p,function(){pt("Cannot construct "+f+" due to unbound types",[n])}),hr([e,r,t],n?[n]:[],function(r){var t,i;r=r[0],i=n?(t=r.registeredClass).instancePrototype:Ur.prototype;var a=lr(p,function(){if(Object.getPrototypeOf(this)!==u)throw new xr("Use 'new' to construct "+f);if(void 0===l.constructor_body)throw new xr(f+" has no accessible constructor");var e=l.constructor_body[arguments.length];if(void 0===e)throw new xr("Tried to invoke ctor of "+f+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(l.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)}),u=Object.create(i,{constructor:{value:a}});a.prototype=u;var l=new $r(f,a,u,d,t,o,s,c),m=new ut(f,l,!0,!1,!1),h=new ut(f+"*",l,!1,!1,!1),g=new ut(f+" const*",l,!1,!0,!1);return Gr[e]={pointerType:h,constPointerType:g},ct(p,a),[m,h,g]})}function ht(e,r){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var t=lr(e.name||"unknownFunctionName",function(){});t.prototype=e.prototype;var n=new t,i=e.apply(n,r);return i instanceof Object?i:n}function gt(e,r,t,n,i){var o=r.length;o<2&&Sr("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==r[1]&&null!==t,s=!1,u=1;u<r.length;++u)if(null!==r[u]&&void 0===r[u].destructorFunction){s=!0;break}var c="void"!==r[0].name,f="",l="";for(u=0;u<o-2;++u)f+=(0!==u?", ":"")+"arg"+u,l+=(0!==u?", ":"")+"arg"+u+"Wired";var d="return function "+fr(e)+"("+f+") {\nif (arguments.length !== "+(o-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(o-2)+" args!');\n}\n";s&&(d+="var destructors = [];\n");var p=s?"destructors":"null",m=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],h=[Sr,n,i,nr,r[0],r[1]];a&&(d+="var thisWired = classParam.toWireType("+p+", this);\n");for(u=0;u<o-2;++u)d+="var arg"+u+"Wired = argType"+u+".toWireType("+p+", arg"+u+"); // "+r[u+2].name+"\n",m.push("argType"+u),h.push(r[u+2]);if(a&&(l="thisWired"+(l.length>0?", ":"")+l),d+=(c?"var rv = ":"")+"invoker(fn"+(l.length>0?", ":"")+l+");\n",s)d+="runDestructors(destructors);\n";else for(u=a?1:2;u<r.length;++u){var g=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==r[u].destructorFunction&&(d+=g+"_dtor("+g+"); // "+r[u].name+"\n",m.push(g+"_dtor"),h.push(r[u].destructorFunction))}return c&&(d+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),d+="}\n",m.push(d),ht(Function,m).apply(null,h)}function yt(e,r){for(var t=[],n=0;n<e;n++)t.push(V[(r>>2)+n]);return t}function vt(e,r,t,n,i,o,a){var s=yt(t,n);r=wr(r),o=ft(i,o),hr([],[e],function(e){var n=(e=e[0]).name+"."+r;function i(){pt("Cannot call "+n+" due to unbound types",s)}var u=e.registeredClass.constructor;return void 0===u[r]?(i.argCount=t-1,u[r]=i):(Vr(u,r,n),u[r].overloadTable[t-1]=i),hr([],s,function(e){var i=[e[0],null].concat(e.slice(1)),s=gt(n,i,null,o,a);return void 0===u[r].overloadTable?(s.argCount=t-1,u[r]=s):u[r].overloadTable[t-1]=s,[]}),[]})}function _t(e,r,t,n,i,o){var a=yt(r,t);i=ft(n,i),hr([],[e],function(e){var t="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[r-1])throw new xr("Cannot register multiple constructors with identical number of parameters ("+(r-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[r-1]=function(){pt("Cannot construct "+e.name+" due to unbound types",a)},hr([],a,function(n){return e.registeredClass.constructor_body[r-1]=function(){arguments.length!==r-1&&Sr(t+" called with "+arguments.length+" arguments, expected "+(r-1));var e=[],a=new Array(r);a[0]=o;for(var s=1;s<r;++s)a[s]=n[s].toWireType(e,arguments[s-1]);var u=i.apply(null,a);return nr(e),n[0].fromWireType(u)},[]}),[]})}function bt(e,r,t,n,i,o,a,s){var u=yt(t,n);r=wr(r),o=ft(i,o),hr([],[e],function(e){var n=(e=e[0]).name+"."+r;function i(){pt("Cannot call "+n+" due to unbound types",u)}s&&e.registeredClass.pureVirtualFunctions.push(r);var c=e.registeredClass.instancePrototype,f=c[r];return void 0===f||void 0===f.overloadTable&&f.className!==e.name&&f.argCount===t-2?(i.argCount=t-2,i.className=e.name,c[r]=i):(Vr(c,r,n),c[r].overloadTable[t-2]=i),hr([],u,function(i){var s=gt(n,i,e,o,a);return void 0===c[r].overloadTable?(s.argCount=t-2,c[r]=s):c[r].overloadTable[t-2]=s,[]}),[]})}function Et(e,r,t){return e instanceof Object||Sr(t+' with invalid "this": '+e),e instanceof r.registeredClass.constructor||Sr(t+' incompatible with "this" of type '+e.constructor.name),e.$$.ptr||Sr("cannot call emscripten binding method "+t+" on deleted object"),jr(e.$$.ptr,e.$$.ptrType.registeredClass,r.registeredClass)}function wt(e,r,t,n,i,o,a,s,u,c){r=wr(r),i=ft(n,i),hr([],[e],function(e){var n=(e=e[0]).name+"."+r,f={get:function(){pt("Cannot access "+n+" due to unbound types",[t,a])},enumerable:!0,configurable:!0};return f.set=u?function(){pt("Cannot access "+n+" due to unbound types",[t,a])}:function(e){Sr(n+" is a read-only property")},Object.defineProperty(e.registeredClass.instancePrototype,r,f),hr([],u?[t,a]:[t],function(t){var a=t[0],f={get:function(){var r=Et(this,e,n+" getter");return a.fromWireType(i(o,r))},enumerable:!0};if(u){u=ft(s,u);var l=t[1];f.set=function(r){var t=Et(this,e,n+" setter"),i=[];u(c,t,l.toWireType(i,r)),nr(i)}}return Object.defineProperty(e.registeredClass.instancePrototype,r,f),[]}),[]})}var xt=[],St=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Tt(e){e>4&&0==--St[e].refcount&&(St[e]=void 0,xt.push(e))}function Pt(){for(var e=0,r=5;r<St.length;++r)void 0!==St[r]&&++e;return e}function At(){for(var e=5;e<St.length;++e)if(void 0!==St[e])return St[e];return null}function Ct(){a.count_emval_handles=Pt,a.get_first_emval=At}function Dt(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var r=xt.length?xt.pop():St.length;return St[r]={refcount:1,value:e},r}}function Bt(e,r){Tr(e,{name:r=wr(r),fromWireType:function(e){var r=St[e].value;return Tt(e),r},toWireType:function(e,r){return Dt(r)},argPackAdvance:8,readValueFromPointer:ir,destructorFunction:null})}function kt(e,r,t){switch(r){case 0:return function(e){var r=t?O:N;return this.fromWireType(r[e])};case 1:return function(e){var r=t?U:G;return this.fromWireType(r[e>>1])};case 2:return function(e){var r=t?V:W;return this.fromWireType(r[e>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function It(e,r,t,n){var i=_r(t);function o(){}r=wr(r),o.values={},Tr(e,{name:r,constructor:o,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,r){return r.value},argPackAdvance:8,readValueFromPointer:kt(r,i,n),destructorFunction:null}),Wr(r,o)}function Mt(e,r){var t=ar[e];return void 0===t&&Sr(r+" has unknown type "+dt(e)),t}function Ft(e,r,t){var n=Mt(e,"enum");r=wr(r);var i=n.constructor,o=Object.create(n.constructor.prototype,{value:{value:t},constructor:{value:lr(n.name+"_"+r,function(){})}});i.values[t]=o,i[r]=o}function Rt(e){if(null===e)return"null";var r=typeof e;return"object"===r||"array"===r||"function"===r?e.toString():""+e}function Lt(e,r){switch(r){case 2:return function(e){return this.fromWireType($[e>>2])};case 3:return function(e){return this.fromWireType(j[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Ot(e,r,t){var n=_r(t);Tr(e,{name:r=wr(r),fromWireType:function(e){return e},toWireType:function(e,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError('Cannot convert "'+Rt(r)+'" to '+this.name);return r},argPackAdvance:8,readValueFromPointer:Lt(r,n),destructorFunction:null})}function Nt(e,r,t,n,i,o){var a=yt(r,t);e=wr(e),i=ft(n,i),Wr(e,function(){pt("Cannot call "+e+" due to unbound types",a)},r-1),hr([],a,function(t){var n=[t[0],null].concat(t.slice(1));return ct(e,gt(e,n,null,i,o),r-1),[]})}function Ut(e,r,t){switch(r){case 0:return t?function(e){return O[e]}:function(e){return N[e]};case 1:return t?function(e){return U[e>>1]}:function(e){return G[e>>1]};case 2:return t?function(e){return V[e>>2]}:function(e){return W[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Gt(e,r,t,n,i){r=wr(r),-1===i&&(i=4294967295);var o=_r(t),a=function(e){return e};if(0===n){var s=32-8*t;a=function(e){return e<<s>>>s}}var u=-1!=r.indexOf("unsigned");Tr(e,{name:r,fromWireType:a,toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+Rt(t)+'" to '+this.name);if(t<n||t>i)throw new TypeError('Passing a number "'+Rt(t)+'" from JS side to C/C++ side to an argument of type "'+r+'", which is outside the valid range ['+n+", "+i+"]!");return u?t>>>0:0|t},argPackAdvance:8,readValueFromPointer:Ut(r,o,0!==n),destructorFunction:null})}function Vt(e,r,t){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][r];function i(e){var r=W,t=r[e>>=2],i=r[e+1];return new n(r.buffer,i,t)}Tr(e,{name:t=wr(t),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})}function Wt(e,r){var t="std::string"===(r=wr(r));Tr(e,{name:r,fromWireType:function(e){var r,n=W[e>>2];if(t){var i=N[e+4+n],o=0;0!=i&&(o=i,N[e+4+n]=0);for(var a=e+4,s=0;s<=n;++s){var u=e+4+s;if(0==N[u]){var c=C(a);void 0===r?r=c:(r+=String.fromCharCode(0),r+=c),a=u+1}}0!=o&&(N[e+4+n]=o)}else{var f=new Array(n);for(s=0;s<n;++s)f[s]=String.fromCharCode(N[e+4+s]);r=f.join("")}return jf(e),r},toWireType:function(e,r){r instanceof ArrayBuffer&&(r=new Uint8Array(r));var n="string"==typeof r;n||r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Int8Array||Sr("Cannot pass non-string to std::string");var i=(t&&n?function(){return k(r)}:function(){return r.length})(),o=Hf(4+i+1);if(W[o>>2]=i,t&&n)B(r,o+4,i+1);else if(n)for(var a=0;a<i;++a){var s=r.charCodeAt(a);s>255&&(jf(o),Sr("String has UTF-16 code units that do not fit in 8 bits")),N[o+4+a]=s}else for(a=0;a<i;++a)N[o+4+a]=r[a];return null!==e&&e.push(jf,o),o},argPackAdvance:8,readValueFromPointer:ir,destructorFunction:function(e){jf(e)}})}function $t(e,r,t){var n,i;t=wr(t),2===r?(n=function(){return G},i=1):4===r&&(n=function(){return W},i=2),Tr(e,{name:t,fromWireType:function(e){for(var r=n(),t=W[e>>2],o=new Array(t),a=e+4>>i,s=0;s<t;++s)o[s]=String.fromCharCode(r[a+s]);return jf(e),o.join("")},toWireType:function(e,t){var o=n(),a=t.length,s=Hf(4+a*r);W[s>>2]=a;for(var u=s+4>>i,c=0;c<a;++c)o[u+c]=t.charCodeAt(c);return null!==e&&e.push(jf,s),s},argPackAdvance:8,readValueFromPointer:ir,destructorFunction:function(e){jf(e)}})}function jt(e,r,t,n,i,o){tr[e]={name:wr(r),rawConstructor:ft(t,n),rawDestructor:ft(i,o),elements:[]}}function zt(e,r,t,n,i,o,a,s,u){tr[e].elements.push({getterReturnType:r,getter:ft(t,n),getterContext:i,setterArgumentType:o,setter:ft(a,s),setterContext:u})}function Ht(e,r,t,n,i,o){yr[e]={name:wr(r),rawConstructor:ft(t,n),rawDestructor:ft(i,o),fields:[]}}function qt(e,r,t,n,i,o,a,s,u,c){yr[e].fields.push({fieldName:wr(r),getterReturnType:t,getter:ft(n,i),getterContext:o,setterArgumentType:a,setter:ft(s,u),setterContext:c})}function Yt(e,r){Tr(e,{isVoid:!0,name:r=wr(r),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,r){}})}function Xt(e){return e||Sr("Cannot use deleted val. handle = "+e),St[e].value}function Qt(e,r,t){e=Xt(e),r=Mt(r,"emval::as");var n=[],i=Dt(n);return V[t>>2]=i,r.toWireType(n,e)}function Kt(e,r){return Dt((e=Xt(e))[r=Xt(r)])}function Zt(e){e>4&&(St[e].refcount+=1)}var Jt={};function en(e){var r=Jt[e];return void 0===r?wr(e):r}function rn(e){return Dt(en(e))}function tn(e){nr(St[e].value),Tt(e)}function nn(e,r){return Dt((e=Mt(e,"_emval_take_value")).readValueFromPointer(r))}function on(){a.abort()}function an(){Qf()}function sn(){return f||"undefined"!=typeof dateNow||(u||c)&&self.performance&&self.performance.now}function un(e,r){var t;if(0===e)t=Date.now();else{if(1!==e||!sn())return Ue(22),-1;t=an()}return V[r>>2]=t/1e3|0,V[r+4>>2]=t%1e3*1e3*1e3|0,0}function cn(){return J}var fn={counter:1,lastError:0,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},currentContext:null,offscreenCanvases:{},timerQueriesEXT:[],queries:[],samplers:[],transformFeedbacks:[],syncs:[],programInfos:{},stringCache:{},stringiCache:{},unpackAlignment:4,init:function(){fn.miniTempBuffer=new Float32Array(fn.MINI_TEMP_BUFFER_SIZE);for(var e=0;e<fn.MINI_TEMP_BUFFER_SIZE;e++)fn.miniTempBufferViews[e]=fn.miniTempBuffer.subarray(0,e+1)},recordError:function(e){fn.lastError||(fn.lastError=e)},getNewId:function(e){for(var r=fn.counter++,t=e.length;t<r;t++)e[t]=null;return r},MINI_TEMP_BUFFER_SIZE:256,miniTempBuffer:null,miniTempBufferViews:[0],getSource:function(e,r,t,n){for(var i="",o=0;o<r;++o){var a=n?V[n+4*o>>2]:-1;i+=C(V[t+4*o>>2],a<0?void 0:a)}return i},createContext:function(e,r){var t=r.majorVersion>1?e.getContext("webgl2",r):e.getContext("webgl",r)||e.getContext("experimental-webgl",r);return t&&fn.registerContext(t,r)},registerContext:function(e,r){var t=Hf(8),n={handle:t,attributes:r,version:r.majorVersion,GLctx:e};function i(){var e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return!!e&&parseInt(e[2],10)}return n.supportsWebGL2EntryPoints=n.version>=2&&(!1===i()||i()>=58),e.canvas&&(e.canvas.GLctxObject=n),fn.contexts[t]=n,(void 0===r.enableExtensionsByDefault||r.enableExtensionsByDefault)&&fn.initExtensions(n),t},makeContextCurrent:function(e){return fn.currentContext=fn.contexts[e],a.ctx=Qa=fn.currentContext&&fn.currentContext.GLctx,!(e&&!Qa)},getContext:function(e){return fn.contexts[e]},deleteContext:function(e){fn.currentContext===fn.contexts[e]&&(fn.currentContext=null),"object"==typeof JSEvents&&JSEvents.removeAllHandlersOnTarget(fn.contexts[e].GLctx.canvas),fn.contexts[e]&&fn.contexts[e].GLctx.canvas&&(fn.contexts[e].GLctx.canvas.GLctxObject=void 0),jf(fn.contexts[e]),fn.contexts[e]=null},initExtensions:function(e){if(e||(e=fn.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var r=e.GLctx;if(e.version<2){var t=r.getExtension("ANGLE_instanced_arrays");t&&(r.vertexAttribDivisor=function(e,r){t.vertexAttribDivisorANGLE(e,r)},r.drawArraysInstanced=function(e,r,n,i){t.drawArraysInstancedANGLE(e,r,n,i)},r.drawElementsInstanced=function(e,r,n,i,o){t.drawElementsInstancedANGLE(e,r,n,i,o)});var n=r.getExtension("OES_vertex_array_object");n&&(r.createVertexArray=function(){return n.createVertexArrayOES()},r.deleteVertexArray=function(e){n.deleteVertexArrayOES(e)},r.bindVertexArray=function(e){n.bindVertexArrayOES(e)},r.isVertexArray=function(e){return n.isVertexArrayOES(e)});var i=r.getExtension("WEBGL_draw_buffers");i&&(r.drawBuffers=function(e,r){i.drawBuffersWEBGL(e,r)})}r.disjointTimerQueryExt=r.getExtension("EXT_disjoint_timer_query");var o=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2"],a=r.getSupportedExtensions();a&&a.length>0&&r.getSupportedExtensions().forEach(function(e){-1!=o.indexOf(e)&&r.getExtension(e)})}},populateUniformTable:function(e){for(var r=fn.programs[e],t=fn.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},n=t.uniforms,i=Qa.getProgramParameter(r,35718),o=0;o<i;++o){var a=Qa.getActiveUniform(r,o),s=a.name;t.maxUniformLength=Math.max(t.maxUniformLength,s.length+1),"]"==s.slice(-1)&&(s=s.slice(0,s.lastIndexOf("[")));var u=Qa.getUniformLocation(r,s);if(u){var c=fn.getNewId(fn.uniforms);n[s]=[a.size,c],fn.uniforms[c]=u;for(var f=1;f<a.size;++f){var l=s+"["+f+"]";u=Qa.getUniformLocation(r,l),c=fn.getNewId(fn.uniforms),fn.uniforms[c]=u}}}}};function ln(e){Qa.activeTexture(e)}function dn(e,r){Qa.attachShader(fn.programs[e],fn.shaders[r])}function pn(e,r){Qa.beginQuery(e,fn.queries[r])}function mn(e,r){Qa.disjointTimerQueryExt.beginQueryEXT(e,fn.timerQueriesEXT[r])}function hn(e){Qa.beginTransformFeedback(e)}function gn(e,r,t){Qa.bindAttribLocation(fn.programs[e],r,C(t))}function yn(e,r){35051==e?Qa.currentPixelPackBufferBinding=r:35052==e&&(Qa.currentPixelUnpackBufferBinding=r),Qa.bindBuffer(e,fn.buffers[r])}function vn(e,r,t){Qa.bindBufferBase(e,r,fn.buffers[t])}function _n(e,r,t,n,i){Qa.bindBufferRange(e,r,fn.buffers[t],n,i)}function bn(e,r){Qa.bindFramebuffer(e,fn.framebuffers[r])}function En(e,r){Qa.bindRenderbuffer(e,fn.renderbuffers[r])}function wn(e,r){Qa.bindSampler(e,fn.samplers[r])}function xn(e,r){Qa.bindTexture(e,fn.textures[r])}function Sn(e,r){Qa.bindTransformFeedback(e,fn.transformFeedbacks[r])}function Tn(e){Qa.bindVertexArray(fn.vaos[e])}function Pn(e){Qa.bindVertexArray(fn.vaos[e])}function An(e,r,t,n){Qa.blendColor(e,r,t,n)}function Cn(e){Qa.blendEquation(e)}function Dn(e,r){Qa.blendEquationSeparate(e,r)}function Bn(e,r){Qa.blendFunc(e,r)}function kn(e,r,t,n){Qa.blendFuncSeparate(e,r,t,n)}function In(e,r,t,n,i,o,a,s,u,c){Qa.blitFramebuffer(e,r,t,n,i,o,a,s,u,c)}function Mn(e,r,t,n){fn.currentContext.supportsWebGL2EntryPoints?t?Qa.bufferData(e,N,n,t,r):Qa.bufferData(e,r,n):Qa.bufferData(e,t?N.subarray(t,t+r):r,n)}function Fn(e,r,t,n){fn.currentContext.supportsWebGL2EntryPoints?Qa.bufferSubData(e,r,N,n,t):Qa.bufferSubData(e,r,N.subarray(n,n+t))}function Rn(e){return Qa.checkFramebufferStatus(e)}function Ln(e){Qa.clear(e)}function On(e,r,t,n){Qa.clearBufferfi(e,r,t,n)}function Nn(e,r,t){Qa.clearBufferfv(e,r,$,t>>2)}function Un(e,r,t){Qa.clearBufferiv(e,r,V,t>>2)}function Gn(e,r,t){Qa.clearBufferuiv(e,r,W,t>>2)}function Vn(e,r,t,n){Qa.clearColor(e,r,t,n)}function Wn(e){Qa.clearDepth(e)}function $n(e){Qa.clearStencil(e)}function jn(e,r,t,n){n>>>=0;var i=4294967295==(t>>>=0)&&4294967295==n?-1:_(t,n,!0);return Qa.clientWaitSync(fn.syncs[e],r,i)}function zn(e,r,t,n){Qa.colorMask(!!e,!!r,!!t,!!n)}function Hn(e){Qa.compileShader(fn.shaders[e])}function qn(e,r,t,n,i,o,a,s){fn.currentContext.supportsWebGL2EntryPoints?Qa.currentPixelUnpackBufferBinding?Qa.compressedTexImage2D(e,r,t,n,i,o,a,s):Qa.compressedTexImage2D(e,r,t,n,i,o,N,s,a):Qa.compressedTexImage2D(e,r,t,n,i,o,s?N.subarray(s,s+a):null)}function Yn(e,r,t,n,i,o,a,s,u){fn.currentContext.supportsWebGL2EntryPoints?Qa.currentPixelUnpackBufferBinding?Qa.compressedTexImage3D(e,r,t,n,i,o,a,s,u):Qa.compressedTexImage3D(e,r,t,n,i,o,a,N,u,s):Qa.compressedTexImage3D(e,r,t,n,i,o,a,u?N.subarray(u,u+s):null)}function Xn(e,r,t,n,i,o,a,s,u){fn.currentContext.supportsWebGL2EntryPoints?Qa.currentPixelUnpackBufferBinding?Qa.compressedTexSubImage2D(e,r,t,n,i,o,a,s,u):Qa.compressedTexSubImage2D(e,r,t,n,i,o,a,N,u,s):Qa.compressedTexSubImage2D(e,r,t,n,i,o,a,u?N.subarray(u,u+s):null)}function Qn(e,r,t,n,i,o,a,s,u,c,f){fn.currentContext.supportsWebGL2EntryPoints?Qa.currentPixelUnpackBufferBinding?Qa.compressedTexSubImage3D(e,r,t,n,i,o,a,s,u,c,f):Qa.compressedTexSubImage3D(e,r,t,n,i,o,a,s,u,N,f,c):Qa.compressedTexSubImage3D(e,r,t,n,i,o,a,s,u,f?N.subarray(f,f+c):null)}function Kn(e,r,t,n,i){Qa.copyBufferSubData(e,r,t,n,i)}function Zn(e,r,t,n,i,o,a,s){Qa.copyTexImage2D(e,r,t,n,i,o,a,s)}function Jn(e,r,t,n,i,o,a,s){Qa.copyTexSubImage2D(e,r,t,n,i,o,a,s)}function ei(e,r,t,n,i,o,a,s,u){Qa.copyTexSubImage3D(e,r,t,n,i,o,a,s,u)}function ri(){var e=fn.getNewId(fn.programs),r=Qa.createProgram();return r.name=e,fn.programs[e]=r,e}function ti(e){var r=fn.getNewId(fn.shaders);return fn.shaders[r]=Qa.createShader(e),r}function ni(e){Qa.cullFace(e)}function ii(e,r){for(var t=0;t<e;t++){var n=V[r+4*t>>2],i=fn.buffers[n];i&&(Qa.deleteBuffer(i),i.name=0,fn.buffers[n]=null,n==fn.currArrayBuffer&&(fn.currArrayBuffer=0),n==fn.currElementArrayBuffer&&(fn.currElementArrayBuffer=0),n==Qa.currentPixelPackBufferBinding&&(Qa.currentPixelPackBufferBinding=0),n==Qa.currentPixelUnpackBufferBinding&&(Qa.currentPixelUnpackBufferBinding=0))}}function oi(e,r){for(var t=0;t<e;++t){var n=V[r+4*t>>2],i=fn.framebuffers[n];i&&(Qa.deleteFramebuffer(i),i.name=0,fn.framebuffers[n]=null)}}function ai(e){if(e){var r=fn.programs[e];r?(Qa.deleteProgram(r),r.name=0,fn.programs[e]=null,fn.programInfos[e]=null):fn.recordError(1281)}}function si(e,r){for(var t=0;t<e;t++){var n=V[r+4*t>>2],i=fn.queries[n];i&&(Qa.deleteQuery(i),fn.queries[n]=null)}}function ui(e,r){for(var t=0;t<e;t++){var n=V[r+4*t>>2],i=fn.timerQueriesEXT[n];i&&(Qa.disjointTimerQueryExt.deleteQueryEXT(i),fn.timerQueriesEXT[n]=null)}}function ci(e,r){for(var t=0;t<e;t++){var n=V[r+4*t>>2],i=fn.renderbuffers[n];i&&(Qa.deleteRenderbuffer(i),i.name=0,fn.renderbuffers[n]=null)}}function fi(e,r){for(var t=0;t<e;t++){var n=V[r+4*t>>2],i=fn.samplers[n];i&&(Qa.deleteSampler(i),i.name=0,fn.samplers[n]=null)}}function li(e){if(e){var r=fn.shaders[e];r?(Qa.deleteShader(r),fn.shaders[e]=null):fn.recordError(1281)}}function di(e){if(e){var r=fn.syncs[e];r?(Qa.deleteSync(r),r.name=0,fn.syncs[e]=null):fn.recordError(1281)}}function pi(e,r){for(var t=0;t<e;t++){var n=V[r+4*t>>2],i=fn.textures[n];i&&(Qa.deleteTexture(i),i.name=0,fn.textures[n]=null)}}function mi(e,r){for(var t=0;t<e;t++){var n=V[r+4*t>>2],i=fn.transformFeedbacks[n];i&&(Qa.deleteTransformFeedback(i),i.name=0,fn.transformFeedbacks[n]=null)}}function hi(e,r){for(var t=0;t<e;t++){var n=V[r+4*t>>2];Qa.deleteVertexArray(fn.vaos[n]),fn.vaos[n]=null}}function gi(e,r){for(var t=0;t<e;t++){var n=V[r+4*t>>2];Qa.deleteVertexArray(fn.vaos[n]),fn.vaos[n]=null}}function yi(e){Qa.depthFunc(e)}function vi(e){Qa.depthMask(!!e)}function _i(e,r){Qa.depthRange(e,r)}function bi(e,r){Qa.detachShader(fn.programs[e],fn.shaders[r])}function Ei(e){Qa.disable(e)}function wi(e){Qa.disableVertexAttribArray(e)}function xi(e,r,t){Qa.drawArrays(e,r,t)}function Si(e,r,t,n){Qa.drawArraysInstanced(e,r,t,n)}function Ti(e,r,t,n){Qa.drawArraysInstanced(e,r,t,n)}function Pi(e,r,t,n){Qa.drawArraysInstanced(e,r,t,n)}function Ai(e,r,t,n){Qa.drawArraysInstanced(e,r,t,n)}function Ci(e,r,t,n){Qa.drawArraysInstanced(e,r,t,n)}var Di=[];function Bi(e,r){for(var t=Di[e],n=0;n<e;n++)t[n]=V[r+4*n>>2];Qa.drawBuffers(t)}function ki(e,r){for(var t=Di[e],n=0;n<e;n++)t[n]=V[r+4*n>>2];Qa.drawBuffers(t)}function Ii(e,r){for(var t=Di[e],n=0;n<e;n++)t[n]=V[r+4*n>>2];Qa.drawBuffers(t)}function Mi(e,r,t,n){Qa.drawElements(e,r,t,n)}function Fi(e,r,t,n,i){Qa.drawElementsInstanced(e,r,t,n,i)}function Ri(e,r,t,n,i){Qa.drawElementsInstanced(e,r,t,n,i)}function Li(e,r,t,n,i){Qa.drawElementsInstanced(e,r,t,n,i)}function Oi(e,r,t,n,i){Qa.drawElementsInstanced(e,r,t,n,i)}function Ni(e,r,t,n,i){Qa.drawElementsInstanced(e,r,t,n,i)}function Ui(e,r,t,n){Qa.drawElements(e,r,t,n)}function Gi(e,r,t,n,i,o){Ui(e,n,i,o)}function Vi(e){Qa.enable(e)}function Wi(e){Qa.enableVertexAttribArray(e)}function $i(e){Qa.endQuery(e)}function ji(e){Qa.disjointTimerQueryExt.endQueryEXT(e)}function zi(){Qa.endTransformFeedback()}function Hi(e,r){var t=Qa.fenceSync(e,r);if(t){var n=fn.getNewId(fn.syncs);return t.name=n,fn.syncs[n]=t,n}return 0}function qi(){Qa.finish()}function Yi(){Qa.flush()}function Xi(){y("missing function: emscripten_glFlushMappedBufferRange"),Qf(-1)}function Qi(e,r,t,n){Qa.framebufferRenderbuffer(e,r,t,fn.renderbuffers[n])}function Ki(e,r,t,n,i){Qa.framebufferTexture2D(e,r,t,fn.textures[n],i)}function Zi(e,r,t,n,i){Qa.framebufferTextureLayer(e,r,fn.textures[t],n,i)}function Ji(e){Qa.frontFace(e)}function eo(e,r,t,n){for(var i=0;i<e;i++){var o=Qa[t](),a=o&&fn.getNewId(n);o?(o.name=a,n[a]=o):fn.recordError(1282),V[r+4*i>>2]=a}}function ro(e,r){eo(e,r,"createBuffer",fn.buffers)}function to(e,r){eo(e,r,"createFramebuffer",fn.framebuffers)}function no(e,r){eo(e,r,"createQuery",fn.queries)}function io(e,r){for(var t=0;t<e;t++){var n=Qa.disjointTimerQueryExt.createQueryEXT();if(!n){for(fn.recordError(1282);t<e;)V[r+4*t++>>2]=0;return}var i=fn.getNewId(fn.timerQueriesEXT);n.name=i,fn.timerQueriesEXT[i]=n,V[r+4*t>>2]=i}}function oo(e,r){eo(e,r,"createRenderbuffer",fn.renderbuffers)}function ao(e,r){eo(e,r,"createSampler",fn.samplers)}function so(e,r){eo(e,r,"createTexture",fn.textures)}function uo(e,r){eo(e,r,"createTransformFeedback",fn.transformFeedbacks)}function co(e,r){eo(e,r,"createVertexArray",fn.vaos)}function fo(e,r){eo(e,r,"createVertexArray",fn.vaos)}function lo(e){Qa.generateMipmap(e)}function po(e,r,t,n,i,o,a){e=fn.programs[e];var s=Qa.getActiveAttrib(e,r);if(s){if(t>0&&a){var u=B(s.name,a,t);n&&(V[n>>2]=u)}else n&&(V[n>>2]=0);i&&(V[i>>2]=s.size),o&&(V[o>>2]=s.type)}}function mo(e,r,t,n,i,o,a){e=fn.programs[e];var s=Qa.getActiveUniform(e,r);if(s){if(t>0&&a){var u=B(s.name,a,t);n&&(V[n>>2]=u)}else n&&(V[n>>2]=0);i&&(V[i>>2]=s.size),o&&(V[o>>2]=s.type)}}function ho(e,r,t,n,i){e=fn.programs[e];var o=Qa.getActiveUniformBlockName(e,r);if(o)if(i&&t>0){var a=B(o,i,t);n&&(V[n>>2]=a)}else n&&(V[n>>2]=0)}function go(e,r,t,n){if(n)switch(e=fn.programs[e],t){case 35393:var i=Qa.getActiveUniformBlockName(e,r);return void(V[n>>2]=i.length+1);default:var o=Qa.getActiveUniformBlockParameter(e,r,t);if(!o)return;if("number"==typeof o)V[n>>2]=o;else for(var a=0;a<o.length;a++)V[n+4*a>>2]=o[a]}else fn.recordError(1281)}function yo(e,r,t,n,i){if(i)if(r>0&&0==t)fn.recordError(1281);else{e=fn.programs[e];for(var o=[],a=0;a<r;a++)o.push(V[t+4*a>>2]);var s=Qa.getActiveUniforms(e,o,n);if(s){var u=s.length;for(a=0;a<u;a++)V[i+4*a>>2]=s[a]}}else fn.recordError(1281)}function vo(e,r,t,n){var i=Qa.getAttachedShaders(fn.programs[e]),o=i.length;o>r&&(o=r),V[t>>2]=o;for(var a=0;a<o;++a){var s=fn.shaders.indexOf(i[a]);V[n+4*a>>2]=s}}function _o(e,r){return Qa.getAttribLocation(fn.programs[e],C(r))}function bo(e,r,t){if(r){var n=void 0;switch(e){case 36346:n=1;break;case 36344:return void("Integer"!==t&&"Integer64"!==t&&fn.recordError(1280));case 34814:case 36345:n=0;break;case 34466:var i=Qa.getParameter(34467);n=i?i.length:0;break;case 33309:if(fn.currentContext.version<2)return void fn.recordError(1282);n=2*Qa.getSupportedExtensions().length;break;case 33307:case 33308:if(fn.currentContext.version<2)return void fn.recordError(1280);n=33307==e?3:0}if(void 0===n){var o=Qa.getParameter(e);switch(typeof o){case"number":n=o;break;case"boolean":n=o?1:0;break;case"string":return void fn.recordError(1280);case"object":if(null===o)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 35097:case 36389:case 34068:n=0;break;default:return void fn.recordError(1280)}else{if(o instanceof Float32Array||o instanceof Uint32Array||o instanceof Int32Array||o instanceof Array){for(var a=0;a<o.length;++a)switch(t){case"Integer":V[r+4*a>>2]=o[a];break;case"Float":$[r+4*a>>2]=o[a];break;case"Boolean":O[r+a>>0]=o[a]?1:0;break;default:throw"internal glGet error, bad type: "+t}return}try{n=0|o.name}catch(r){return fn.recordError(1280),void y("GL_INVALID_ENUM in glGet"+t+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+r+")")}}break;default:return void fn.recordError(1280)}}switch(t){case"Integer64":tempI64=[n>>>0,(tempDouble=n,+de(tempDouble)>=1?tempDouble>0?(0|he(+me(tempDouble/4294967296),4294967295))>>>0:~~+pe((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],V[r>>2]=tempI64[0],V[r+4>>2]=tempI64[1];break;case"Integer":V[r>>2]=n;break;case"Float":$[r>>2]=n;break;case"Boolean":O[r>>0]=n?1:0;break;default:throw"internal glGet error, bad type: "+t}}else fn.recordError(1281)}function Eo(e,r){bo(e,r,"Boolean")}function wo(e,r,t){t?(tempI64=[Qa.getBufferParameter(e,r)>>>0,(tempDouble=Qa.getBufferParameter(e,r),+de(tempDouble)>=1?tempDouble>0?(0|he(+me(tempDouble/4294967296),4294967295))>>>0:~~+pe((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],V[t>>2]=tempI64[0],V[t+4>>2]=tempI64[1]):fn.recordError(1281)}function xo(e,r,t){t?V[t>>2]=Qa.getBufferParameter(e,r):fn.recordError(1281)}function So(){y("missing function: emscripten_glGetBufferPointerv"),Qf(-1)}function To(){if(fn.lastError){var e=fn.lastError;return fn.lastError=0,e}return Qa.getError()}function Po(e,r){bo(e,r,"Float")}function Ao(e,r){return Qa.getFragDataLocation(fn.programs[e],C(r))}function Co(e,r,t,n){var i=Qa.getFramebufferAttachmentParameter(e,r,t);(i instanceof WebGLRenderbuffer||i instanceof WebGLTexture)&&(i=0|i.name),V[n>>2]=i}function Do(e,r,t,n){if(t){var i,o=Qa.getIndexedParameter(e,r);switch(typeof o){case"boolean":i=o?1:0;break;case"number":i=o;break;case"object":if(null===o)switch(e){case 35983:case 35368:i=0;break;default:return void fn.recordError(1280)}else{if(!(o instanceof WebGLBuffer))return void fn.recordError(1280);i=0|o.name}break;default:return void fn.recordError(1280)}switch(n){case"Integer64":tempI64=[i>>>0,(tempDouble=i,+de(tempDouble)>=1?tempDouble>0?(0|he(+me(tempDouble/4294967296),4294967295))>>>0:~~+pe((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],V[t>>2]=tempI64[0],V[t+4>>2]=tempI64[1];break;case"Integer":V[t>>2]=i;break;case"Float":$[t>>2]=i;break;case"Boolean":O[t>>0]=i?1:0;break;default:throw"internal emscriptenWebGLGetIndexed() error, bad type: "+n}}else fn.recordError(1281)}function Bo(e,r,t){Do(e,r,t,"Integer64")}function ko(e,r){bo(e,r,"Integer64")}function Io(e,r,t){Do(e,r,t,"Integer")}function Mo(e,r){bo(e,r,"Integer")}function Fo(){y("missing function: emscripten_glGetInternalformativ"),Qf(-1)}function Ro(e,r,t,n,i){fn.recordError(1282)}function Lo(e,r,t,n){var i=Qa.getProgramInfoLog(fn.programs[e]);if(null===i&&(i="(unknown error)"),r>0&&n){var o=B(i,n,r);t&&(V[t>>2]=o)}else t&&(V[t>>2]=0)}function Oo(e,r,t){if(t)if(e>=fn.counter)fn.recordError(1281);else{var n=fn.programInfos[e];if(n)if(35716==r){var i=Qa.getProgramInfoLog(fn.programs[e]);null===i&&(i="(unknown error)"),V[t>>2]=i.length+1}else if(35719==r)V[t>>2]=n.maxUniformLength;else if(35722==r){if(-1==n.maxAttributeLength){e=fn.programs[e];var o=Qa.getProgramParameter(e,35721);n.maxAttributeLength=0;for(var a=0;a<o;++a){var s=Qa.getActiveAttrib(e,a);n.maxAttributeLength=Math.max(n.maxAttributeLength,s.name.length+1)}}V[t>>2]=n.maxAttributeLength}else if(35381==r){if(-1==n.maxUniformBlockNameLength){e=fn.programs[e];var u=Qa.getProgramParameter(e,35382);n.maxUniformBlockNameLength=0;for(a=0;a<u;++a){var c=Qa.getActiveUniformBlockName(e,a);n.maxUniformBlockNameLength=Math.max(n.maxUniformBlockNameLength,c.length+1)}}V[t>>2]=n.maxUniformBlockNameLength}else V[t>>2]=Qa.getProgramParameter(fn.programs[e],r);else fn.recordError(1282)}else fn.recordError(1281)}function No(e,r,t){if(t){var n,i=fn.timerQueriesEXT[e],o=Qa.disjointTimerQueryExt.getQueryObjectEXT(i,r);n="boolean"==typeof o?o?1:0:o,tempI64=[n>>>0,(tempDouble=n,+de(tempDouble)>=1?tempDouble>0?(0|he(+me(tempDouble/4294967296),4294967295))>>>0:~~+pe((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],V[t>>2]=tempI64[0],V[t+4>>2]=tempI64[1]}else fn.recordError(1281)}function Uo(e,r,t){if(t){var n,i=fn.timerQueriesEXT[e],o=Qa.disjointTimerQueryExt.getQueryObjectEXT(i,r);n="boolean"==typeof o?o?1:0:o,V[t>>2]=n}else fn.recordError(1281)}function Go(e,r,t){if(t){var n,i=fn.timerQueriesEXT[e],o=Qa.disjointTimerQueryExt.getQueryObjectEXT(i,r);n="boolean"==typeof o?o?1:0:o,tempI64=[n>>>0,(tempDouble=n,+de(tempDouble)>=1?tempDouble>0?(0|he(+me(tempDouble/4294967296),4294967295))>>>0:~~+pe((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],V[t>>2]=tempI64[0],V[t+4>>2]=tempI64[1]}else fn.recordError(1281)}function Vo(e,r,t){if(t){var n,i=fn.queries[e],o=Qa.getQueryParameter(i,r);n="boolean"==typeof o?o?1:0:o,V[t>>2]=n}else fn.recordError(1281)}function Wo(e,r,t){if(t){var n,i=fn.timerQueriesEXT[e],o=Qa.disjointTimerQueryExt.getQueryObjectEXT(i,r);n="boolean"==typeof o?o?1:0:o,V[t>>2]=n}else fn.recordError(1281)}function $o(e,r,t){t?V[t>>2]=Qa.getQuery(e,r):fn.recordError(1281)}function jo(e,r,t){t?V[t>>2]=Qa.disjointTimerQueryExt.getQueryEXT(e,r):fn.recordError(1281)}function zo(e,r,t){t?V[t>>2]=Qa.getRenderbufferParameter(e,r):fn.recordError(1281)}function Ho(e,r,t){t?(e=fn.samplers[e],$[t>>2]=Qa.getSamplerParameter(e,r)):fn.recordError(1281)}function qo(e,r,t){t?(e=fn.samplers[e],V[t>>2]=Qa.getSamplerParameter(e,r)):fn.recordError(1281)}function Yo(e,r,t,n){var i=Qa.getShaderInfoLog(fn.shaders[e]);if(null===i&&(i="(unknown error)"),r>0&&n){var o=B(i,n,r);t&&(V[t>>2]=o)}else t&&(V[t>>2]=0)}function Xo(e,r,t,n){var i=Qa.getShaderPrecisionFormat(e,r);V[t>>2]=i.rangeMin,V[t+4>>2]=i.rangeMax,V[n>>2]=i.precision}function Qo(e,r,t,n){var i=Qa.getShaderSource(fn.shaders[e]);if(i)if(r>0&&n){var o=B(i,n,r);t&&(V[t>>2]=o)}else t&&(V[t>>2]=0)}function Ko(e,r,t){if(t)if(35716==r){var n=Qa.getShaderInfoLog(fn.shaders[e]);null===n&&(n="(unknown error)"),V[t>>2]=n.length+1}else if(35720==r){var i=Qa.getShaderSource(fn.shaders[e]),o=null===i||0==i.length?0:i.length+1;V[t>>2]=o}else V[t>>2]=Qa.getShaderParameter(fn.shaders[e],r);else fn.recordError(1281)}function Zo(e){var r=k(e)+1,t=Hf(r);return B(e,t,r),t}function Jo(e){if(fn.stringCache[e])return fn.stringCache[e];var r;switch(e){case 7939:for(var t=Qa.getSupportedExtensions(),n=[],i=0;i<t.length;++i)n.push(t[i]),n.push("GL_"+t[i]);r=Zo(n.join(" "));break;case 7936:case 7937:case 37445:case 37446:var o=Qa.getParameter(e);o||fn.recordError(1280),r=Zo(o);break;case 7938:var a=Qa.getParameter(Qa.VERSION);r=Zo(a=fn.currentContext.version>=2?"OpenGL ES 3.0 ("+a+")":"OpenGL ES 2.0 ("+a+")");break;case 35724:var s=Qa.getParameter(Qa.SHADING_LANGUAGE_VERSION),u=s.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==u&&(3==u[1].length&&(u[1]=u[1]+"0"),s="OpenGL ES GLSL ES "+u[1]+" ("+s+")"),r=Zo(s);break;default:return fn.recordError(1280),0}return fn.stringCache[e]=r,r}function ea(e,r){if(fn.currentContext.version<2)return fn.recordError(1282),0;var t=fn.stringiCache[e];if(t)return r<0||r>=t.length?(fn.recordError(1281),0):t[r];switch(e){case 7939:for(var n=Qa.getSupportedExtensions(),i=[],o=0;o<n.length;++o)i.push(Zo(n[o])),i.push(Zo("GL_"+n[o]));return t=fn.stringiCache[e]=i,r<0||r>=t.length?(fn.recordError(1281),0):t[r];default:return fn.recordError(1280),0}}function ra(e,r,t,n,i){if(t<0)fn.recordError(1281);else if(i){var o=Qa.getSyncParameter(fn.syncs[e],r);V[n>>2]=o,null!==o&&n&&(V[n>>2]=1)}else fn.recordError(1281)}function ta(e,r,t){t?$[t>>2]=Qa.getTexParameter(e,r):fn.recordError(1281)}function na(e,r,t){t?V[t>>2]=Qa.getTexParameter(e,r):fn.recordError(1281)}function ia(e,r,t,n,i,o,a){e=fn.programs[e];var s=Qa.getTransformFeedbackVarying(e,r);if(s){if(a&&t>0){var u=B(s.name,a,t);n&&(V[n>>2]=u)}else n&&(V[n>>2]=0);i&&(V[i>>2]=s.size),o&&(V[o>>2]=s.type)}}function oa(e,r){return Qa.getUniformBlockIndex(fn.programs[e],C(r))}function aa(e,r,t,n){if(n)if(r>0&&(0==t||0==n))fn.recordError(1281);else{e=fn.programs[e];for(var i=[],o=0;o<r;o++)i.push(C(V[t+4*o>>2]));var a=Qa.getUniformIndices(e,i);if(a){var s=a.length;for(o=0;o<s;o++)V[n+4*o>>2]=a[o]}}else fn.recordError(1281)}function sa(e,r){var t=0;if("]"==(r=C(r))[r.length-1]){var n=r.lastIndexOf("[");t="]"!=r[n+1]?parseInt(r.slice(n+1)):0,r=r.slice(0,n)}var i=fn.programInfos[e]&&fn.programInfos[e].uniforms[r];return i&&t>=0&&t<i[0]?i[1]+t:-1}function ua(e,r,t,n){if(t){var i=Qa.getUniform(fn.programs[e],fn.uniforms[r]);if("number"==typeof i||"boolean"==typeof i)switch(n){case"Integer":V[t>>2]=i;break;case"Float":$[t>>2]=i;break;default:throw"internal emscriptenWebGLGetUniform() error, bad type: "+n}else for(var o=0;o<i.length;o++)switch(n){case"Integer":V[t+4*o>>2]=i[o];break;case"Float":$[t+4*o>>2]=i[o];break;default:throw"internal emscriptenWebGLGetUniform() error, bad type: "+n}}else fn.recordError(1281)}function ca(e,r,t){ua(e,r,t,"Float")}function fa(e,r,t){ua(e,r,t,"Integer")}function la(e,r,t){ua(e,r,t,"Integer")}function da(e,r,t,n){if(t){var i=Qa.getVertexAttrib(e,r);if(34975==r)V[t>>2]=i.name;else if("number"==typeof i||"boolean"==typeof i)switch(n){case"Integer":V[t>>2]=i;break;case"Float":$[t>>2]=i;break;case"FloatToInteger":V[t>>2]=Math.fround(i);break;default:throw"internal emscriptenWebGLGetVertexAttrib() error, bad type: "+n}else for(var o=0;o<i.length;o++)switch(n){case"Integer":V[t+4*o>>2]=i[o];break;case"Float":$[t+4*o>>2]=i[o];break;case"FloatToInteger":V[t+4*o>>2]=Math.fround(i[o]);break;default:throw"internal emscriptenWebGLGetVertexAttrib() error, bad type: "+n}}else fn.recordError(1281)}function pa(e,r,t){da(e,r,t,"Integer")}function ma(e,r,t){da(e,r,t,"Integer")}function ha(e,r,t){t?V[t>>2]=Qa.getVertexAttribOffset(e,r):fn.recordError(1281)}function ga(e,r,t){da(e,r,t,"Float")}function ya(e,r,t){da(e,r,t,"FloatToInteger")}function va(e,r){Qa.hint(e,r)}function _a(e,r,t){for(var n=Di[r],i=0;i<r;i++)n[i]=V[t+4*i>>2];Qa.invalidateFramebuffer(e,n)}function ba(e,r,t,n,i,o,a){for(var s=Di[r],u=0;u<r;u++)s[u]=V[t+4*u>>2];Qa.invalidateSubFramebuffer(e,s,n,i,o,a)}function Ea(e){var r=fn.buffers[e];return r?Qa.isBuffer(r):0}function wa(e){return Qa.isEnabled(e)}function xa(e){var r=fn.framebuffers[e];return r?Qa.isFramebuffer(r):0}function Sa(e){return(e=fn.programs[e])?Qa.isProgram(e):0}function Ta(e){var r=fn.queries[e];return r?Qa.isQuery(r):0}function Pa(e){var r=fn.timerQueriesEXT[e];return r?Qa.disjointTimerQueryExt.isQueryEXT(r):0}function Aa(e){var r=fn.renderbuffers[e];return r?Qa.isRenderbuffer(r):0}function Ca(e){var r=fn.samplers[e];return r?Qa.isSampler(r):0}function Da(e){var r=fn.shaders[e];return r?Qa.isShader(r):0}function Ba(e){return(e=fn.syncs[e])?Qa.isSync(e):0}function ka(e){var r=fn.textures[e];return r?Qa.isTexture(r):0}function Ia(e){return Qa.isTransformFeedback(fn.transformFeedbacks[e])}function Ma(e){var r=fn.vaos[e];return r?Qa.isVertexArray(r):0}function Fa(e){var r=fn.vaos[e];return r?Qa.isVertexArray(r):0}function Ra(e){Qa.lineWidth(e)}function La(e){Qa.linkProgram(fn.programs[e]),fn.populateUniformTable(e)}function Oa(){y("missing function: emscripten_glMapBufferRange"),Qf(-1)}function Na(){Qa.pauseTransformFeedback()}function Ua(e,r){3317==e&&(fn.unpackAlignment=r),Qa.pixelStorei(e,r)}function Ga(e,r){Qa.polygonOffset(e,r)}function Va(e,r,t,n){fn.recordError(1280)}function Wa(e,r,t){fn.recordError(1280)}function $a(e,r){Qa.disjointTimerQueryExt.queryCounterEXT(fn.timerQueriesEXT[e],r)}function ja(e){Qa.readBuffer(e)}function za(e,r,t,n){var i;return r*(e*t+(i=n)-1&-i)}var Ha={6402:1,6403:1,6406:1,6407:3,6408:4,6409:1,6410:2,33319:2,33320:2,35904:3,35906:4,36244:1,36248:3,36249:4},qa={5120:1,5121:1,5122:2,5123:2,5124:4,5125:4,5126:4,5131:2,32819:2,32820:2,33635:2,33640:4,34042:4,35899:4,35902:4,36193:2};function Ya(e,r,t,n,i,o){var a=Ha[r]*qa[e];if(a){var s=i+za(t,n,a,fn.unpackAlignment);switch(e){case 5120:return O.subarray(i,s);case 5121:return N.subarray(i,s);case 5122:return U.subarray(i>>1,s>>1);case 5124:return V.subarray(i>>2,s>>2);case 5126:return $.subarray(i>>2,s>>2);case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return W.subarray(i>>2,s>>2);case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return G.subarray(i>>1,s>>1);default:fn.recordError(1280)}}else fn.recordError(1280)}function Xa(e){switch(e){case 5120:return O;case 5121:return N;case 5122:return U;case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return G;case 5124:return V;case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return W;case 5126:return $}}var Qa,Ka={5122:1,5123:1,5124:2,5125:2,5126:2,5131:1,32819:1,32820:1,33635:1,33640:2,34042:2,35899:2,35902:2,36193:1};function Za(e,r,t,n,i,o,a){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.currentPixelPackBufferBinding?Qa.readPixels(e,r,t,n,i,o,a):Qa.readPixels(e,r,t,n,i,o,Xa(o),a>>(0|Ka[o]));else{var s=Ya(o,i,t,n,a);s?Qa.readPixels(e,r,t,n,i,o,s):fn.recordError(1280)}}function Ja(){}function es(e,r,t,n){Qa.renderbufferStorage(e,r,t,n)}function rs(e,r,t,n,i){Qa.renderbufferStorageMultisample(e,r,t,n,i)}function ts(){Qa.resumeTransformFeedback()}function ns(e,r){Qa.sampleCoverage(e,!!r)}function is(e,r,t){Qa.samplerParameterf(fn.samplers[e],r,t)}function os(e,r,t){var n=$[t>>2];Qa.samplerParameterf(fn.samplers[e],r,n)}function as(e,r,t){Qa.samplerParameteri(fn.samplers[e],r,t)}function ss(e,r,t){var n=V[t>>2];Qa.samplerParameteri(fn.samplers[e],r,n)}function us(e,r,t,n){Qa.scissor(e,r,t,n)}function cs(){fn.recordError(1280)}function fs(e,r,t,n){var i=fn.getSource(e,r,t,n);Qa.shaderSource(fn.shaders[e],i)}function ls(e,r,t){Qa.stencilFunc(e,r,t)}function ds(e,r,t,n){Qa.stencilFuncSeparate(e,r,t,n)}function ps(e){Qa.stencilMask(e)}function ms(e,r){Qa.stencilMaskSeparate(e,r)}function hs(e,r,t){Qa.stencilOp(e,r,t)}function gs(e,r,t,n){Qa.stencilOpSeparate(e,r,t,n)}function ys(e,r,t,n,i,o,a,s,u){fn.currentContext.supportsWebGL2EntryPoints?Qa.currentPixelUnpackBufferBinding?Qa.texImage2D(e,r,t,n,i,o,a,s,u):0!=u?Qa.texImage2D(e,r,t,n,i,o,a,s,Xa(s),u>>(0|Ka[s])):Qa.texImage2D(e,r,t,n,i,o,a,s,null):Qa.texImage2D(e,r,t,n,i,o,a,s,u?Ya(s,a,n,i,u):null)}function vs(e,r,t,n,i,o,a,s,u,c){Qa.currentPixelUnpackBufferBinding?Qa.texImage3D(e,r,t,n,i,o,a,s,u,c):0!=c?Qa.texImage3D(e,r,t,n,i,o,a,s,u,Xa(u),c>>(0|Ka[u])):Qa.texImage3D(e,r,t,n,i,o,a,s,u,null)}function _s(e,r,t){Qa.texParameterf(e,r,t)}function bs(e,r,t){var n=$[t>>2];Qa.texParameterf(e,r,n)}function Es(e,r,t){Qa.texParameteri(e,r,t)}function ws(e,r,t){var n=V[t>>2];Qa.texParameteri(e,r,n)}function xs(e,r,t,n,i){Qa.texStorage2D(e,r,t,n,i)}function Ss(e,r,t,n,i,o){Qa.texStorage3D(e,r,t,n,i,o)}function Ts(e,r,t,n,i,o,a,s,u){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.currentPixelUnpackBufferBinding?Qa.texSubImage2D(e,r,t,n,i,o,a,s,u):0!=u?Qa.texSubImage2D(e,r,t,n,i,o,a,s,Xa(s),u>>(0|Ka[s])):Qa.texSubImage2D(e,r,t,n,i,o,a,s,null);else{var c=null;u&&(c=Ya(s,a,i,o,u)),Qa.texSubImage2D(e,r,t,n,i,o,a,s,c)}}function Ps(e,r,t,n,i,o,a,s,u,c,f){Qa.currentPixelUnpackBufferBinding?Qa.texSubImage3D(e,r,t,n,i,o,a,s,u,c,f):0!=f?Qa.texSubImage3D(e,r,t,n,i,o,a,s,u,c,Xa(c),f>>(0|Ka[c])):Qa.texSubImage3D(e,r,t,n,i,o,a,s,u,c,null)}function As(e,r,t,n){e=fn.programs[e];for(var i=[],o=0;o<r;o++)i.push(C(V[t+4*o>>2]));Qa.transformFeedbackVaryings(e,i,n)}function Cs(e,r){Qa.uniform1f(fn.uniforms[e],r)}function Ds(e,r,t){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.uniform1fv(fn.uniforms[e],$,t>>2,r);else{if(r<=fn.MINI_TEMP_BUFFER_SIZE)for(var n=fn.miniTempBufferViews[r-1],i=0;i<r;++i)n[i]=$[t+4*i>>2];else n=$.subarray(t>>2,t+4*r>>2);Qa.uniform1fv(fn.uniforms[e],n)}}function Bs(e,r){Qa.uniform1i(fn.uniforms[e],r)}function ks(e,r,t){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniform1iv(fn.uniforms[e],V,t>>2,r):Qa.uniform1iv(fn.uniforms[e],V.subarray(t>>2,t+4*r>>2))}function Is(e,r){Qa.uniform1ui(fn.uniforms[e],r)}function Ms(e,r,t){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniform1uiv(fn.uniforms[e],W,t>>2,r):Qa.uniform1uiv(fn.uniforms[e],W.subarray(t>>2,t+4*r>>2))}function Fs(e,r,t){Qa.uniform2f(fn.uniforms[e],r,t)}function Rs(e,r,t){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.uniform2fv(fn.uniforms[e],$,t>>2,2*r);else{if(2*r<=fn.MINI_TEMP_BUFFER_SIZE)for(var n=fn.miniTempBufferViews[2*r-1],i=0;i<2*r;i+=2)n[i]=$[t+4*i>>2],n[i+1]=$[t+(4*i+4)>>2];else n=$.subarray(t>>2,t+8*r>>2);Qa.uniform2fv(fn.uniforms[e],n)}}function Ls(e,r,t){Qa.uniform2i(fn.uniforms[e],r,t)}function Os(e,r,t){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniform2iv(fn.uniforms[e],V,t>>2,2*r):Qa.uniform2iv(fn.uniforms[e],V.subarray(t>>2,t+8*r>>2))}function Ns(e,r,t){Qa.uniform2ui(fn.uniforms[e],r,t)}function Us(e,r,t){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniform2uiv(fn.uniforms[e],W,t>>2,2*r):Qa.uniform2uiv(fn.uniforms[e],W.subarray(t>>2,t+8*r>>2))}function Gs(e,r,t,n){Qa.uniform3f(fn.uniforms[e],r,t,n)}function Vs(e,r,t){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.uniform3fv(fn.uniforms[e],$,t>>2,3*r);else{if(3*r<=fn.MINI_TEMP_BUFFER_SIZE)for(var n=fn.miniTempBufferViews[3*r-1],i=0;i<3*r;i+=3)n[i]=$[t+4*i>>2],n[i+1]=$[t+(4*i+4)>>2],n[i+2]=$[t+(4*i+8)>>2];else n=$.subarray(t>>2,t+12*r>>2);Qa.uniform3fv(fn.uniforms[e],n)}}function Ws(e,r,t,n){Qa.uniform3i(fn.uniforms[e],r,t,n)}function $s(e,r,t){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniform3iv(fn.uniforms[e],V,t>>2,3*r):Qa.uniform3iv(fn.uniforms[e],V.subarray(t>>2,t+12*r>>2))}function js(e,r,t,n){Qa.uniform3ui(fn.uniforms[e],r,t,n)}function zs(e,r,t){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniform3uiv(fn.uniforms[e],W,t>>2,3*r):Qa.uniform3uiv(fn.uniforms[e],W.subarray(t>>2,t+12*r>>2))}function Hs(e,r,t,n,i){Qa.uniform4f(fn.uniforms[e],r,t,n,i)}function qs(e,r,t){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.uniform4fv(fn.uniforms[e],$,t>>2,4*r);else{if(4*r<=fn.MINI_TEMP_BUFFER_SIZE)for(var n=fn.miniTempBufferViews[4*r-1],i=0;i<4*r;i+=4)n[i]=$[t+4*i>>2],n[i+1]=$[t+(4*i+4)>>2],n[i+2]=$[t+(4*i+8)>>2],n[i+3]=$[t+(4*i+12)>>2];else n=$.subarray(t>>2,t+16*r>>2);Qa.uniform4fv(fn.uniforms[e],n)}}function Ys(e,r,t,n,i){Qa.uniform4i(fn.uniforms[e],r,t,n,i)}function Xs(e,r,t){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniform4iv(fn.uniforms[e],V,t>>2,4*r):Qa.uniform4iv(fn.uniforms[e],V.subarray(t>>2,t+16*r>>2))}function Qs(e,r,t,n,i){Qa.uniform4ui(fn.uniforms[e],r,t,n,i)}function Ks(e,r,t){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniform4uiv(fn.uniforms[e],W,t>>2,4*r):Qa.uniform4uiv(fn.uniforms[e],W.subarray(t>>2,t+16*r>>2))}function Zs(e,r,t){e=fn.programs[e],Qa.uniformBlockBinding(e,r,t)}function Js(e,r,t,n){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.uniformMatrix2fv(fn.uniforms[e],!!t,$,n>>2,4*r);else{if(4*r<=fn.MINI_TEMP_BUFFER_SIZE)for(var i=fn.miniTempBufferViews[4*r-1],o=0;o<4*r;o+=4)i[o]=$[n+4*o>>2],i[o+1]=$[n+(4*o+4)>>2],i[o+2]=$[n+(4*o+8)>>2],i[o+3]=$[n+(4*o+12)>>2];else i=$.subarray(n>>2,n+16*r>>2);Qa.uniformMatrix2fv(fn.uniforms[e],!!t,i)}}function eu(e,r,t,n){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniformMatrix2x3fv(fn.uniforms[e],!!t,$,n>>2,6*r):Qa.uniformMatrix2x3fv(fn.uniforms[e],!!t,$.subarray(n>>2,n+24*r>>2))}function ru(e,r,t,n){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniformMatrix2x4fv(fn.uniforms[e],!!t,$,n>>2,8*r):Qa.uniformMatrix2x4fv(fn.uniforms[e],!!t,$.subarray(n>>2,n+32*r>>2))}function tu(e,r,t,n){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.uniformMatrix3fv(fn.uniforms[e],!!t,$,n>>2,9*r);else{if(9*r<=fn.MINI_TEMP_BUFFER_SIZE)for(var i=fn.miniTempBufferViews[9*r-1],o=0;o<9*r;o+=9)i[o]=$[n+4*o>>2],i[o+1]=$[n+(4*o+4)>>2],i[o+2]=$[n+(4*o+8)>>2],i[o+3]=$[n+(4*o+12)>>2],i[o+4]=$[n+(4*o+16)>>2],i[o+5]=$[n+(4*o+20)>>2],i[o+6]=$[n+(4*o+24)>>2],i[o+7]=$[n+(4*o+28)>>2],i[o+8]=$[n+(4*o+32)>>2];else i=$.subarray(n>>2,n+36*r>>2);Qa.uniformMatrix3fv(fn.uniforms[e],!!t,i)}}function nu(e,r,t,n){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniformMatrix3x2fv(fn.uniforms[e],!!t,$,n>>2,6*r):Qa.uniformMatrix3x2fv(fn.uniforms[e],!!t,$.subarray(n>>2,n+24*r>>2))}function iu(e,r,t,n){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniformMatrix3x4fv(fn.uniforms[e],!!t,$,n>>2,12*r):Qa.uniformMatrix3x4fv(fn.uniforms[e],!!t,$.subarray(n>>2,n+48*r>>2))}function ou(e,r,t,n){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.uniformMatrix4fv(fn.uniforms[e],!!t,$,n>>2,16*r);else{if(16*r<=fn.MINI_TEMP_BUFFER_SIZE)for(var i=fn.miniTempBufferViews[16*r-1],o=0;o<16*r;o+=16)i[o]=$[n+4*o>>2],i[o+1]=$[n+(4*o+4)>>2],i[o+2]=$[n+(4*o+8)>>2],i[o+3]=$[n+(4*o+12)>>2],i[o+4]=$[n+(4*o+16)>>2],i[o+5]=$[n+(4*o+20)>>2],i[o+6]=$[n+(4*o+24)>>2],i[o+7]=$[n+(4*o+28)>>2],i[o+8]=$[n+(4*o+32)>>2],i[o+9]=$[n+(4*o+36)>>2],i[o+10]=$[n+(4*o+40)>>2],i[o+11]=$[n+(4*o+44)>>2],i[o+12]=$[n+(4*o+48)>>2],i[o+13]=$[n+(4*o+52)>>2],i[o+14]=$[n+(4*o+56)>>2],i[o+15]=$[n+(4*o+60)>>2];else i=$.subarray(n>>2,n+64*r>>2);Qa.uniformMatrix4fv(fn.uniforms[e],!!t,i)}}function au(e,r,t,n){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniformMatrix4x2fv(fn.uniforms[e],!!t,$,n>>2,8*r):Qa.uniformMatrix4x2fv(fn.uniforms[e],!!t,$.subarray(n>>2,n+32*r>>2))}function su(e,r,t,n){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniformMatrix4x3fv(fn.uniforms[e],!!t,$,n>>2,12*r):Qa.uniformMatrix4x3fv(fn.uniforms[e],!!t,$.subarray(n>>2,n+48*r>>2))}function uu(){y("missing function: emscripten_glUnmapBuffer"),Qf(-1)}function cu(e){Qa.useProgram(fn.programs[e])}function fu(e){Qa.validateProgram(fn.programs[e])}function lu(e,r){Qa.vertexAttrib1f(e,r)}function du(e,r){Qa.vertexAttrib1f(e,$[r>>2])}function pu(e,r,t){Qa.vertexAttrib2f(e,r,t)}function mu(e,r){Qa.vertexAttrib2f(e,$[r>>2],$[r+4>>2])}function hu(e,r,t,n){Qa.vertexAttrib3f(e,r,t,n)}function gu(e,r){Qa.vertexAttrib3f(e,$[r>>2],$[r+4>>2],$[r+8>>2])}function yu(e,r,t,n,i){Qa.vertexAttrib4f(e,r,t,n,i)}function vu(e,r){Qa.vertexAttrib4f(e,$[r>>2],$[r+4>>2],$[r+8>>2],$[r+12>>2])}function _u(e,r){Qa.vertexAttribDivisor(e,r)}function bu(e,r){Qa.vertexAttribDivisor(e,r)}function Eu(e,r){Qa.vertexAttribDivisor(e,r)}function wu(e,r){Qa.vertexAttribDivisor(e,r)}function xu(e,r){Qa.vertexAttribDivisor(e,r)}function Su(e,r,t,n,i){Qa.vertexAttribI4i(e,r,t,n,i)}function Tu(e,r){Qa.vertexAttribI4i(e,V[r>>2],V[r+4>>2],V[r+8>>2],V[r+12>>2])}function Pu(e,r,t,n,i){Qa.vertexAttribI4ui(e,r,t,n,i)}function Au(e,r){Qa.vertexAttribI4ui(e,W[r>>2],W[r+4>>2],W[r+8>>2],W[r+12>>2])}function Cu(e,r,t,n,i){Qa.vertexAttribIPointer(e,r,t,n,i)}function Du(e,r,t,n,i,o){Qa.vertexAttribPointer(e,r,t,!!n,i,o)}function Bu(e,r,t,n){Qa.viewport(e,r,t,n)}function ku(e,r,t,n){n>>>=0;var i=4294967295==(t>>>=0)&&4294967295==n?-1:_(t,n,!0);Qa.waitSync(fn.syncs[e],r,i)}function Iu(e){Qf("OOM")}function Mu(e){e=q(e,65536);var r=a.buffer.byteLength;try{return-1!==b.grow((e-r)/65536)?a.buffer=b.buffer:null}catch(e){return null}}function Fu(e){var r=cn();if(e>2147418112)return!1;for(var t=Math.max(r,16777216);t<e;)t=t<=536870912?q(2*t,65536):Math.min(q((3*t+2147483648)/4,65536),2147418112);var n=Mu(t);return!(!n||n.byteLength!=t)&&(Y(n),X(),J=t,W[K>>2]=e,!0)}function Ru(e){Qa.activeTexture(e)}function Lu(e,r){Qa.attachShader(fn.programs[e],fn.shaders[r])}function Ou(e,r){35051==e?Qa.currentPixelPackBufferBinding=r:35052==e&&(Qa.currentPixelUnpackBufferBinding=r),Qa.bindBuffer(e,fn.buffers[r])}function Nu(e,r,t,n,i){Qa.bindBufferRange(e,r,fn.buffers[t],n,i)}function Uu(e,r){Qa.bindFramebuffer(e,fn.framebuffers[r])}function Gu(e,r){Qa.bindRenderbuffer(e,fn.renderbuffers[r])}function Vu(e,r){Qa.bindSampler(e,fn.samplers[r])}function Wu(e,r){Qa.bindTexture(e,fn.textures[r])}function $u(e){Qa.bindVertexArray(fn.vaos[e])}function ju(e,r){Qa.blendEquationSeparate(e,r)}function zu(e,r,t,n){Qa.blendFuncSeparate(e,r,t,n)}function Hu(e,r,t,n,i,o,a,s,u,c){Qa.blitFramebuffer(e,r,t,n,i,o,a,s,u,c)}function qu(e,r,t,n){fn.currentContext.supportsWebGL2EntryPoints?t?Qa.bufferData(e,N,n,t,r):Qa.bufferData(e,r,n):Qa.bufferData(e,t?N.subarray(t,t+r):r,n)}function Yu(e,r,t,n){fn.currentContext.supportsWebGL2EntryPoints?Qa.bufferSubData(e,r,N,n,t):Qa.bufferSubData(e,r,N.subarray(n,n+t))}function Xu(e){Qa.clear(e)}function Qu(e,r,t,n){Qa.clearColor(e,r,t,n)}function Ku(e){Qa.clearDepth(e)}function Zu(e){Qa.clearStencil(e)}function Ju(e,r,t,n){Qa.colorMask(!!e,!!r,!!t,!!n)}function ec(e){Qa.compileShader(fn.shaders[e])}function rc(e,r,t,n,i,o,a,s,u){fn.currentContext.supportsWebGL2EntryPoints?Qa.currentPixelUnpackBufferBinding?Qa.compressedTexSubImage2D(e,r,t,n,i,o,a,s,u):Qa.compressedTexSubImage2D(e,r,t,n,i,o,a,N,u,s):Qa.compressedTexSubImage2D(e,r,t,n,i,o,a,u?N.subarray(u,u+s):null)}function tc(e,r,t,n,i,o,a,s,u,c,f){fn.currentContext.supportsWebGL2EntryPoints?Qa.currentPixelUnpackBufferBinding?Qa.compressedTexSubImage3D(e,r,t,n,i,o,a,s,u,c,f):Qa.compressedTexSubImage3D(e,r,t,n,i,o,a,s,u,N,f,c):Qa.compressedTexSubImage3D(e,r,t,n,i,o,a,s,u,f?N.subarray(f,f+c):null)}function nc(){var e=fn.getNewId(fn.programs),r=Qa.createProgram();return r.name=e,fn.programs[e]=r,e}function ic(e){var r=fn.getNewId(fn.shaders);return fn.shaders[r]=Qa.createShader(e),r}function oc(e){Qa.cullFace(e)}function ac(e,r){for(var t=0;t<e;t++){var n=V[r+4*t>>2],i=fn.buffers[n];i&&(Qa.deleteBuffer(i),i.name=0,fn.buffers[n]=null,n==fn.currArrayBuffer&&(fn.currArrayBuffer=0),n==fn.currElementArrayBuffer&&(fn.currElementArrayBuffer=0),n==Qa.currentPixelPackBufferBinding&&(Qa.currentPixelPackBufferBinding=0),n==Qa.currentPixelUnpackBufferBinding&&(Qa.currentPixelUnpackBufferBinding=0))}}function sc(e,r){for(var t=0;t<e;++t){var n=V[r+4*t>>2],i=fn.framebuffers[n];i&&(Qa.deleteFramebuffer(i),i.name=0,fn.framebuffers[n]=null)}}function uc(e){if(e){var r=fn.programs[e];r?(Qa.deleteProgram(r),r.name=0,fn.programs[e]=null,fn.programInfos[e]=null):fn.recordError(1281)}}function cc(e,r){for(var t=0;t<e;t++){var n=V[r+4*t>>2],i=fn.renderbuffers[n];i&&(Qa.deleteRenderbuffer(i),i.name=0,fn.renderbuffers[n]=null)}}function fc(e,r){for(var t=0;t<e;t++){var n=V[r+4*t>>2],i=fn.samplers[n];i&&(Qa.deleteSampler(i),i.name=0,fn.samplers[n]=null)}}function lc(e){if(e){var r=fn.shaders[e];r?(Qa.deleteShader(r),fn.shaders[e]=null):fn.recordError(1281)}}function dc(e){if(e){var r=fn.syncs[e];r?(Qa.deleteSync(r),r.name=0,fn.syncs[e]=null):fn.recordError(1281)}}function pc(e,r){for(var t=0;t<e;t++){var n=V[r+4*t>>2],i=fn.textures[n];i&&(Qa.deleteTexture(i),i.name=0,fn.textures[n]=null)}}function mc(e,r){for(var t=0;t<e;t++){var n=V[r+4*t>>2];Qa.deleteVertexArray(fn.vaos[n]),fn.vaos[n]=null}}function hc(e){Qa.depthFunc(e)}function gc(e){Qa.depthMask(!!e)}function yc(e,r){Qa.detachShader(fn.programs[e],fn.shaders[r])}function vc(e){Qa.disable(e)}function _c(e){Qa.disableVertexAttribArray(e)}function bc(e,r,t){Qa.drawArrays(e,r,t)}function Ec(e,r,t,n,i,o){Ui(e,n,i,o)}function wc(e){Qa.enable(e)}function xc(e){Qa.enableVertexAttribArray(e)}function Sc(e,r){var t=Qa.fenceSync(e,r);if(t){var n=fn.getNewId(fn.syncs);return t.name=n,fn.syncs[n]=t,n}return 0}function Tc(){Qa.flush()}function Pc(e,r,t,n){Qa.framebufferRenderbuffer(e,r,t,fn.renderbuffers[n])}function Ac(e,r,t,n,i){Qa.framebufferTexture2D(e,r,t,fn.textures[n],i)}function Cc(e,r,t,n,i){Qa.framebufferTextureLayer(e,r,fn.textures[t],n,i)}function Dc(e){Qa.frontFace(e)}function Bc(e,r){eo(e,r,"createBuffer",fn.buffers)}function kc(e,r){eo(e,r,"createFramebuffer",fn.framebuffers)}function Ic(e,r){eo(e,r,"createRenderbuffer",fn.renderbuffers)}function Mc(e,r){eo(e,r,"createSampler",fn.samplers)}function Fc(e,r){eo(e,r,"createTexture",fn.textures)}function Rc(e,r){eo(e,r,"createVertexArray",fn.vaos)}function Lc(e){Qa.generateMipmap(e)}function Oc(){if(fn.lastError){var e=fn.lastError;return fn.lastError=0,e}return Qa.getError()}function Nc(e,r){bo(e,r,"Float")}function Uc(e,r){bo(e,r,"Integer")}function Gc(e,r,t,n){var i=Qa.getProgramInfoLog(fn.programs[e]);if(null===i&&(i="(unknown error)"),r>0&&n){var o=B(i,n,r);t&&(V[t>>2]=o)}else t&&(V[t>>2]=0)}function Vc(e,r,t){if(t)if(e>=fn.counter)fn.recordError(1281);else{var n=fn.programInfos[e];if(n)if(35716==r){var i=Qa.getProgramInfoLog(fn.programs[e]);null===i&&(i="(unknown error)"),V[t>>2]=i.length+1}else if(35719==r)V[t>>2]=n.maxUniformLength;else if(35722==r){if(-1==n.maxAttributeLength){e=fn.programs[e];var o=Qa.getProgramParameter(e,35721);n.maxAttributeLength=0;for(var a=0;a<o;++a){var s=Qa.getActiveAttrib(e,a);n.maxAttributeLength=Math.max(n.maxAttributeLength,s.name.length+1)}}V[t>>2]=n.maxAttributeLength}else if(35381==r){if(-1==n.maxUniformBlockNameLength){e=fn.programs[e];var u=Qa.getProgramParameter(e,35382);n.maxUniformBlockNameLength=0;for(a=0;a<u;++a){var c=Qa.getActiveUniformBlockName(e,a);n.maxUniformBlockNameLength=Math.max(n.maxUniformBlockNameLength,c.length+1)}}V[t>>2]=n.maxUniformBlockNameLength}else V[t>>2]=Qa.getProgramParameter(fn.programs[e],r);else fn.recordError(1282)}else fn.recordError(1281)}function Wc(e,r,t,n){var i=Qa.getShaderInfoLog(fn.shaders[e]);if(null===i&&(i="(unknown error)"),r>0&&n){var o=B(i,n,r);t&&(V[t>>2]=o)}else t&&(V[t>>2]=0)}function $c(e,r,t){if(t)if(35716==r){var n=Qa.getShaderInfoLog(fn.shaders[e]);null===n&&(n="(unknown error)"),V[t>>2]=n.length+1}else if(35720==r){var i=Qa.getShaderSource(fn.shaders[e]),o=null===i||0==i.length?0:i.length+1;V[t>>2]=o}else V[t>>2]=Qa.getShaderParameter(fn.shaders[e],r);else fn.recordError(1281)}function jc(e){if(fn.stringCache[e])return fn.stringCache[e];var r;switch(e){case 7939:for(var t=Qa.getSupportedExtensions(),n=[],i=0;i<t.length;++i)n.push(t[i]),n.push("GL_"+t[i]);r=Zo(n.join(" "));break;case 7936:case 7937:case 37445:case 37446:var o=Qa.getParameter(e);o||fn.recordError(1280),r=Zo(o);break;case 7938:var a=Qa.getParameter(Qa.VERSION);r=Zo(a=fn.currentContext.version>=2?"OpenGL ES 3.0 ("+a+")":"OpenGL ES 2.0 ("+a+")");break;case 35724:var s=Qa.getParameter(Qa.SHADING_LANGUAGE_VERSION),u=s.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==u&&(3==u[1].length&&(u[1]=u[1]+"0"),s="OpenGL ES GLSL ES "+u[1]+" ("+s+")"),r=Zo(s);break;default:return fn.recordError(1280),0}return fn.stringCache[e]=r,r}function zc(e,r){if(fn.currentContext.version<2)return fn.recordError(1282),0;var t=fn.stringiCache[e];if(t)return r<0||r>=t.length?(fn.recordError(1281),0):t[r];switch(e){case 7939:for(var n=Qa.getSupportedExtensions(),i=[],o=0;o<n.length;++o)i.push(Zo(n[o])),i.push(Zo("GL_"+n[o]));return t=fn.stringiCache[e]=i,r<0||r>=t.length?(fn.recordError(1281),0):t[r];default:return fn.recordError(1280),0}}function Hc(e,r){return Qa.getUniformBlockIndex(fn.programs[e],C(r))}function qc(e,r){var t=0;if("]"==(r=C(r))[r.length-1]){var n=r.lastIndexOf("[");t="]"!=r[n+1]?parseInt(r.slice(n+1)):0,r=r.slice(0,n)}var i=fn.programInfos[e]&&fn.programInfos[e].uniforms[r];return i&&t>=0&&t<i[0]?i[1]+t:-1}function Yc(e,r,t){da(e,r,t,"FloatToInteger")}function Xc(e,r){Qa.hint(e,r)}function Qc(e,r,t){for(var n=Di[r],i=0;i<r;i++)n[i]=V[t+4*i>>2];Qa.invalidateFramebuffer(e,n)}function Kc(e,r,t,n,i,o,a){for(var s=Di[r],u=0;u<r;u++)s[u]=V[t+4*u>>2];Qa.invalidateSubFramebuffer(e,s,n,i,o,a)}function Zc(e){return Qa.isEnabled(e)}function Jc(e){Qa.linkProgram(fn.programs[e]),fn.populateUniformTable(e)}function ef(e,r){3317==e&&(fn.unpackAlignment=r),Qa.pixelStorei(e,r)}function rf(e,r){Qa.polygonOffset(e,r)}function tf(e,r,t,n,i,o,a){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.currentPixelPackBufferBinding?Qa.readPixels(e,r,t,n,i,o,a):Qa.readPixels(e,r,t,n,i,o,Xa(o),a>>(0|Ka[o]));else{var s=Ya(o,i,t,n,a);s?Qa.readPixels(e,r,t,n,i,o,s):fn.recordError(1280)}}function nf(e,r,t,n){Qa.renderbufferStorage(e,r,t,n)}function of(e,r,t,n,i){Qa.renderbufferStorageMultisample(e,r,t,n,i)}function af(e,r,t){Qa.samplerParameteri(fn.samplers[e],r,t)}function sf(e,r,t,n){Qa.scissor(e,r,t,n)}function uf(e,r,t,n){var i=fn.getSource(e,r,t,n);Qa.shaderSource(fn.shaders[e],i)}function cf(e,r,t){Qa.texParameteri(e,r,t)}function ff(e,r,t,n,i){Qa.texStorage2D(e,r,t,n,i)}function lf(){y("missing function: glTexStorage2DMultisample"),Qf(-1)}function df(e,r,t,n,i,o){Qa.texStorage3D(e,r,t,n,i,o)}function pf(e,r,t,n,i,o,a,s,u){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.currentPixelUnpackBufferBinding?Qa.texSubImage2D(e,r,t,n,i,o,a,s,u):0!=u?Qa.texSubImage2D(e,r,t,n,i,o,a,s,Xa(s),u>>(0|Ka[s])):Qa.texSubImage2D(e,r,t,n,i,o,a,s,null);else{var c=null;u&&(c=Ya(s,a,i,o,u)),Qa.texSubImage2D(e,r,t,n,i,o,a,s,c)}}function mf(e,r,t,n,i,o,a,s,u,c,f){Qa.currentPixelUnpackBufferBinding?Qa.texSubImage3D(e,r,t,n,i,o,a,s,u,c,f):0!=f?Qa.texSubImage3D(e,r,t,n,i,o,a,s,u,c,Xa(c),f>>(0|Ka[c])):Qa.texSubImage3D(e,r,t,n,i,o,a,s,u,c,null)}function hf(e,r){Qa.uniform1f(fn.uniforms[e],r)}function gf(e,r){Qa.uniform1i(fn.uniforms[e],r)}function yf(e,r,t,n,i){Qa.uniform4f(fn.uniforms[e],r,t,n,i)}function vf(e,r,t){e=fn.programs[e],Qa.uniformBlockBinding(e,r,t)}function _f(e){Qa.useProgram(fn.programs[e])}function bf(e,r,t,n,i){Qa.vertexAttribIPointer(e,r,t,n,i)}function Ef(e,r,t,n,i,o){Qa.vertexAttribPointer(e,r,t,!!n,i,o)}function wf(e,r,t,n){Qa.viewport(e,r,t,n)}function xf(e,r,t,n){n>>>=0;var i=4294967295==(t>>>=0)&&4294967295==n?-1:_(t,n,!0);Qa.waitSync(fn.syncs[e],r,i)}function Sf(e){return Math.pow(2,e)}function Tf(e){return Sf(e)}function Pf(e){return Math.log(e)/Math.LN2}function Af(){Qf("trap!")}function Cf(e,r,t){N.set(N.subarray(r,r+t),e)}function Df(){return 0}function Bf(){return 0}function kf(){return 0}function If(){return 0}function Mf(){return 11}function Ff(){}function Rf(e){switch(e){case 30:return z;case 85:return 2147418112/z;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 79:return 0;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return Ue(22),-1}if(He.staticInit(),f){var Lf=t(1),Of=t(2);je.staticInit()}pr=a.InternalError=dr(Error,"InternalError"),br(),xr=a.BindingError=dr(Error,"BindingError"),Nr(),st(),rt(),lt=a.UnboundTypeError=dr(Error,"UnboundTypeError"),Ct(),an=f?function(){var e=r.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof dateNow?dateNow:"object"==typeof self&&self.performance&&"function"==typeof self.performance.now?function(){return self.performance.now()}:"object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:Date.now,fn.init();for(var Nf=0;Nf<32;Nf++)Di.push(new Array(Nf));function Uf(e,r,t){var n=t>0?t:k(e)+1,i=new Array(n),o=D(e,i,0,i.length);return r&&(i.length=o),i}var Gf={},Vf={abort:Qf,setTempRet0:w,getTempRet0:x,ClassHandle:Ur,ClassHandle_clone:Br,ClassHandle_delete:Ir,ClassHandle_deleteLater:Or,ClassHandle_isAliasOf:Ar,ClassHandle_isDeleted:Mr,RegisteredClass:$r,RegisteredPointer:ut,RegisteredPointer_deleteObject:Qr,RegisteredPointer_destructor:Xr,RegisteredPointer_fromWireType:at,RegisteredPointer_getPointee:Yr,__ZSt18uncaught_exceptionv:ke,___atomic_compare_exchange_8:De,___atomic_fetch_sub_8:Be,___cxa_begin_catch:Fe,___cxa_find_matching_catch:Oe,___cxa_free_exception:Ie,___cxa_pure_virtual:Re,___gxx_personality_v0:Ne,___resumeException:Le,___setErrNo:Ue,___syscall140:Xe,___syscall146:Qe,___syscall221:Ke,___syscall3:Ze,___syscall5:Je,___syscall54:er,___syscall6:rr,__computeUnpackAlignedImageSize:za,__embind_finalize_value_array:gr,__embind_finalize_value_object:vr,__embind_register_bool:Pr,__embind_register_class:mt,__embind_register_class_class_function:vt,__embind_register_class_constructor:_t,__embind_register_class_function:bt,__embind_register_class_property:wt,__embind_register_emval:Bt,__embind_register_enum:It,__embind_register_enum_value:Ft,__embind_register_float:Ot,__embind_register_function:Nt,__embind_register_integer:Gt,__embind_register_memory_view:Vt,__embind_register_std_string:Wt,__embind_register_std_wstring:$t,__embind_register_value_array:jt,__embind_register_value_array_element:zt,__embind_register_value_object:Ht,__embind_register_value_object_field:qt,__embind_register_void:Yt,__emval_as:Qt,__emval_decref:Tt,__emval_get_property:Kt,__emval_incref:Zt,__emval_new_cstring:rn,__emval_register:Dt,__emval_run_destructors:tn,__emval_take_value:nn,__glGenObject:eo,__heapObjectForWebGLType:Xa,_abort:on,_clock_gettime:un,_embind_repr:Rt,_emscripten_get_heap_size:cn,_emscripten_get_now:an,_emscripten_get_now_is_monotonic:sn,_emscripten_glActiveTexture:ln,_emscripten_glAttachShader:dn,_emscripten_glBeginQuery:pn,_emscripten_glBeginQueryEXT:mn,_emscripten_glBeginTransformFeedback:hn,_emscripten_glBindAttribLocation:gn,_emscripten_glBindBuffer:yn,_emscripten_glBindBufferBase:vn,_emscripten_glBindBufferRange:_n,_emscripten_glBindFramebuffer:bn,_emscripten_glBindRenderbuffer:En,_emscripten_glBindSampler:wn,_emscripten_glBindTexture:xn,_emscripten_glBindTransformFeedback:Sn,_emscripten_glBindVertexArray:Tn,_emscripten_glBindVertexArrayOES:Pn,_emscripten_glBlendColor:An,_emscripten_glBlendEquation:Cn,_emscripten_glBlendEquationSeparate:Dn,_emscripten_glBlendFunc:Bn,_emscripten_glBlendFuncSeparate:kn,_emscripten_glBlitFramebuffer:In,_emscripten_glBufferData:Mn,_emscripten_glBufferSubData:Fn,_emscripten_glCheckFramebufferStatus:Rn,_emscripten_glClear:Ln,_emscripten_glClearBufferfi:On,_emscripten_glClearBufferfv:Nn,_emscripten_glClearBufferiv:Un,_emscripten_glClearBufferuiv:Gn,_emscripten_glClearColor:Vn,_emscripten_glClearDepthf:Wn,_emscripten_glClearStencil:$n,_emscripten_glClientWaitSync:jn,_emscripten_glColorMask:zn,_emscripten_glCompileShader:Hn,_emscripten_glCompressedTexImage2D:qn,_emscripten_glCompressedTexImage3D:Yn,_emscripten_glCompressedTexSubImage2D:Xn,_emscripten_glCompressedTexSubImage3D:Qn,_emscripten_glCopyBufferSubData:Kn,_emscripten_glCopyTexImage2D:Zn,_emscripten_glCopyTexSubImage2D:Jn,_emscripten_glCopyTexSubImage3D:ei,_emscripten_glCreateProgram:ri,_emscripten_glCreateShader:ti,_emscripten_glCullFace:ni,_emscripten_glDeleteBuffers:ii,_emscripten_glDeleteFramebuffers:oi,_emscripten_glDeleteProgram:ai,_emscripten_glDeleteQueries:si,_emscripten_glDeleteQueriesEXT:ui,_emscripten_glDeleteRenderbuffers:ci,_emscripten_glDeleteSamplers:fi,_emscripten_glDeleteShader:li,_emscripten_glDeleteSync:di,_emscripten_glDeleteTextures:pi,_emscripten_glDeleteTransformFeedbacks:mi,_emscripten_glDeleteVertexArrays:hi,_emscripten_glDeleteVertexArraysOES:gi,_emscripten_glDepthFunc:yi,_emscripten_glDepthMask:vi,_emscripten_glDepthRangef:_i,_emscripten_glDetachShader:bi,_emscripten_glDisable:Ei,_emscripten_glDisableVertexAttribArray:wi,_emscripten_glDrawArrays:xi,_emscripten_glDrawArraysInstanced:Si,_emscripten_glDrawArraysInstancedANGLE:Ti,_emscripten_glDrawArraysInstancedARB:Pi,_emscripten_glDrawArraysInstancedEXT:Ai,_emscripten_glDrawArraysInstancedNV:Ci,_emscripten_glDrawBuffers:Bi,_emscripten_glDrawBuffersEXT:ki,_emscripten_glDrawBuffersWEBGL:Ii,_emscripten_glDrawElements:Mi,_emscripten_glDrawElementsInstanced:Fi,_emscripten_glDrawElementsInstancedANGLE:Ri,_emscripten_glDrawElementsInstancedARB:Li,_emscripten_glDrawElementsInstancedEXT:Oi,_emscripten_glDrawElementsInstancedNV:Ni,_emscripten_glDrawRangeElements:Gi,_emscripten_glEnable:Vi,_emscripten_glEnableVertexAttribArray:Wi,_emscripten_glEndQuery:$i,_emscripten_glEndQueryEXT:ji,_emscripten_glEndTransformFeedback:zi,_emscripten_glFenceSync:Hi,_emscripten_glFinish:qi,_emscripten_glFlush:Yi,_emscripten_glFlushMappedBufferRange:Xi,_emscripten_glFramebufferRenderbuffer:Qi,_emscripten_glFramebufferTexture2D:Ki,_emscripten_glFramebufferTextureLayer:Zi,_emscripten_glFrontFace:Ji,_emscripten_glGenBuffers:ro,_emscripten_glGenFramebuffers:to,_emscripten_glGenQueries:no,_emscripten_glGenQueriesEXT:io,_emscripten_glGenRenderbuffers:oo,_emscripten_glGenSamplers:ao,_emscripten_glGenTextures:so,_emscripten_glGenTransformFeedbacks:uo,_emscripten_glGenVertexArrays:co,_emscripten_glGenVertexArraysOES:fo,_emscripten_glGenerateMipmap:lo,_emscripten_glGetActiveAttrib:po,_emscripten_glGetActiveUniform:mo,_emscripten_glGetActiveUniformBlockName:ho,_emscripten_glGetActiveUniformBlockiv:go,_emscripten_glGetActiveUniformsiv:yo,_emscripten_glGetAttachedShaders:vo,_emscripten_glGetAttribLocation:_o,_emscripten_glGetBooleanv:Eo,_emscripten_glGetBufferParameteri64v:wo,_emscripten_glGetBufferParameteriv:xo,_emscripten_glGetBufferPointerv:So,_emscripten_glGetError:To,_emscripten_glGetFloatv:Po,_emscripten_glGetFragDataLocation:Ao,_emscripten_glGetFramebufferAttachmentParameteriv:Co,_emscripten_glGetInteger64i_v:Bo,_emscripten_glGetInteger64v:ko,_emscripten_glGetIntegeri_v:Io,_emscripten_glGetIntegerv:Mo,_emscripten_glGetInternalformativ:Fo,_emscripten_glGetProgramBinary:Ro,_emscripten_glGetProgramInfoLog:Lo,_emscripten_glGetProgramiv:Oo,_emscripten_glGetQueryObjecti64vEXT:No,_emscripten_glGetQueryObjectivEXT:Uo,_emscripten_glGetQueryObjectui64vEXT:Go,_emscripten_glGetQueryObjectuiv:Vo,_emscripten_glGetQueryObjectuivEXT:Wo,_emscripten_glGetQueryiv:$o,_emscripten_glGetQueryivEXT:jo,_emscripten_glGetRenderbufferParameteriv:zo,_emscripten_glGetSamplerParameterfv:Ho,_emscripten_glGetSamplerParameteriv:qo,_emscripten_glGetShaderInfoLog:Yo,_emscripten_glGetShaderPrecisionFormat:Xo,_emscripten_glGetShaderSource:Qo,_emscripten_glGetShaderiv:Ko,_emscripten_glGetString:Jo,_emscripten_glGetStringi:ea,_emscripten_glGetSynciv:ra,_emscripten_glGetTexParameterfv:ta,_emscripten_glGetTexParameteriv:na,_emscripten_glGetTransformFeedbackVarying:ia,_emscripten_glGetUniformBlockIndex:oa,_emscripten_glGetUniformIndices:aa,_emscripten_glGetUniformLocation:sa,_emscripten_glGetUniformfv:ca,_emscripten_glGetUniformiv:fa,_emscripten_glGetUniformuiv:la,_emscripten_glGetVertexAttribIiv:pa,_emscripten_glGetVertexAttribIuiv:ma,_emscripten_glGetVertexAttribPointerv:ha,_emscripten_glGetVertexAttribfv:ga,_emscripten_glGetVertexAttribiv:ya,_emscripten_glHint:va,_emscripten_glInvalidateFramebuffer:_a,_emscripten_glInvalidateSubFramebuffer:ba,_emscripten_glIsBuffer:Ea,_emscripten_glIsEnabled:wa,_emscripten_glIsFramebuffer:xa,_emscripten_glIsProgram:Sa,_emscripten_glIsQuery:Ta,_emscripten_glIsQueryEXT:Pa,_emscripten_glIsRenderbuffer:Aa,_emscripten_glIsSampler:Ca,_emscripten_glIsShader:Da,_emscripten_glIsSync:Ba,_emscripten_glIsTexture:ka,_emscripten_glIsTransformFeedback:Ia,_emscripten_glIsVertexArray:Ma,_emscripten_glIsVertexArrayOES:Fa,_emscripten_glLineWidth:Ra,_emscripten_glLinkProgram:La,_emscripten_glMapBufferRange:Oa,_emscripten_glPauseTransformFeedback:Na,_emscripten_glPixelStorei:Ua,_emscripten_glPolygonOffset:Ga,_emscripten_glProgramBinary:Va,_emscripten_glProgramParameteri:Wa,_emscripten_glQueryCounterEXT:$a,_emscripten_glReadBuffer:ja,_emscripten_glReadPixels:Za,_emscripten_glReleaseShaderCompiler:Ja,_emscripten_glRenderbufferStorage:es,_emscripten_glRenderbufferStorageMultisample:rs,_emscripten_glResumeTransformFeedback:ts,_emscripten_glSampleCoverage:ns,_emscripten_glSamplerParameterf:is,_emscripten_glSamplerParameterfv:os,_emscripten_glSamplerParameteri:as,_emscripten_glSamplerParameteriv:ss,_emscripten_glScissor:us,_emscripten_glShaderBinary:cs,_emscripten_glShaderSource:fs,_emscripten_glStencilFunc:ls,_emscripten_glStencilFuncSeparate:ds,_emscripten_glStencilMask:ps,_emscripten_glStencilMaskSeparate:ms,_emscripten_glStencilOp:hs,_emscripten_glStencilOpSeparate:gs,_emscripten_glTexImage2D:ys,_emscripten_glTexImage3D:vs,_emscripten_glTexParameterf:_s,_emscripten_glTexParameterfv:bs,_emscripten_glTexParameteri:Es,_emscripten_glTexParameteriv:ws,_emscripten_glTexStorage2D:xs,_emscripten_glTexStorage3D:Ss,_emscripten_glTexSubImage2D:Ts,_emscripten_glTexSubImage3D:Ps,_emscripten_glTransformFeedbackVaryings:As,_emscripten_glUniform1f:Cs,_emscripten_glUniform1fv:Ds,_emscripten_glUniform1i:Bs,_emscripten_glUniform1iv:ks,_emscripten_glUniform1ui:Is,_emscripten_glUniform1uiv:Ms,_emscripten_glUniform2f:Fs,_emscripten_glUniform2fv:Rs,_emscripten_glUniform2i:Ls,_emscripten_glUniform2iv:Os,_emscripten_glUniform2ui:Ns,_emscripten_glUniform2uiv:Us,_emscripten_glUniform3f:Gs,_emscripten_glUniform3fv:Vs,_emscripten_glUniform3i:Ws,_emscripten_glUniform3iv:$s,_emscripten_glUniform3ui:js,_emscripten_glUniform3uiv:zs,_emscripten_glUniform4f:Hs,_emscripten_glUniform4fv:qs,_emscripten_glUniform4i:Ys,_emscripten_glUniform4iv:Xs,_emscripten_glUniform4ui:Qs,_emscripten_glUniform4uiv:Ks,_emscripten_glUniformBlockBinding:Zs,_emscripten_glUniformMatrix2fv:Js,_emscripten_glUniformMatrix2x3fv:eu,_emscripten_glUniformMatrix2x4fv:ru,_emscripten_glUniformMatrix3fv:tu,_emscripten_glUniformMatrix3x2fv:nu,_emscripten_glUniformMatrix3x4fv:iu,_emscripten_glUniformMatrix4fv:ou,_emscripten_glUniformMatrix4x2fv:au,_emscripten_glUniformMatrix4x3fv:su,_emscripten_glUnmapBuffer:uu,_emscripten_glUseProgram:cu,_emscripten_glValidateProgram:fu,_emscripten_glVertexAttrib1f:lu,_emscripten_glVertexAttrib1fv:du,_emscripten_glVertexAttrib2f:pu,_emscripten_glVertexAttrib2fv:mu,_emscripten_glVertexAttrib3f:hu,_emscripten_glVertexAttrib3fv:gu,_emscripten_glVertexAttrib4f:yu,_emscripten_glVertexAttrib4fv:vu,_emscripten_glVertexAttribDivisor:_u,_emscripten_glVertexAttribDivisorANGLE:bu,_emscripten_glVertexAttribDivisorARB:Eu,_emscripten_glVertexAttribDivisorEXT:wu,_emscripten_glVertexAttribDivisorNV:xu,_emscripten_glVertexAttribI4i:Su,_emscripten_glVertexAttribI4iv:Tu,_emscripten_glVertexAttribI4ui:Pu,_emscripten_glVertexAttribI4uiv:Au,_emscripten_glVertexAttribIPointer:Cu,_emscripten_glVertexAttribPointer:Du,_emscripten_glViewport:Bu,_emscripten_glWaitSync:ku,_emscripten_memcpy_big:Cf,_emscripten_resize_heap:Fu,_glActiveTexture:Ru,_glAttachShader:Lu,_glBindBuffer:Ou,_glBindBufferRange:Nu,_glBindFramebuffer:Uu,_glBindRenderbuffer:Gu,_glBindSampler:Vu,_glBindTexture:Wu,_glBindVertexArray:$u,_glBlendEquationSeparate:ju,_glBlendFuncSeparate:zu,_glBlitFramebuffer:Hu,_glBufferData:qu,_glBufferSubData:Yu,_glClear:Xu,_glClearColor:Qu,_glClearDepthf:Ku,_glClearStencil:Zu,_glColorMask:Ju,_glCompileShader:ec,_glCompressedTexSubImage2D:rc,_glCompressedTexSubImage3D:tc,_glCreateProgram:nc,_glCreateShader:ic,_glCullFace:oc,_glDeleteBuffers:ac,_glDeleteFramebuffers:sc,_glDeleteProgram:uc,_glDeleteRenderbuffers:cc,_glDeleteSamplers:fc,_glDeleteShader:lc,_glDeleteSync:dc,_glDeleteTextures:pc,_glDeleteVertexArrays:mc,_glDepthFunc:hc,_glDepthMask:gc,_glDetachShader:yc,_glDisable:vc,_glDisableVertexAttribArray:_c,_glDrawArrays:bc,_glDrawElements:Ui,_glDrawRangeElements:Ec,_glEnable:wc,_glEnableVertexAttribArray:xc,_glFenceSync:Sc,_glFlush:Tc,_glFramebufferRenderbuffer:Pc,_glFramebufferTexture2D:Ac,_glFramebufferTextureLayer:Cc,_glFrontFace:Dc,_glGenBuffers:Bc,_glGenFramebuffers:kc,_glGenRenderbuffers:Ic,_glGenSamplers:Mc,_glGenTextures:Fc,_glGenVertexArrays:Rc,_glGenerateMipmap:Lc,_glGetError:Oc,_glGetFloatv:Nc,_glGetIntegerv:Uc,_glGetProgramInfoLog:Gc,_glGetProgramiv:Vc,_glGetShaderInfoLog:Wc,_glGetShaderiv:$c,_glGetString:jc,_glGetStringi:zc,_glGetUniformBlockIndex:Hc,_glGetUniformLocation:qc,_glGetVertexAttribiv:Yc,_glHint:Xc,_glInvalidateFramebuffer:Qc,_glInvalidateSubFramebuffer:Kc,_glIsEnabled:Zc,_glLinkProgram:Jc,_glPixelStorei:ef,_glPolygonOffset:rf,_glReadPixels:tf,_glRenderbufferStorage:nf,_glRenderbufferStorageMultisample:of,_glSamplerParameteri:af,_glScissor:sf,_glShaderSource:uf,_glTexParameteri:cf,_glTexStorage2D:ff,_glTexStorage2DMultisample:lf,_glTexStorage3D:df,_glTexSubImage2D:pf,_glTexSubImage3D:mf,_glUniform1f:hf,_glUniform1i:gf,_glUniform4f:yf,_glUniformBlockBinding:vf,_glUseProgram:_f,_glVertexAttribIPointer:bf,_glVertexAttribPointer:Ef,_glViewport:wf,_glWaitSync:xf,_llvm_exp2_f32:Sf,_llvm_exp2_f64:Tf,_llvm_log2_f32:Pf,_llvm_trap:Af,_pthread_cond_destroy:Df,_pthread_cond_signal:Bf,_pthread_cond_timedwait:kf,_pthread_cond_wait:If,_pthread_create:Mf,_pthread_join:Ff,_sysconf:Rf,abortOnCannotGrowMemory:Iu,constNoSmartPtrRawPointerToWireType:zr,count_emval_handles:Pt,craftInvokerFunction:gt,createNamedFunction:lr,downcastPointer:Kr,embind__requireFunction:ft,embind_init_charCodes:br,emscriptenWebGLGet:bo,emscriptenWebGLGetIndexed:Do,emscriptenWebGLGetTexPixelData:Ya,emscriptenWebGLGetUniform:ua,emscriptenWebGLGetVertexAttrib:da,emscripten_realloc_buffer:Mu,ensureOverloadTable:Vr,enumReadValueFromPointer:kt,exposePublicSymbol:Wr,extendError:dr,floatReadValueFromPointer:Lt,flushPendingDeletes:Lr,genericPointerToWireType:Hr,getBasestPointer:nt,getInheritedInstance:it,getInheritedInstanceCount:Zr,getLiveInheritedInstances:Jr,getShiftFromSize:_r,getStringOrSymbol:en,getTypeName:dt,get_first_emval:At,heap32VectorToArray:yt,init_ClassHandle:Nr,init_RegisteredPointer:st,init_embind:rt,init_emval:Ct,integerReadValueFromPointer:Ut,makeClassHandle:ot,makeLegalFunctionName:fr,new_:ht,nonConstNoSmartPtrRawPointerToWireType:qr,readLatin1String:wr,registerType:Tr,replacePublicSymbol:ct,requireHandle:Xt,requireRegisteredType:Mt,runDestructor:kr,runDestructors:nr,setDelayFunction:et,shallowCopyInternalPointer:Cr,simpleReadValueFromPointer:ir,stringToNewUTF8:Zo,throwBindingError:Sr,throwInstanceAlreadyDeleted:Dr,throwInternalError:mr,throwUnboundTypeError:pt,upcastPointer:jr,validateThis:Et,whenDependentTypesAreResolved:hr,tempDoublePtr:Ce,DYNAMICTOP_PTR:K},Wf=a.asm(Gf,Vf,L);a.asm=Wf;a.___errno_location=function(){return a.asm.___errno_location.apply(null,arguments)};var $f=a.___getTypeName=function(){return a.asm.___getTypeName.apply(null,arguments)},jf=(a._emscripten_GetProcAddress=function(){return a.asm._emscripten_GetProcAddress.apply(null,arguments)},a._emscripten_replace_memory=function(){return a.asm._emscripten_replace_memory.apply(null,arguments)},a._free=function(){return a.asm._free.apply(null,arguments)}),zf=a._i64Subtract=function(){return a.asm._i64Subtract.apply(null,arguments)},Hf=(a._llvm_round_f32=function(){return a.asm._llvm_round_f32.apply(null,arguments)},a._malloc=function(){return a.asm._malloc.apply(null,arguments)}),qf=(a._memcpy=function(){return a.asm._memcpy.apply(null,arguments)},a._memmove=function(){return a.asm._memmove.apply(null,arguments)},a._memset=function(){return a.asm._memset.apply(null,arguments)},a._pthread_cond_broadcast=function(){return a.asm._pthread_cond_broadcast.apply(null,arguments)},a._sbrk=function(){return a.asm._sbrk.apply(null,arguments)},a._strstr=function(){return a.asm._strstr.apply(null,arguments)},a.establishStackSpace=function(){return a.asm.establishStackSpace.apply(null,arguments)},a.globalCtors=function(){return a.asm.globalCtors.apply(null,arguments)});a.stackAlloc=function(){return a.asm.stackAlloc.apply(null,arguments)},a.stackRestore=function(){return a.asm.stackRestore.apply(null,arguments)},a.stackSave=function(){return a.asm.stackSave.apply(null,arguments)},a.dynCall_dii=function(){return a.asm.dynCall_dii.apply(null,arguments)},a.dynCall_fi=function(){return a.asm.dynCall_fi.apply(null,arguments)},a.dynCall_fii=function(){return a.asm.dynCall_fii.apply(null,arguments)},a.dynCall_fiii=function(){return a.asm.dynCall_fiii.apply(null,arguments)},a.dynCall_i=function(){return a.asm.dynCall_i.apply(null,arguments)},a.dynCall_ii=function(){return a.asm.dynCall_ii.apply(null,arguments)},a.dynCall_iif=function(){return a.asm.dynCall_iif.apply(null,arguments)},a.dynCall_iiff=function(){return a.asm.dynCall_iiff.apply(null,arguments)},a.dynCall_iii=function(){return a.asm.dynCall_iii.apply(null,arguments)},a.dynCall_iiif=function(){return a.asm.dynCall_iiif.apply(null,arguments)},a.dynCall_iiiff=function(){return a.asm.dynCall_iiiff.apply(null,arguments)},a.dynCall_iiii=function(){return a.asm.dynCall_iiii.apply(null,arguments)},a.dynCall_iiiii=function(){return a.asm.dynCall_iiiii.apply(null,arguments)},a.dynCall_iiiiii=function(){return a.asm.dynCall_iiiiii.apply(null,arguments)},a.dynCall_iiiiiii=function(){return a.asm.dynCall_iiiiiii.apply(null,arguments)},a.dynCall_iiiiiiii=function(){return a.asm.dynCall_iiiiiiii.apply(null,arguments)},a.dynCall_iiij=function(){return a.asm.dynCall_iiij.apply(null,arguments)},a.dynCall_jii=function(){return a.asm.dynCall_jii.apply(null,arguments)},a.dynCall_v=function(){return a.asm.dynCall_v.apply(null,arguments)},a.dynCall_vf=function(){return a.asm.dynCall_vf.apply(null,arguments)},a.dynCall_vff=function(){return a.asm.dynCall_vff.apply(null,arguments)},a.dynCall_vffff=function(){return a.asm.dynCall_vffff.apply(null,arguments)},a.dynCall_vfi=function(){return a.asm.dynCall_vfi.apply(null,arguments)},a.dynCall_vi=function(){return a.asm.dynCall_vi.apply(null,arguments)},a.dynCall_viddd=function(){return a.asm.dynCall_viddd.apply(null,arguments)},a.dynCall_viddddi=function(){return a.asm.dynCall_viddddi.apply(null,arguments)},a.dynCall_vif=function(){return a.asm.dynCall_vif.apply(null,arguments)},a.dynCall_viff=function(){return a.asm.dynCall_viff.apply(null,arguments)},a.dynCall_vifff=function(){return a.asm.dynCall_vifff.apply(null,arguments)},a.dynCall_viffff=function(){return a.asm.dynCall_viffff.apply(null,arguments)},a.dynCall_vii=function(){return a.asm.dynCall_vii.apply(null,arguments)},a.dynCall_viid=function(){return a.asm.dynCall_viid.apply(null,arguments)},a.dynCall_viidd=function(){return a.asm.dynCall_viidd.apply(null,arguments)},a.dynCall_viiddd=function(){return a.asm.dynCall_viiddd.apply(null,arguments)},a.dynCall_viidddddd=function(){return a.asm.dynCall_viidddddd.apply(null,arguments)},a.dynCall_viiddddi=function(){return a.asm.dynCall_viiddddi.apply(null,arguments)},a.dynCall_viif=function(){return a.asm.dynCall_viif.apply(null,arguments)},a.dynCall_viiff=function(){return a.asm.dynCall_viiff.apply(null,arguments)},a.dynCall_viifff=function(){return a.asm.dynCall_viifff.apply(null,arguments)},a.dynCall_viiffff=function(){return a.asm.dynCall_viiffff.apply(null,arguments)},a.dynCall_viifi=function(){return a.asm.dynCall_viifi.apply(null,arguments)},a.dynCall_viii=function(){return a.asm.dynCall_viii.apply(null,arguments)},a.dynCall_viiidd=function(){return a.asm.dynCall_viiidd.apply(null,arguments)},a.dynCall_viiidddddd=function(){return a.asm.dynCall_viiidddddd.apply(null,arguments)},a.dynCall_viiif=function(){return a.asm.dynCall_viiif.apply(null,arguments)},a.dynCall_viiiffff=function(){return a.asm.dynCall_viiiffff.apply(null,arguments)},a.dynCall_viiii=function(){return a.asm.dynCall_viiii.apply(null,arguments)},a.dynCall_viiiii=function(){return a.asm.dynCall_viiiii.apply(null,arguments)},a.dynCall_viiiiii=function(){return a.asm.dynCall_viiiiii.apply(null,arguments)},a.dynCall_viiiiiii=function(){return a.asm.dynCall_viiiiiii.apply(null,arguments)},a.dynCall_viiiiiiii=function(){return a.asm.dynCall_viiiiiiii.apply(null,arguments)},a.dynCall_viiiiiiiii=function(){return a.asm.dynCall_viiiiiiiii.apply(null,arguments)},a.dynCall_viiiiiiiiii=function(){return a.asm.dynCall_viiiiiiiiii.apply(null,arguments)},a.dynCall_viiiiiiiiiii=function(){return a.asm.dynCall_viiiiiiiiiii.apply(null,arguments)},a.dynCall_viij=function(){return a.asm.dynCall_viij.apply(null,arguments)},a.dynCall_vij=function(){return a.asm.dynCall_vij.apply(null,arguments)};function Yf(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Xf(e){function r(){a.calledRun||(a.calledRun=!0,S||(se(),ue(),a.onRuntimeInitialized&&a.onRuntimeInitialized(),ce()))}e=e||a.arguments,ge>0||(ae(),ge>0||a.calledRun||(a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),r()},1)):r()))}function Qf(e){throw a.onAbort&&a.onAbort(e),void 0!==e?(g(e),y(e),e=JSON.stringify(e)):e="",S=!0,1,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(a.asm=Wf,Yf.prototype=new Error,Yf.prototype.constructor=Yf,ve=function e(){a.calledRun||Xf(),a.calledRun||(ve=e)},a.run=Xf,a.abort=Qf,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();function Kf(r){return("string"==typeof r||r instanceof String)&&(r=e.assets[r]),r.buffer instanceof ArrayBuffer&&(r=e.Buffer(r)),r}function Zf(e,r,t){return Math.max(Math.min(t,e),r)}return a.noExitRuntime=!0,Xf(),e.remainingInitializationTasks=1,e.init=function(r,t){e.onReady=t,e.remainingInitializationTasks+=r.length,e.assets={},"undefined"!=typeof glMatrix&&e.loadMathExtensions(),e.fetch(r,null,function(r){0==--e.remainingInitializationTasks&&e.onReady&&e.onReady()})},e.postRun=function(){e.loadClassExtensions(),0==--e.remainingInitializationTasks&&e.onReady&&e.onReady()},e.fetch=function(r,t,n){var i=r.length;r.forEach(function(r){const o=r.toLowerCase();if(o.endsWith(".jpeg")||o.endsWith(".jpg")){var a=new Image;return a.src=r,a.decoding="async",void(a.onload=function(){e.assets[r]=a,n&&n(r),0==--i&&t&&t()})}fetch(r).then(function(e){if(!e.ok)throw new Error(r);return e.arrayBuffer()}).then(function(o){e.assets[r]=new Uint8Array(o),n&&n(r),0==--i&&t&&t()})})},e.loadClassExtensions=function(){e.Engine.create=function(r,t){t=Object.assign({majorVersion:2,minorVersion:0,antialias:!1,depth:!1,alpha:!1},t);const n=r.getContext("webgl2",t),i=fn.registerContext(n,t);return fn.makeContextCurrent(i),n.getExtension("WEBGL_compressed_texture_s3tc"),n.getExtension("WEBGL_compressed_texture_astc"),n.getExtension("WEBGL_compressed_texture_etc"),e.Engine._create()},e.Engine.prototype.createMaterial=function(e){e=Kf(e);const r=this._createMaterial(e);return e.delete(),r},e.Engine.prototype.createTextureFromKtx=function(r,t){r=Kf(r);const n=e._createTextureFromKtx(r,this,t);return r.delete(),n},e.Engine.prototype.createIblFromKtx=function(r,t){r=Kf(r);const n=e._createIblFromKtx(r,this,t);return r.delete(),n},e.Engine.prototype.createSkyFromKtx=function(r,t){const n=this.createTextureFromKtx(r,t);return e.Skybox.Builder().environment(n).build(this)},e.Engine.prototype.createTextureFromPng=function(r,t){r=Kf(r);const n=e._createTextureFromPng(r,this,t);return r.delete(),n},e.Engine.prototype.createTextureFromJpeg=function(r,t){return t=t||{},("string"==typeof r||r instanceof String)&&(r=e.assets[r]),e._createTextureFromJpeg(r,this,t)},e.Engine.prototype.loadFilamesh=function(r,t,n){r=Kf(r);const i=e._loadFilamesh(this,r,t,n);return r.delete(),i},e.Engine.prototype.createAssetLoader=function(){const r=new e.gltfio$UbershaderLoader(this);return new e.gltfio$AssetLoader(this,r)},e.VertexBuffer.prototype.setBufferAt=function(e,r,t){t=Kf(t),this._setBufferAt(e,r,t),t.delete()},e.IndexBuffer.prototype.setBuffer=function(e,r){r=Kf(r),this._setBuffer(e,r),r.delete()},e.RenderableManager$Builder.prototype.build=e.LightManager$Builder.prototype.build=function(e,r){const t=this._build(e,r);return this.delete(),t},e.RenderTarget$Builder.prototype.build=e.VertexBuffer$Builder.prototype.build=e.IndexBuffer$Builder.prototype.build=e.Texture$Builder.prototype.build=e.IndirectLight$Builder.prototype.build=e.Skybox$Builder.prototype.build=function(e){const r=this._build(e);return this.delete(),r},e.KtxBundle.prototype.getBlob=function(e){const r=this._getBlob(e),t=r.getBytes();return r.delete(),t},e.KtxBundle.prototype.getCubeBlob=function(e){const r=this._getCubeBlob(e),t=r.getBytes();return r.delete(),t},e.Texture.prototype.setImage=function(e,r,t){this._setImage(e,r,t),t.delete()},e.Texture.prototype.setImageCube=function(e,r,t){this._setImageCube(e,r,t),t.delete()},e.SurfaceOrientation$Builder.prototype.build=function(){const e=this._build();return this.delete(),e},e.gltfio$AssetLoader.prototype.createAssetFromJson=function(e){"string"==typeof e&&e.endsWith(".glb")&&console.error("Please use createAssetFromBinary for glb files."),e=Kf(e);const r=this._createAssetFromJson(e);return e.delete(),r},e.gltfio$AssetLoader.prototype.createAssetFromBinary=function(e){"string"==typeof e&&e.endsWith(".gltf")&&console.error("Please use createAssetFromJson for gltf files."),e=Kf(e);const r=this._createAssetFromBinary(e);return e.delete(),r},e.gltfio$FilamentAsset.prototype.loadResources=function(r,t,n){const i=this,o=this.getEngine(),a=this.getResourceUrls(),s=new Set,u={};n=n||document.location;for(var c=0;c<a.size();c++){const e=a.get(c);if(e){const r=""+new URL(e,n);u[r]=e,s.add(r)}}const f=new e.gltfio$ResourceLoader(o),l=function(){const e=function(){f.loadResources(i),window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){f.delete()})})};r?r(e):e()};0!=s.size?e.fetch(Array.from(s),l,function(e){const r=Kf(e),n=u[e];f.addResourceData(n,r),r.delete(),t&&t(n)}):l()}},e.Buffer=function(r){console.assert(r.buffer instanceof ArrayBuffer),console.assert(r.byteLength>0),e.HEAPU32.buffer==r.buffer&&(r=new Uint8Array(r));const t=r,n=new e.driver$BufferDescriptor(t),i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return n.getBytes().set(i),n},e.PixelBuffer=function(r,t,n){console.assert(r.buffer instanceof ArrayBuffer),console.assert(r.byteLength>0),e.HEAPU32.buffer==r.buffer&&(r=new Uint8Array(r));const i=r,o=new e.driver$PixelBufferDescriptor(i,t,n),a=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return o.getBytes().set(a),o},e.CompressedPixelBuffer=function(r,t,n){console.assert(r.buffer instanceof ArrayBuffer),console.assert(r.byteLength>0),n=n||r.byteLength,e.HEAPU32.buffer==r.buffer&&(r=new Uint8Array(r));const i=r,o=new e.driver$PixelBufferDescriptor(i,t,n,!0),a=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return o.getBytes().set(a),o},e._loadFilamesh=function(r,t,n,i){i=i||{};const o=new e.MeshReader$MaterialRegistry;for(var a in i)o.set(a,i[a]);n&&o.set("DefaultMaterial",n);const s=e.MeshReader.loadMeshFromBuffer(r,t,o),u=o.keys();for(var c=0;c<u.size();c++){const e=u.get(c),r=o.get(e);i[e]=r}return{renderable:s.renderable(),vertexBuffer:s.vertexBuffer(),indexBuffer:s.indexBuffer()}},e.IcoSphere=function(r){const t=.5257311121191336,n=.8506508083520399;if(this.vertices=new Float32Array([-t,0,+n,+t,0,+n,-t,0,-n,+t,0,-n,0,+n,+t,0,+n,-t,0,-n,+t,0,-n,-t,+n,+t,0,-n,+t,0,+n,-t,0,-n,-t,0]),this.triangles=new Uint16Array([1,4,0,4,9,0,4,5,9,8,5,4,1,8,4,1,10,8,10,3,8,8,3,5,3,2,5,3,7,2,3,10,7,10,6,7,6,11,7,6,0,11,6,1,0,10,1,6,11,0,9,2,11,9,5,2,9,11,2,7]),r)for(;r-- >0;)this.subdivide();const i=this.vertices.length/3,o=e._malloc(this.vertices.length*this.vertices.BYTES_PER_ELEMENT);a.HEAPU8.set(new Uint8Array(this.vertices.buffer),o);const s=new e.SurfaceOrientation$Builder;s.vertexCount(i),s.normals(o,0);const u=s.build();e._free(o);const c=8*i,f=e._malloc(c);u.getQuats(f,i,e.VertexBuffer$AttributeType.SHORT4);const l=a.HEAPU8.subarray(f,f+c).slice().buffer;e._free(f),this.tangents=new Int16Array(l),u.delete()},e.IcoSphere.prototype.subdivide=function(){const e=this.triangles,r=this.vertices,t=e.length/3,n=4*t,i=r.length/3,o=i+3*t,a=new Uint16Array(3*n),s=new Float32Array(3*o);s.set(r);for(var u=0,c=0,f=3*i,l=f+3,d=l+3,p=0;p<t;p++,f+=9,l+=9,d+=9){const t=3*e[u++],n=3*e[u++],i=3*e[u++],o=r.subarray(t,t+3),p=r.subarray(n,n+3),m=r.subarray(i,i+3),h=s.subarray(f,f+3),g=s.subarray(l,l+3),y=s.subarray(d,d+3);vec3.normalize(h,vec3.add(h,o,p)),vec3.normalize(g,vec3.add(g,p,m)),vec3.normalize(y,vec3.add(y,m,o)),a[c++]=t/3,a[c++]=f/3,a[c++]=d/3,a[c++]=f/3,a[c++]=n/3,a[c++]=l/3,a[c++]=d/3,a[c++]=f/3,a[c++]=l/3,a[c++]=i/3,a[c++]=d/3,a[c++]=l/3}this.triangles=a,this.vertices=s},e.packSnorm16=function(e){return Math.round(32767*Zf(e,-1,1))},e.loadMathExtensions=function(){vec4.packSnorm16=function(r,t){return r[0]=e.packSnorm16(t[0]),r[1]=e.packSnorm16(t[1]),r[2]=e.packSnorm16(t[2]),r[3]=e.packSnorm16(t[3]),r};const r=mat3.fromRotation;mat3.fromRotation=function(e,t,n){return n?mat3.fromMat4(e,mat4.fromRotation(mat4.create(),t,n)):r(e,t)}},e._createTextureFromKtx=function(r,t,n){const i=(n=n||{}).ktx||new e.KtxBundle(r),o=!!n.srgb;return e.KtxUtility$createTexture(t,i,o)},e._createIblFromKtx=function(r,t,n){const i=(n=n||{}).ktx=new e.KtxBundle(r),o=i.info().glInternalFormat;o!=this.ctx.R11F_G11F_B10F&&o!=this.ctx.RGB16F&&o!=this.ctx.RGB32F&&console.warn("IBL texture format is 0x"+o.toString(16)+" which is not an expected floating-point format. Please use cmgen to generate IBL.");const a=e._createTextureFromKtx(r,t,n),s=i.getMetadata("sh").split(/\s/,27).map(parseFloat);return e.IndirectLight.Builder().reflections(a).irradianceSh(3,s).build(t)},e._createTextureFromPng=function(r,t,n){const i=e.Texture$Sampler,o=e.Texture$InternalFormat,a=e.PixelDataFormat,s=!!(n=n||{}).srgb,u=!!n.noalpha,c=!!n.nomips,f=e.decodePng(r,u?3:4);var l,d,p;u?(l=s?o.SRGB8:o.RGB8,d=a.RGB,p=e.PixelDataType.UBYTE):(l=s?o.SRGB8_A8:o.RGBA8,d=a.RGBA,p=e.PixelDataType.UBYTE);const m=e.Texture.Builder().width(f.width).height(f.height).levels(c?1:255).sampler(i.SAMPLER_2D).format(l).build(t),h=e.PixelBuffer(f.data.getBytes(),d,p);return m.setImage(t,0,h),c||m.generateMipmaps(t),m},e._createTextureFromJpeg=function(r,t,n){const i=!!(n=n||{}).srgb,o=!!n.nomips;var a=document.createElement("canvas").getContext("2d");a.canvas.width=r.width,a.canvas.height=r.height,a.width=r.width,a.height=r.height,a.globalCompositeOperation="copy",a.drawImage(r,0,0);var s=a.getImageData(0,0,r.width,r.height).data.buffer,u=new Uint8Array(s);const c=e.Texture$InternalFormat,f=i?c.SRGB8_A8:c.RGBA8,l=e.PixelDataFormat.RGBA,d=e.PixelDataType.UBYTE,p=e.Texture.Builder().width(r.width).height(r.height).levels(o?1:255).sampler(e.Texture$Sampler.SAMPLER_2D).format(f).build(t),m=e.PixelBuffer(u,l,d);return p.setImage(t,0,m),o||p.generateMipmaps(t),p},e.getSupportedFormats=function(){if(e.supportedFormats)return e.supportedFormats;const r={s3tc:!1,astc:!1,etc:!1};var t,n=document.createElement("canvas").getContext("webgl2",{majorVersion:2,minorVersion:0}).getSupportedExtensions(),i=n.length;for(t=0;t<i;t++){var o=n[t];"WEBGL_compressed_texture_s3tc"==o?r.s3tc=!0:"WEBGL_compressed_texture_astc"==o?r.astc=!0:"WEBGL_compressed_texture_etc"==o&&(r.etc=!0)}return e.supportedFormats=r},e.getSupportedFormatSuffix=function(r){r=r.split(" ");var t=e.getSupportedFormats();for(var n in t)if(t[n]&&r.includes(n))return"_"+n;return""},e}("object"==typeof o?o:{});e.exports=o}).call(this,t(10),"/",t(11).Buffer)},function(e,r){e.exports=fs},function(e,r){e.exports=path},,,,,,,,function(e,r){var t,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u,c=[],f=!1,l=-1;function d(){f&&u&&(f=!1,u.length?c=u.concat(c):l=-1,c.length&&p())}function p(){if(!f){var e=s(d);f=!0;for(var r=c.length;r;){for(u=c,c=[];++l<r;)u&&u[l].run();l=-1,r=c.length}u=null,f=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(r){try{return n.call(null,e)}catch(r){return n.call(this,e)}}}(e)}}function m(e,r){this.fun=e,this.array=r}function h(){}i.nextTick=function(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];c.push(new m(e,r)),1!==c.length||f||s(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,r,t){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=t(13),i=t(14),o=t(15);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,r){if(a()<r)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(r)).__proto__=u.prototype:(null===e&&(e=new u(r)),e.length=r),e}function u(e,r,t){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,r,t);if("number"==typeof e){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return c(this,e,r,t)}function c(e,r,t,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?function(e,r,t,n){if(r.byteLength,t<0||r.byteLength<t)throw new RangeError("'offset' is out of bounds");if(r.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");r=void 0===t&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,t):new Uint8Array(r,t,n);u.TYPED_ARRAY_SUPPORT?(e=r).__proto__=u.prototype:e=d(e,r);return e}(e,r,t,n):"string"==typeof r?function(e,r,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=0|m(r,t),i=(e=s(e,n)).write(r,t);i!==n&&(e=e.slice(0,i));return e}(e,r,t):function(e,r){if(u.isBuffer(r)){var t=0|p(r.length);return 0===(e=s(e,t)).length?e:(r.copy(e,0,0,t),e)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||(n=r.length)!=n?s(e,0):d(e,r);if("Buffer"===r.type&&o(r.data))return d(e,r.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,r)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,r){if(f(r),e=s(e,r<0?0:0|p(r)),!u.TYPED_ARRAY_SUPPORT)for(var t=0;t<r;++t)e[t]=0;return e}function d(e,r){var t=r.length<0?0:0|p(r.length);e=s(e,t);for(var n=0;n<t;n+=1)e[n]=255&r[n];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function m(e,r){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var t=e.length;if(0===t)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return W(e).length;default:if(n)return V(e).length;r=(""+r).toLowerCase(),n=!0}}function h(e,r,t){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===t||t>this.length)&&(t=this.length),t<=0)return"";if((t>>>=0)<=(r>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return B(this,r,t);case"utf8":case"utf-8":return P(this,r,t);case"ascii":return C(this,r,t);case"latin1":case"binary":return D(this,r,t);case"base64":return T(this,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,r,t);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,r,t){var n=e[r];e[r]=e[t],e[t]=n}function y(e,r,t,n,i){if(0===e.length)return-1;if("string"==typeof t?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,isNaN(t)&&(t=i?0:e.length-1),t<0&&(t=e.length+t),t>=e.length){if(i)return-1;t=e.length-1}else if(t<0){if(!i)return-1;t=0}if("string"==typeof r&&(r=u.from(r,n)),u.isBuffer(r))return 0===r.length?-1:v(e,r,t,n,i);if("number"==typeof r)return r&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,r,t):Uint8Array.prototype.lastIndexOf.call(e,r,t):v(e,[r],t,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,r,t,n,i){var o,a=1,s=e.length,u=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||r.length<2)return-1;a=2,s/=2,u/=2,t/=2}function c(e,r){return 1===a?e[r]:e.readUInt16BE(r*a)}if(i){var f=-1;for(o=t;o<s;o++)if(c(e,o)===c(r,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===u)return f*a}else-1!==f&&(o-=o-f),f=-1}else for(t+u>s&&(t=s-u),o=t;o>=0;o--){for(var l=!0,d=0;d<u;d++)if(c(e,o+d)!==c(r,d)){l=!1;break}if(l)return o}return-1}function _(e,r,t,n){t=Number(t)||0;var i=e.length-t;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(r.substr(2*a,2),16);if(isNaN(s))return a;e[t+a]=s}return a}function b(e,r,t,n){return $(V(r,e.length-t),e,t,n)}function E(e,r,t,n){return $(function(e){for(var r=[],t=0;t<e.length;++t)r.push(255&e.charCodeAt(t));return r}(r),e,t,n)}function w(e,r,t,n){return E(e,r,t,n)}function x(e,r,t,n){return $(W(r),e,t,n)}function S(e,r,t,n){return $(function(e,r){for(var t,n,i,o=[],a=0;a<e.length&&!((r-=2)<0);++a)t=e.charCodeAt(a),n=t>>8,i=t%256,o.push(i),o.push(n);return o}(r,e.length-t),e,t,n)}function T(e,r,t){return 0===r&&t===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(r,t))}function P(e,r,t){t=Math.min(e.length,t);for(var n=[],i=r;i<t;){var o,a,s,u,c=e[i],f=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=t)switch(l){case 1:c<128&&(f=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(f=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(f=u)}null===f?(f=65533,l=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),i+=l}return function(e){var r=e.length;if(r<=A)return String.fromCharCode.apply(String,e);var t="",n=0;for(;n<r;)t+=String.fromCharCode.apply(String,e.slice(n,n+=A));return t}(n)}r.Buffer=u,r.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},r.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),r.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,r,t){return c(null,e,r,t)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,r,t){return function(e,r,t,n){return f(r),r<=0?s(e,r):void 0!==t?"string"==typeof n?s(e,r).fill(t,n):s(e,r).fill(t):s(e,r)}(null,e,r,t)},u.allocUnsafe=function(e){return l(null,e)},u.allocUnsafeSlow=function(e){return l(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,r){if(!u.isBuffer(e)||!u.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var t=e.length,n=r.length,i=0,o=Math.min(t,n);i<o;++i)if(e[i]!==r[i]){t=e[i],n=r[i];break}return t<n?-1:n<t?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,r){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var t;if(void 0===r)for(r=0,t=0;t<e.length;++t)r+=e[t].length;var n=u.allocUnsafe(r),i=0;for(t=0;t<e.length;++t){var a=e[t];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)g(this,r,r+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)g(this,r,r+3),g(this,r+1,r+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<e;r+=8)g(this,r,r+7),g(this,r+1,r+6),g(this,r+2,r+5),g(this,r+3,r+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):h.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,r,t,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===t&&(t=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||t>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=t)return 0;if(n>=i)return-1;if(r>=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(t>>>=0)-(r>>>=0),s=Math.min(o,a),c=this.slice(n,i),f=e.slice(r,t),l=0;l<s;++l)if(c[l]!==f[l]){o=c[l],a=f[l];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(e,r,t){return-1!==this.indexOf(e,r,t)},u.prototype.indexOf=function(e,r,t){return y(this,e,r,t,!0)},u.prototype.lastIndexOf=function(e,r,t){return y(this,e,r,t,!1)},u.prototype.write=function(e,r,t,n){if(void 0===r)n="utf8",t=this.length,r=0;else if(void 0===t&&"string"==typeof r)n=r,t=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(t)?(t|=0,void 0===n&&(n="utf8")):(n=t,t=void 0)}var i=this.length-r;if((void 0===t||t>i)&&(t=i),e.length>0&&(t<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return _(this,e,r,t);case"utf8":case"utf-8":return b(this,e,r,t);case"ascii":return E(this,e,r,t);case"latin1":case"binary":return w(this,e,r,t);case"base64":return x(this,e,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,r,t);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function C(e,r,t){var n="";t=Math.min(e.length,t);for(var i=r;i<t;++i)n+=String.fromCharCode(127&e[i]);return n}function D(e,r,t){var n="";t=Math.min(e.length,t);for(var i=r;i<t;++i)n+=String.fromCharCode(e[i]);return n}function B(e,r,t){var n=e.length;(!r||r<0)&&(r=0),(!t||t<0||t>n)&&(t=n);for(var i="",o=r;o<t;++o)i+=G(e[o]);return i}function k(e,r,t){for(var n=e.slice(r,t),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function I(e,r,t){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+r>t)throw new RangeError("Trying to access beyond buffer length")}function M(e,r,t,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(t+n>e.length)throw new RangeError("Index out of range")}function F(e,r,t,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(e.length-t,2);i<o;++i)e[t+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function R(e,r,t,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(e.length-t,4);i<o;++i)e[t+i]=r>>>8*(n?i:3-i)&255}function L(e,r,t,n,i,o){if(t+n>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function O(e,r,t,n,o){return o||L(e,0,t,4),i.write(e,r,t,n,23,4),t+4}function N(e,r,t,n,o){return o||L(e,0,t,8),i.write(e,r,t,n,52,8),t+8}u.prototype.slice=function(e,r){var t,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<e&&(r=e),u.TYPED_ARRAY_SUPPORT)(t=this.subarray(e,r)).__proto__=u.prototype;else{var i=r-e;t=new u(i,void 0);for(var o=0;o<i;++o)t[o]=this[o+e]}return t},u.prototype.readUIntLE=function(e,r,t){e|=0,r|=0,t||I(e,r,this.length);for(var n=this[e],i=1,o=0;++o<r&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUIntBE=function(e,r,t){e|=0,r|=0,t||I(e,r,this.length);for(var n=this[e+--r],i=1;r>0&&(i*=256);)n+=this[e+--r]*i;return n},u.prototype.readUInt8=function(e,r){return r||I(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,r){return r||I(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,r){return r||I(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,r){return r||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,r){return r||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,r,t){e|=0,r|=0,t||I(e,r,this.length);for(var n=this[e],i=1,o=0;++o<r&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},u.prototype.readIntBE=function(e,r,t){e|=0,r|=0,t||I(e,r,this.length);for(var n=r,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},u.prototype.readInt8=function(e,r){return r||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,r){r||I(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},u.prototype.readInt16BE=function(e,r){r||I(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},u.prototype.readInt32LE=function(e,r){return r||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,r){return r||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,r){return r||I(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,r){return r||I(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,r){return r||I(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,r){return r||I(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,r,t,n){(e=+e,r|=0,t|=0,n)||M(this,e,r,t,Math.pow(2,8*t)-1,0);var i=1,o=0;for(this[r]=255&e;++o<t&&(i*=256);)this[r+o]=e/i&255;return r+t},u.prototype.writeUIntBE=function(e,r,t,n){(e=+e,r|=0,t|=0,n)||M(this,e,r,t,Math.pow(2,8*t)-1,0);var i=t-1,o=1;for(this[r+i]=255&e;--i>=0&&(o*=256);)this[r+i]=e/o&255;return r+t},u.prototype.writeUInt8=function(e,r,t){return e=+e,r|=0,t||M(this,e,r,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=255&e,r+1},u.prototype.writeUInt16LE=function(e,r,t){return e=+e,r|=0,t||M(this,e,r,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):F(this,e,r,!0),r+2},u.prototype.writeUInt16BE=function(e,r,t){return e=+e,r|=0,t||M(this,e,r,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):F(this,e,r,!1),r+2},u.prototype.writeUInt32LE=function(e,r,t){return e=+e,r|=0,t||M(this,e,r,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e):R(this,e,r,!0),r+4},u.prototype.writeUInt32BE=function(e,r,t){return e=+e,r|=0,t||M(this,e,r,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):R(this,e,r,!1),r+4},u.prototype.writeIntLE=function(e,r,t,n){if(e=+e,r|=0,!n){var i=Math.pow(2,8*t-1);M(this,e,r,t,i-1,-i)}var o=0,a=1,s=0;for(this[r]=255&e;++o<t&&(a*=256);)e<0&&0===s&&0!==this[r+o-1]&&(s=1),this[r+o]=(e/a>>0)-s&255;return r+t},u.prototype.writeIntBE=function(e,r,t,n){if(e=+e,r|=0,!n){var i=Math.pow(2,8*t-1);M(this,e,r,t,i-1,-i)}var o=t-1,a=1,s=0;for(this[r+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[r+o+1]&&(s=1),this[r+o]=(e/a>>0)-s&255;return r+t},u.prototype.writeInt8=function(e,r,t){return e=+e,r|=0,t||M(this,e,r,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=255&e,r+1},u.prototype.writeInt16LE=function(e,r,t){return e=+e,r|=0,t||M(this,e,r,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):F(this,e,r,!0),r+2},u.prototype.writeInt16BE=function(e,r,t){return e=+e,r|=0,t||M(this,e,r,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):F(this,e,r,!1),r+2},u.prototype.writeInt32LE=function(e,r,t){return e=+e,r|=0,t||M(this,e,r,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):R(this,e,r,!0),r+4},u.prototype.writeInt32BE=function(e,r,t){return e=+e,r|=0,t||M(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):R(this,e,r,!1),r+4},u.prototype.writeFloatLE=function(e,r,t){return O(this,e,r,!0,t)},u.prototype.writeFloatBE=function(e,r,t){return O(this,e,r,!1,t)},u.prototype.writeDoubleLE=function(e,r,t){return N(this,e,r,!0,t)},u.prototype.writeDoubleBE=function(e,r,t){return N(this,e,r,!1,t)},u.prototype.copy=function(e,r,t,n){if(t||(t=0),n||0===n||(n=this.length),r>=e.length&&(r=e.length),r||(r=0),n>0&&n<t&&(n=t),n===t)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-r<n-t&&(n=e.length-r+t);var i,o=n-t;if(this===e&&t<r&&r<n)for(i=o-1;i>=0;--i)e[i+r]=this[i+t];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+r]=this[i+t];else Uint8Array.prototype.set.call(e,this.subarray(t,t+o),r);return o},u.prototype.fill=function(e,r,t,n){if("string"==typeof e){if("string"==typeof r?(n=r,r=0,t=this.length):"string"==typeof t&&(n=t,t=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(r<0||this.length<r||this.length<t)throw new RangeError("Out of range index");if(t<=r)return this;var o;if(r>>>=0,t=void 0===t?this.length:t>>>0,e||(e=0),"number"==typeof e)for(o=r;o<t;++o)this[o]=e;else{var a=u.isBuffer(e)?e:V(new u(e,n).toString()),s=a.length;for(o=0;o<t-r;++o)this[o+r]=a[o%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function G(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,r){var t;r=r||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((t=e.charCodeAt(a))>55295&&t<57344){if(!i){if(t>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(r-=3)>-1&&o.push(239,191,189),i=t;continue}t=65536+(i-55296<<10|t-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((r-=1)<0)break;o.push(t)}else if(t<2048){if((r-=2)<0)break;o.push(t>>6|192,63&t|128)}else if(t<65536){if((r-=3)<0)break;o.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return o}function W(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,r,t,n){for(var i=0;i<n&&!(i+t>=r.length||i>=e.length);++i)r[i+t]=e[i];return i}}).call(this,t(12))},function(e,r){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(e,r,t){"use strict";r.byteLength=function(e){var r=c(e),t=r[0],n=r[1];return 3*(t+n)/4-n},r.toByteArray=function(e){var r,t,n=c(e),a=n[0],s=n[1],u=new o(function(e,r,t){return 3*(r+t)/4-t}(0,a,s)),f=0,l=s>0?a-4:a;for(t=0;t<l;t+=4)r=i[e.charCodeAt(t)]<<18|i[e.charCodeAt(t+1)]<<12|i[e.charCodeAt(t+2)]<<6|i[e.charCodeAt(t+3)],u[f++]=r>>16&255,u[f++]=r>>8&255,u[f++]=255&r;2===s&&(r=i[e.charCodeAt(t)]<<2|i[e.charCodeAt(t+1)]>>4,u[f++]=255&r);1===s&&(r=i[e.charCodeAt(t)]<<10|i[e.charCodeAt(t+1)]<<4|i[e.charCodeAt(t+2)]>>2,u[f++]=r>>8&255,u[f++]=255&r);return u},r.fromByteArray=function(e){for(var r,t=e.length,i=t%3,o=[],a=0,s=t-i;a<s;a+=16383)o.push(f(e,a,a+16383>s?s:a+16383));1===i?(r=e[t-1],o.push(n[r>>2]+n[r<<4&63]+"==")):2===i&&(r=(e[t-2]<<8)+e[t-1],o.push(n[r>>10]+n[r>>4&63]+n[r<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function c(e){var r=e.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");return-1===t&&(t=r),[t,t===r?0:4-t%4]}function f(e,r,t){for(var i,o,a=[],s=r;s<t;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,r){r.read=function(e,r,t,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,f=-7,l=t?i-1:0,d=t?-1:1,p=e[r+l];for(l+=d,o=p&(1<<-f)-1,p>>=-f,f+=s;f>0;o=256*o+e[r+l],l+=d,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=n;f>0;a=256*a+e[r+l],l+=d,f-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=c}return(p?-1:1)*a*Math.pow(2,o-n)},r.write=function(e,r,t,n,i,o){var a,s,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,m=n?1:-1,h=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(s=isNaN(r)?1:0,a=f):(a=Math.floor(Math.log(r)/Math.LN2),r*(u=Math.pow(2,-a))<1&&(a--,u*=2),(r+=a+l>=1?d/u:d*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(r*u-1)*Math.pow(2,i),a+=l):(s=r*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[t+p]=255&s,p+=m,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[t+p]=255&a,p+=m,a/=256,c-=8);e[t+p-m]|=128*h}},function(e,r){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},function(e,r){if("undefined"==typeof crypto){var t=new Error("Cannot find module 'crypto'");throw t.code="MODULE_NOT_FOUND",t}e.exports=crypto},function(e,r,t){"use strict";t.r(r);var n={};t.r(n),t.d(n,"EPSILON",function(){return s}),t.d(n,"ARRAY_TYPE",function(){return u}),t.d(n,"RANDOM",function(){return c}),t.d(n,"setMatrixArrayType",function(){return f}),t.d(n,"toRadian",function(){return d}),t.d(n,"equals",function(){return p});var i={};t.r(i),t.d(i,"create",function(){return m}),t.d(i,"clone",function(){return h}),t.d(i,"copy",function(){return g}),t.d(i,"fromValues",function(){return y}),t.d(i,"set",function(){return v}),t.d(i,"identity",function(){return _}),t.d(i,"transpose",function(){return b}),t.d(i,"invert",function(){return E}),t.d(i,"adjoint",function(){return w}),t.d(i,"determinant",function(){return x}),t.d(i,"multiply",function(){return S}),t.d(i,"translate",function(){return T}),t.d(i,"scale",function(){return P}),t.d(i,"rotate",function(){return A}),t.d(i,"rotateX",function(){return C}),t.d(i,"rotateY",function(){return D}),t.d(i,"rotateZ",function(){return B}),t.d(i,"fromTranslation",function(){return k}),t.d(i,"fromScaling",function(){return I}),t.d(i,"fromRotation",function(){return M}),t.d(i,"fromXRotation",function(){return F}),t.d(i,"fromYRotation",function(){return R}),t.d(i,"fromZRotation",function(){return L}),t.d(i,"fromRotationTranslation",function(){return O}),t.d(i,"fromQuat2",function(){return N}),t.d(i,"getTranslation",function(){return U}),t.d(i,"getScaling",function(){return G}),t.d(i,"getRotation",function(){return V}),t.d(i,"fromRotationTranslationScale",function(){return W}),t.d(i,"fromRotationTranslationScaleOrigin",function(){return $}),t.d(i,"fromQuat",function(){return j}),t.d(i,"frustum",function(){return z}),t.d(i,"perspective",function(){return H}),t.d(i,"perspectiveFromFieldOfView",function(){return q}),t.d(i,"ortho",function(){return Y}),t.d(i,"lookAt",function(){return X}),t.d(i,"targetTo",function(){return Q}),t.d(i,"str",function(){return K}),t.d(i,"frob",function(){return Z}),t.d(i,"add",function(){return J}),t.d(i,"subtract",function(){return ee}),t.d(i,"multiplyScalar",function(){return re}),t.d(i,"multiplyScalarAndAdd",function(){return te}),t.d(i,"exactEquals",function(){return ne}),t.d(i,"equals",function(){return ie}),t.d(i,"mul",function(){return oe}),t.d(i,"sub",function(){return ae});var o={};t.r(o),t.d(o,"create",function(){return se}),t.d(o,"clone",function(){return ue}),t.d(o,"length",function(){return ce}),t.d(o,"fromValues",function(){return fe}),t.d(o,"copy",function(){return le}),t.d(o,"set",function(){return de}),t.d(o,"add",function(){return pe}),t.d(o,"subtract",function(){return me}),t.d(o,"multiply",function(){return he}),t.d(o,"divide",function(){return ge}),t.d(o,"ceil",function(){return ye}),t.d(o,"floor",function(){return ve}),t.d(o,"min",function(){return _e}),t.d(o,"max",function(){return be}),t.d(o,"round",function(){return Ee}),t.d(o,"scale",function(){return we}),t.d(o,"scaleAndAdd",function(){return xe}),t.d(o,"distance",function(){return Se}),t.d(o,"squaredDistance",function(){return Te}),t.d(o,"squaredLength",function(){return Pe}),t.d(o,"negate",function(){return Ae}),t.d(o,"inverse",function(){return Ce}),t.d(o,"normalize",function(){return De}),t.d(o,"dot",function(){return Be}),t.d(o,"cross",function(){return ke}),t.d(o,"lerp",function(){return Ie}),t.d(o,"hermite",function(){return Me}),t.d(o,"bezier",function(){return Fe}),t.d(o,"random",function(){return Re}),t.d(o,"transformMat4",function(){return Le}),t.d(o,"transformMat3",function(){return Oe}),t.d(o,"transformQuat",function(){return Ne}),t.d(o,"rotateX",function(){return Ue}),t.d(o,"rotateY",function(){return Ge}),t.d(o,"rotateZ",function(){return Ve}),t.d(o,"angle",function(){return We}),t.d(o,"str",function(){return $e}),t.d(o,"exactEquals",function(){return je}),t.d(o,"equals",function(){return ze}),t.d(o,"sub",function(){return qe}),t.d(o,"mul",function(){return Ye}),t.d(o,"div",function(){return Xe}),t.d(o,"dist",function(){return Qe}),t.d(o,"sqrDist",function(){return Ke}),t.d(o,"len",function(){return Ze}),t.d(o,"sqrLen",function(){return Je}),t.d(o,"forEach",function(){return er});var a=t(0),s=1e-6,u="undefined"!=typeof Float32Array?Float32Array:Array,c=Math.random;function f(e){u=e}var l=Math.PI/180;function d(e){return e*l}function p(e,r){return Math.abs(e-r)<=s*Math.max(1,Math.abs(e),Math.abs(r))}function m(){var e=new u(16);return u!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function h(e){var r=new u(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function g(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function y(e,r,t,n,i,o,a,s,c,f,l,d,p,m,h,g){var y=new u(16);return y[0]=e,y[1]=r,y[2]=t,y[3]=n,y[4]=i,y[5]=o,y[6]=a,y[7]=s,y[8]=c,y[9]=f,y[10]=l,y[11]=d,y[12]=p,y[13]=m,y[14]=h,y[15]=g,y}function v(e,r,t,n,i,o,a,s,u,c,f,l,d,p,m,h,g){return e[0]=r,e[1]=t,e[2]=n,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e[8]=c,e[9]=f,e[10]=l,e[11]=d,e[12]=p,e[13]=m,e[14]=h,e[15]=g,e}function _(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function b(e,r){if(e===r){var t=r[1],n=r[2],i=r[3],o=r[6],a=r[7],s=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=t,e[6]=r[9],e[7]=r[13],e[8]=n,e[9]=o,e[11]=r[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}function E(e,r){var t=r[0],n=r[1],i=r[2],o=r[3],a=r[4],s=r[5],u=r[6],c=r[7],f=r[8],l=r[9],d=r[10],p=r[11],m=r[12],h=r[13],g=r[14],y=r[15],v=t*s-n*a,_=t*u-i*a,b=t*c-o*a,E=n*u-i*s,w=n*c-o*s,x=i*c-o*u,S=f*h-l*m,T=f*g-d*m,P=f*y-p*m,A=l*g-d*h,C=l*y-p*h,D=d*y-p*g,B=v*D-_*C+b*A+E*P-w*T+x*S;return B?(B=1/B,e[0]=(s*D-u*C+c*A)*B,e[1]=(i*C-n*D-o*A)*B,e[2]=(h*x-g*w+y*E)*B,e[3]=(d*w-l*x-p*E)*B,e[4]=(u*P-a*D-c*T)*B,e[5]=(t*D-i*P+o*T)*B,e[6]=(g*b-m*x-y*_)*B,e[7]=(f*x-d*b+p*_)*B,e[8]=(a*C-s*P+c*S)*B,e[9]=(n*P-t*C-o*S)*B,e[10]=(m*w-h*b+y*v)*B,e[11]=(l*b-f*w-p*v)*B,e[12]=(s*T-a*A-u*S)*B,e[13]=(t*A-n*T+i*S)*B,e[14]=(h*_-m*E-g*v)*B,e[15]=(f*E-l*_+d*v)*B,e):null}function w(e,r){var t=r[0],n=r[1],i=r[2],o=r[3],a=r[4],s=r[5],u=r[6],c=r[7],f=r[8],l=r[9],d=r[10],p=r[11],m=r[12],h=r[13],g=r[14],y=r[15];return e[0]=s*(d*y-p*g)-l*(u*y-c*g)+h*(u*p-c*d),e[1]=-(n*(d*y-p*g)-l*(i*y-o*g)+h*(i*p-o*d)),e[2]=n*(u*y-c*g)-s*(i*y-o*g)+h*(i*c-o*u),e[3]=-(n*(u*p-c*d)-s*(i*p-o*d)+l*(i*c-o*u)),e[4]=-(a*(d*y-p*g)-f*(u*y-c*g)+m*(u*p-c*d)),e[5]=t*(d*y-p*g)-f*(i*y-o*g)+m*(i*p-o*d),e[6]=-(t*(u*y-c*g)-a*(i*y-o*g)+m*(i*c-o*u)),e[7]=t*(u*p-c*d)-a*(i*p-o*d)+f*(i*c-o*u),e[8]=a*(l*y-p*h)-f*(s*y-c*h)+m*(s*p-c*l),e[9]=-(t*(l*y-p*h)-f*(n*y-o*h)+m*(n*p-o*l)),e[10]=t*(s*y-c*h)-a*(n*y-o*h)+m*(n*c-o*s),e[11]=-(t*(s*p-c*l)-a*(n*p-o*l)+f*(n*c-o*s)),e[12]=-(a*(l*g-d*h)-f*(s*g-u*h)+m*(s*d-u*l)),e[13]=t*(l*g-d*h)-f*(n*g-i*h)+m*(n*d-i*l),e[14]=-(t*(s*g-u*h)-a*(n*g-i*h)+m*(n*u-i*s)),e[15]=t*(s*d-u*l)-a*(n*d-i*l)+f*(n*u-i*s),e}function x(e){var r=e[0],t=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],f=e[9],l=e[10],d=e[11],p=e[12],m=e[13],h=e[14],g=e[15];return(r*a-t*o)*(l*g-d*h)-(r*s-n*o)*(f*g-d*m)+(r*u-i*o)*(f*h-l*m)+(t*s-n*a)*(c*g-d*p)-(t*u-i*a)*(c*h-l*p)+(n*u-i*s)*(c*m-f*p)}function S(e,r,t){var n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],c=r[6],f=r[7],l=r[8],d=r[9],p=r[10],m=r[11],h=r[12],g=r[13],y=r[14],v=r[15],_=t[0],b=t[1],E=t[2],w=t[3];return e[0]=_*n+b*s+E*l+w*h,e[1]=_*i+b*u+E*d+w*g,e[2]=_*o+b*c+E*p+w*y,e[3]=_*a+b*f+E*m+w*v,_=t[4],b=t[5],E=t[6],w=t[7],e[4]=_*n+b*s+E*l+w*h,e[5]=_*i+b*u+E*d+w*g,e[6]=_*o+b*c+E*p+w*y,e[7]=_*a+b*f+E*m+w*v,_=t[8],b=t[9],E=t[10],w=t[11],e[8]=_*n+b*s+E*l+w*h,e[9]=_*i+b*u+E*d+w*g,e[10]=_*o+b*c+E*p+w*y,e[11]=_*a+b*f+E*m+w*v,_=t[12],b=t[13],E=t[14],w=t[15],e[12]=_*n+b*s+E*l+w*h,e[13]=_*i+b*u+E*d+w*g,e[14]=_*o+b*c+E*p+w*y,e[15]=_*a+b*f+E*m+w*v,e}function T(e,r,t){var n=t[0],i=t[1],o=t[2],a=void 0,s=void 0,u=void 0,c=void 0,f=void 0,l=void 0,d=void 0,p=void 0,m=void 0,h=void 0,g=void 0,y=void 0;return r===e?(e[12]=r[0]*n+r[4]*i+r[8]*o+r[12],e[13]=r[1]*n+r[5]*i+r[9]*o+r[13],e[14]=r[2]*n+r[6]*i+r[10]*o+r[14],e[15]=r[3]*n+r[7]*i+r[11]*o+r[15]):(a=r[0],s=r[1],u=r[2],c=r[3],f=r[4],l=r[5],d=r[6],p=r[7],m=r[8],h=r[9],g=r[10],y=r[11],e[0]=a,e[1]=s,e[2]=u,e[3]=c,e[4]=f,e[5]=l,e[6]=d,e[7]=p,e[8]=m,e[9]=h,e[10]=g,e[11]=y,e[12]=a*n+f*i+m*o+r[12],e[13]=s*n+l*i+h*o+r[13],e[14]=u*n+d*i+g*o+r[14],e[15]=c*n+p*i+y*o+r[15]),e}function P(e,r,t){var n=t[0],i=t[1],o=t[2];return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=r[3]*n,e[4]=r[4]*i,e[5]=r[5]*i,e[6]=r[6]*i,e[7]=r[7]*i,e[8]=r[8]*o,e[9]=r[9]*o,e[10]=r[10]*o,e[11]=r[11]*o,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function A(e,r,t,n){var i,o,a,u,c,f,l,d,p,m,h,g,y,v,_,b,E,w,x,S,T,P,A,C,D=n[0],B=n[1],k=n[2],I=Math.sqrt(D*D+B*B+k*k);return I<s?null:(D*=I=1/I,B*=I,k*=I,i=Math.sin(t),a=1-(o=Math.cos(t)),u=r[0],c=r[1],f=r[2],l=r[3],d=r[4],p=r[5],m=r[6],h=r[7],g=r[8],y=r[9],v=r[10],_=r[11],b=D*D*a+o,E=B*D*a+k*i,w=k*D*a-B*i,x=D*B*a-k*i,S=B*B*a+o,T=k*B*a+D*i,P=D*k*a+B*i,A=B*k*a-D*i,C=k*k*a+o,e[0]=u*b+d*E+g*w,e[1]=c*b+p*E+y*w,e[2]=f*b+m*E+v*w,e[3]=l*b+h*E+_*w,e[4]=u*x+d*S+g*T,e[5]=c*x+p*S+y*T,e[6]=f*x+m*S+v*T,e[7]=l*x+h*S+_*T,e[8]=u*P+d*A+g*C,e[9]=c*P+p*A+y*C,e[10]=f*P+m*A+v*C,e[11]=l*P+h*A+_*C,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}function C(e,r,t){var n=Math.sin(t),i=Math.cos(t),o=r[4],a=r[5],s=r[6],u=r[7],c=r[8],f=r[9],l=r[10],d=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=o*i+c*n,e[5]=a*i+f*n,e[6]=s*i+l*n,e[7]=u*i+d*n,e[8]=c*i-o*n,e[9]=f*i-a*n,e[10]=l*i-s*n,e[11]=d*i-u*n,e}function D(e,r,t){var n=Math.sin(t),i=Math.cos(t),o=r[0],a=r[1],s=r[2],u=r[3],c=r[8],f=r[9],l=r[10],d=r[11];return r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=o*i-c*n,e[1]=a*i-f*n,e[2]=s*i-l*n,e[3]=u*i-d*n,e[8]=o*n+c*i,e[9]=a*n+f*i,e[10]=s*n+l*i,e[11]=u*n+d*i,e}function B(e,r,t){var n=Math.sin(t),i=Math.cos(t),o=r[0],a=r[1],s=r[2],u=r[3],c=r[4],f=r[5],l=r[6],d=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=o*i+c*n,e[1]=a*i+f*n,e[2]=s*i+l*n,e[3]=u*i+d*n,e[4]=c*i-o*n,e[5]=f*i-a*n,e[6]=l*i-s*n,e[7]=d*i-u*n,e}function k(e,r){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function I(e,r){return e[0]=r[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=r[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function M(e,r,t){var n,i,o,a=t[0],u=t[1],c=t[2],f=Math.sqrt(a*a+u*u+c*c);return f<s?null:(a*=f=1/f,u*=f,c*=f,n=Math.sin(r),o=1-(i=Math.cos(r)),e[0]=a*a*o+i,e[1]=u*a*o+c*n,e[2]=c*a*o-u*n,e[3]=0,e[4]=a*u*o-c*n,e[5]=u*u*o+i,e[6]=c*u*o+a*n,e[7]=0,e[8]=a*c*o+u*n,e[9]=u*c*o-a*n,e[10]=c*c*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function F(e,r){var t=Math.sin(r),n=Math.cos(r);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=t,e[7]=0,e[8]=0,e[9]=-t,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function R(e,r){var t=Math.sin(r),n=Math.cos(r);return e[0]=n,e[1]=0,e[2]=-t,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=t,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function L(e,r){var t=Math.sin(r),n=Math.cos(r);return e[0]=n,e[1]=t,e[2]=0,e[3]=0,e[4]=-t,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function O(e,r,t){var n=r[0],i=r[1],o=r[2],a=r[3],s=n+n,u=i+i,c=o+o,f=n*s,l=n*u,d=n*c,p=i*u,m=i*c,h=o*c,g=a*s,y=a*u,v=a*c;return e[0]=1-(p+h),e[1]=l+v,e[2]=d-y,e[3]=0,e[4]=l-v,e[5]=1-(f+h),e[6]=m+g,e[7]=0,e[8]=d+y,e[9]=m-g,e[10]=1-(f+p),e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function N(e,r){var t=new u(3),n=-r[0],i=-r[1],o=-r[2],a=r[3],s=r[4],c=r[5],f=r[6],l=r[7],d=n*n+i*i+o*o+a*a;return d>0?(t[0]=2*(s*a+l*n+c*o-f*i)/d,t[1]=2*(c*a+l*i+f*n-s*o)/d,t[2]=2*(f*a+l*o+s*i-c*n)/d):(t[0]=2*(s*a+l*n+c*o-f*i),t[1]=2*(c*a+l*i+f*n-s*o),t[2]=2*(f*a+l*o+s*i-c*n)),O(e,r,t),e}function U(e,r){return e[0]=r[12],e[1]=r[13],e[2]=r[14],e}function G(e,r){var t=r[0],n=r[1],i=r[2],o=r[4],a=r[5],s=r[6],u=r[8],c=r[9],f=r[10];return e[0]=Math.sqrt(t*t+n*n+i*i),e[1]=Math.sqrt(o*o+a*a+s*s),e[2]=Math.sqrt(u*u+c*c+f*f),e}function V(e,r){var t=r[0]+r[5]+r[10],n=0;return t>0?(n=2*Math.sqrt(t+1),e[3]=.25*n,e[0]=(r[6]-r[9])/n,e[1]=(r[8]-r[2])/n,e[2]=(r[1]-r[4])/n):r[0]>r[5]&&r[0]>r[10]?(n=2*Math.sqrt(1+r[0]-r[5]-r[10]),e[3]=(r[6]-r[9])/n,e[0]=.25*n,e[1]=(r[1]+r[4])/n,e[2]=(r[8]+r[2])/n):r[5]>r[10]?(n=2*Math.sqrt(1+r[5]-r[0]-r[10]),e[3]=(r[8]-r[2])/n,e[0]=(r[1]+r[4])/n,e[1]=.25*n,e[2]=(r[6]+r[9])/n):(n=2*Math.sqrt(1+r[10]-r[0]-r[5]),e[3]=(r[1]-r[4])/n,e[0]=(r[8]+r[2])/n,e[1]=(r[6]+r[9])/n,e[2]=.25*n),e}function W(e,r,t,n){var i=r[0],o=r[1],a=r[2],s=r[3],u=i+i,c=o+o,f=a+a,l=i*u,d=i*c,p=i*f,m=o*c,h=o*f,g=a*f,y=s*u,v=s*c,_=s*f,b=n[0],E=n[1],w=n[2];return e[0]=(1-(m+g))*b,e[1]=(d+_)*b,e[2]=(p-v)*b,e[3]=0,e[4]=(d-_)*E,e[5]=(1-(l+g))*E,e[6]=(h+y)*E,e[7]=0,e[8]=(p+v)*w,e[9]=(h-y)*w,e[10]=(1-(l+m))*w,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function $(e,r,t,n,i){var o=r[0],a=r[1],s=r[2],u=r[3],c=o+o,f=a+a,l=s+s,d=o*c,p=o*f,m=o*l,h=a*f,g=a*l,y=s*l,v=u*c,_=u*f,b=u*l,E=n[0],w=n[1],x=n[2],S=i[0],T=i[1],P=i[2],A=(1-(h+y))*E,C=(p+b)*E,D=(m-_)*E,B=(p-b)*w,k=(1-(d+y))*w,I=(g+v)*w,M=(m+_)*x,F=(g-v)*x,R=(1-(d+h))*x;return e[0]=A,e[1]=C,e[2]=D,e[3]=0,e[4]=B,e[5]=k,e[6]=I,e[7]=0,e[8]=M,e[9]=F,e[10]=R,e[11]=0,e[12]=t[0]+S-(A*S+B*T+M*P),e[13]=t[1]+T-(C*S+k*T+F*P),e[14]=t[2]+P-(D*S+I*T+R*P),e[15]=1,e}function j(e,r){var t=r[0],n=r[1],i=r[2],o=r[3],a=t+t,s=n+n,u=i+i,c=t*a,f=n*a,l=n*s,d=i*a,p=i*s,m=i*u,h=o*a,g=o*s,y=o*u;return e[0]=1-l-m,e[1]=f+y,e[2]=d-g,e[3]=0,e[4]=f-y,e[5]=1-c-m,e[6]=p+h,e[7]=0,e[8]=d+g,e[9]=p-h,e[10]=1-c-l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function z(e,r,t,n,i,o,a){var s=1/(t-r),u=1/(i-n),c=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(t+r)*s,e[9]=(i+n)*u,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e}function H(e,r,t,n,i){var o=1/Math.tan(r/2),a=void 0;return e[0]=o/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e}function q(e,r,t,n){var i=Math.tan(r.upDegrees*Math.PI/180),o=Math.tan(r.downDegrees*Math.PI/180),a=Math.tan(r.leftDegrees*Math.PI/180),s=Math.tan(r.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-s)*u*.5,e[9]=(i-o)*c*.5,e[10]=n/(t-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*t/(t-n),e[15]=0,e}function Y(e,r,t,n,i,o,a){var s=1/(r-t),u=1/(n-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(r+t)*s,e[13]=(i+n)*u,e[14]=(a+o)*c,e[15]=1,e}function X(e,r,t,n){var i=void 0,o=void 0,a=void 0,u=void 0,c=void 0,f=void 0,l=void 0,d=void 0,p=void 0,m=void 0,h=r[0],g=r[1],y=r[2],v=n[0],b=n[1],E=n[2],w=t[0],x=t[1],S=t[2];return Math.abs(h-w)<s&&Math.abs(g-x)<s&&Math.abs(y-S)<s?_(e):(l=h-w,d=g-x,p=y-S,i=b*(p*=m=1/Math.sqrt(l*l+d*d+p*p))-E*(d*=m),o=E*(l*=m)-v*p,a=v*d-b*l,(m=Math.sqrt(i*i+o*o+a*a))?(i*=m=1/m,o*=m,a*=m):(i=0,o=0,a=0),u=d*a-p*o,c=p*i-l*a,f=l*o-d*i,(m=Math.sqrt(u*u+c*c+f*f))?(u*=m=1/m,c*=m,f*=m):(u=0,c=0,f=0),e[0]=i,e[1]=u,e[2]=l,e[3]=0,e[4]=o,e[5]=c,e[6]=d,e[7]=0,e[8]=a,e[9]=f,e[10]=p,e[11]=0,e[12]=-(i*h+o*g+a*y),e[13]=-(u*h+c*g+f*y),e[14]=-(l*h+d*g+p*y),e[15]=1,e)}function Q(e,r,t,n){var i=r[0],o=r[1],a=r[2],s=n[0],u=n[1],c=n[2],f=i-t[0],l=o-t[1],d=a-t[2],p=f*f+l*l+d*d;p>0&&(f*=p=1/Math.sqrt(p),l*=p,d*=p);var m=u*d-c*l,h=c*f-s*d,g=s*l-u*f;return(p=m*m+h*h+g*g)>0&&(m*=p=1/Math.sqrt(p),h*=p,g*=p),e[0]=m,e[1]=h,e[2]=g,e[3]=0,e[4]=l*g-d*h,e[5]=d*m-f*g,e[6]=f*h-l*m,e[7]=0,e[8]=f,e[9]=l,e[10]=d,e[11]=0,e[12]=i,e[13]=o,e[14]=a,e[15]=1,e}function K(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Z(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))}function J(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e[3]=r[3]+t[3],e[4]=r[4]+t[4],e[5]=r[5]+t[5],e[6]=r[6]+t[6],e[7]=r[7]+t[7],e[8]=r[8]+t[8],e[9]=r[9]+t[9],e[10]=r[10]+t[10],e[11]=r[11]+t[11],e[12]=r[12]+t[12],e[13]=r[13]+t[13],e[14]=r[14]+t[14],e[15]=r[15]+t[15],e}function ee(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e[3]=r[3]-t[3],e[4]=r[4]-t[4],e[5]=r[5]-t[5],e[6]=r[6]-t[6],e[7]=r[7]-t[7],e[8]=r[8]-t[8],e[9]=r[9]-t[9],e[10]=r[10]-t[10],e[11]=r[11]-t[11],e[12]=r[12]-t[12],e[13]=r[13]-t[13],e[14]=r[14]-t[14],e[15]=r[15]-t[15],e}function re(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e[3]=r[3]*t,e[4]=r[4]*t,e[5]=r[5]*t,e[6]=r[6]*t,e[7]=r[7]*t,e[8]=r[8]*t,e[9]=r[9]*t,e[10]=r[10]*t,e[11]=r[11]*t,e[12]=r[12]*t,e[13]=r[13]*t,e[14]=r[14]*t,e[15]=r[15]*t,e}function te(e,r,t,n){return e[0]=r[0]+t[0]*n,e[1]=r[1]+t[1]*n,e[2]=r[2]+t[2]*n,e[3]=r[3]+t[3]*n,e[4]=r[4]+t[4]*n,e[5]=r[5]+t[5]*n,e[6]=r[6]+t[6]*n,e[7]=r[7]+t[7]*n,e[8]=r[8]+t[8]*n,e[9]=r[9]+t[9]*n,e[10]=r[10]+t[10]*n,e[11]=r[11]+t[11]*n,e[12]=r[12]+t[12]*n,e[13]=r[13]+t[13]*n,e[14]=r[14]+t[14]*n,e[15]=r[15]+t[15]*n,e}function ne(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&e[4]===r[4]&&e[5]===r[5]&&e[6]===r[6]&&e[7]===r[7]&&e[8]===r[8]&&e[9]===r[9]&&e[10]===r[10]&&e[11]===r[11]&&e[12]===r[12]&&e[13]===r[13]&&e[14]===r[14]&&e[15]===r[15]}function ie(e,r){var t=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],c=e[6],f=e[7],l=e[8],d=e[9],p=e[10],m=e[11],h=e[12],g=e[13],y=e[14],v=e[15],_=r[0],b=r[1],E=r[2],w=r[3],x=r[4],S=r[5],T=r[6],P=r[7],A=r[8],C=r[9],D=r[10],B=r[11],k=r[12],I=r[13],M=r[14],F=r[15];return Math.abs(t-_)<=s*Math.max(1,Math.abs(t),Math.abs(_))&&Math.abs(n-b)<=s*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(i-E)<=s*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(o-w)<=s*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-x)<=s*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(u-S)<=s*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-T)<=s*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(f-P)<=s*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(l-A)<=s*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(d-C)<=s*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-D)<=s*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(m-B)<=s*Math.max(1,Math.abs(m),Math.abs(B))&&Math.abs(h-k)<=s*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(g-I)<=s*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(y-M)<=s*Math.max(1,Math.abs(y),Math.abs(M))&&Math.abs(v-F)<=s*Math.max(1,Math.abs(v),Math.abs(F))}var oe=S,ae=ee;function se(){var e=new u(3);return u!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ue(e){var r=new u(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function ce(e){var r=e[0],t=e[1],n=e[2];return Math.sqrt(r*r+t*t+n*n)}function fe(e,r,t){var n=new u(3);return n[0]=e,n[1]=r,n[2]=t,n}function le(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function de(e,r,t,n){return e[0]=r,e[1]=t,e[2]=n,e}function pe(e,r,t){return e[0]=r[0]+t[0],e[1]=r[1]+t[1],e[2]=r[2]+t[2],e}function me(e,r,t){return e[0]=r[0]-t[0],e[1]=r[1]-t[1],e[2]=r[2]-t[2],e}function he(e,r,t){return e[0]=r[0]*t[0],e[1]=r[1]*t[1],e[2]=r[2]*t[2],e}function ge(e,r,t){return e[0]=r[0]/t[0],e[1]=r[1]/t[1],e[2]=r[2]/t[2],e}function ye(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e}function ve(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e}function _e(e,r,t){return e[0]=Math.min(r[0],t[0]),e[1]=Math.min(r[1],t[1]),e[2]=Math.min(r[2],t[2]),e}function be(e,r,t){return e[0]=Math.max(r[0],t[0]),e[1]=Math.max(r[1],t[1]),e[2]=Math.max(r[2],t[2]),e}function Ee(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e}function we(e,r,t){return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e}function xe(e,r,t,n){return e[0]=r[0]+t[0]*n,e[1]=r[1]+t[1]*n,e[2]=r[2]+t[2]*n,e}function Se(e,r){var t=r[0]-e[0],n=r[1]-e[1],i=r[2]-e[2];return Math.sqrt(t*t+n*n+i*i)}function Te(e,r){var t=r[0]-e[0],n=r[1]-e[1],i=r[2]-e[2];return t*t+n*n+i*i}function Pe(e){var r=e[0],t=e[1],n=e[2];return r*r+t*t+n*n}function Ae(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e}function Ce(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e}function De(e,r){var t=r[0],n=r[1],i=r[2],o=t*t+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=r[0]*o,e[1]=r[1]*o,e[2]=r[2]*o),e}function Be(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function ke(e,r,t){var n=r[0],i=r[1],o=r[2],a=t[0],s=t[1],u=t[2];return e[0]=i*u-o*s,e[1]=o*a-n*u,e[2]=n*s-i*a,e}function Ie(e,r,t,n){var i=r[0],o=r[1],a=r[2];return e[0]=i+n*(t[0]-i),e[1]=o+n*(t[1]-o),e[2]=a+n*(t[2]-a),e}function Me(e,r,t,n,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),f=a*(3-2*o);return e[0]=r[0]*s+t[0]*u+n[0]*c+i[0]*f,e[1]=r[1]*s+t[1]*u+n[1]*c+i[1]*f,e[2]=r[2]*s+t[2]*u+n[2]*c+i[2]*f,e}function Fe(e,r,t,n,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,f=3*o*s,l=3*u*a,d=u*o;return e[0]=r[0]*c+t[0]*f+n[0]*l+i[0]*d,e[1]=r[1]*c+t[1]*f+n[1]*l+i[1]*d,e[2]=r[2]*c+t[2]*f+n[2]*l+i[2]*d,e}function Re(e,r){r=r||1;var t=2*c()*Math.PI,n=2*c()-1,i=Math.sqrt(1-n*n)*r;return e[0]=Math.cos(t)*i,e[1]=Math.sin(t)*i,e[2]=n*r,e}function Le(e,r,t){var n=r[0],i=r[1],o=r[2],a=t[3]*n+t[7]*i+t[11]*o+t[15];return a=a||1,e[0]=(t[0]*n+t[4]*i+t[8]*o+t[12])/a,e[1]=(t[1]*n+t[5]*i+t[9]*o+t[13])/a,e[2]=(t[2]*n+t[6]*i+t[10]*o+t[14])/a,e}function Oe(e,r,t){var n=r[0],i=r[1],o=r[2];return e[0]=n*t[0]+i*t[3]+o*t[6],e[1]=n*t[1]+i*t[4]+o*t[7],e[2]=n*t[2]+i*t[5]+o*t[8],e}function Ne(e,r,t){var n=t[0],i=t[1],o=t[2],a=t[3],s=r[0],u=r[1],c=r[2],f=i*c-o*u,l=o*s-n*c,d=n*u-i*s,p=i*d-o*l,m=o*f-n*d,h=n*l-i*f,g=2*a;return f*=g,l*=g,d*=g,p*=2,m*=2,h*=2,e[0]=s+f+p,e[1]=u+l+m,e[2]=c+d+h,e}function Ue(e,r,t,n){var i=[],o=[];return i[0]=r[0]-t[0],i[1]=r[1]-t[1],i[2]=r[2]-t[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e}function Ge(e,r,t,n){var i=[],o=[];return i[0]=r[0]-t[0],i[1]=r[1]-t[1],i[2]=r[2]-t[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e}function Ve(e,r,t,n){var i=[],o=[];return i[0]=r[0]-t[0],i[1]=r[1]-t[1],i[2]=r[2]-t[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+t[0],e[1]=o[1]+t[1],e[2]=o[2]+t[2],e}function We(e,r){var t=fe(e[0],e[1],e[2]),n=fe(r[0],r[1],r[2]);De(t,t),De(n,n);var i=Be(t,n);return i>1?0:i<-1?Math.PI:Math.acos(i)}function $e(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function je(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}function ze(e,r){var t=e[0],n=e[1],i=e[2],o=r[0],a=r[1],u=r[2];return Math.abs(t-o)<=s*Math.max(1,Math.abs(t),Math.abs(o))&&Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-u)<=s*Math.max(1,Math.abs(i),Math.abs(u))}var He,qe=me,Ye=he,Xe=ge,Qe=Se,Ke=Te,Ze=ce,Je=Pe,er=(He=se(),function(e,r,t,n,i,o){var a=void 0,s=void 0;for(r||(r=3),t||(t=0),s=n?Math.min(n*r+t,e.length):e.length,a=t;a<s;a+=r)He[0]=e[a],He[1]=e[a+1],He[2]=e[a+2],i(He,He,o),e[a]=He[0],e[a+1]=He[1],e[a+2]=He[2];return e});const rr="env/pillars_ibl.ktx.bmp",tr="env/pillars_skybox.ktx.bmp",nr="materials/step1.filamat.bmp",ir="materials/step1_cylinder_back.filamat.bmp",or="materials/step1_cylinder_front.filamat.bmp",ar="materials/step2.filamat.bmp",sr="materials/step3.filamat.bmp",ur="materials/step4.filamat.bmp?v=1",cr=[tr,rr,nr,ir,or,ar,sr,ur];class fr{constructor(e,r){this.currentStep=0,n.setMatrixArrayType(Array),window.vec3=o,this.production=e,this.scene=r,this.canvas2d=document.getElementById("canvas2d"),this.canvas3d=document.getElementById("canvas3d"),this.context2d=this.canvas2d.getContext("2d"),this.engine=a.Engine.create(this.canvas3d),this.filamentScene=this.engine.createScene(),this.swapChain=this.engine.createSwapChain(),this.renderer=this.engine.createRenderer(),this.camera=this.engine.createCamera(),this.view=this.engine.createView(),this.view.setCamera(this.camera),this.view.setScene(this.filamentScene);const t=this.engine.createMaterial(nr),i=this.engine.createMaterial(ir),s=this.engine.createMaterial(or),u=this.engine.createMaterial(ar),c=this.engine.createMaterial(sr),f=this.engine.createMaterial(ur),l=[this.step1Material=t.createInstance(),this.step1CylinderBackMaterial=i.createInstance(),this.step1CylinderFrontMaterial=s.createInstance(),this.step2Material=u.createInstance(),this.step3Material=c.createInstance(),this.step4Material=f.createInstance()],d=a.RgbType.sRGB;for(const e of l)e.setColor3Parameter("baseColor",d,[0,.4,.8]),e.setFloatParameter("roughness",.5),e.setFloatParameter("clearCoat",0),e.setFloatParameter("clearCoatRoughness",.8);this.frontCylinderEntity=a.EntityManager.get().create(),this.backCylinderEntity=a.EntityManager.get().create(),this.sphereEntity=a.EntityManager.get().create(),this.createCylinders(),this.createSphere(),this.filamentScene.addEntity(this.sphereEntity),this.skybox=this.engine.createSkyFromKtx(tr),this.indirectLight=this.engine.createIblFromKtx(rr),this.indirectLight.setIntensity(5e4);const p=this.indirectLight.getDirectionEstimate(),m=this.indirectLight.getColorEstimate(p);this.filamentScene.setSkybox(this.skybox),this.filamentScene.setIndirectLight(this.indirectLight);const h=a.EntityManager.get().create();a.LightManager.Builder(a.LightManager$Type.SUN).color(m.slice(0,3)).castShadows(!1).intensity(m[3]).direction([.5,-1,0]).build(this.engine,h),this.filamentScene.addEntity(h),this.currentStep=-1,this.update(0)}render(){const e=this.scene.viewpoint;this.camera.lookAt(e.eye,e.center,e.up),this.renderer.render(this.swapChain,this.view);const r=this.canvas2d.width,t=this.canvas2d.height,n=r/36;this.context2d.setTransform(1,0,0,1,0,0),this.context2d.clearRect(0,0,r,t),this.context2d.font=`${n}px 'circular-bold', sans-serif`,this.context2d.textAlign="center";for(const e of this.scene.textSpans){const n=r/2+e.x*r/2,i=t/2+e.y*r/2;this.context2d.fillStyle=`rgba(0, 0, 0, ${e.opacity})`,this.context2d.fillText(e.text,n,i)}this.context2d.fillStyle="rgba(0, 0, 0, 1)",this.production||(this.context2d.translate(r/2,t/2),this.context2d.scale(r/2,r/2),this.context2d.beginPath(),this.context2d.moveTo(-1,0),this.context2d.lineTo(1,0),this.context2d.lineWidth=.01,this.context2d.setLineDash([.01,.02]),this.context2d.stroke())}resize(){const e=a.Camera$Fov,r=window.devicePixelRatio,t=this.canvas3d.width=this.canvas3d.clientWidth*r,n=this.canvas3d.height=this.canvas3d.clientHeight*r;this.view.setViewport([0,0,t,n]),this.canvas2d.width=t,this.canvas2d.height=n,this.context2d.setTransform(1,0,0,1,0,0),this.context2d.translate(t/2,n/2),this.context2d.scale(t/2,t/2);const i=t/n;this.camera.setProjectionFov(45,i,1,2e4,e.HORIZONTAL)}update(e){const r=this.engine.getRenderableManager(),t=this.engine.getTransformManager();if(this.currentStep!==e){const t=r.getInstance(this.sphereEntity);let n;switch(this.filamentScene.remove(this.frontCylinderEntity),this.filamentScene.remove(this.backCylinderEntity),e){case 0:this.filamentScene.addEntity(this.backCylinderEntity),this.filamentScene.addEntity(this.frontCylinderEntity);default:n=this.step1Material;break;case 1:n=this.step2Material;break;case 2:n=this.step3Material;break;case 3:n=this.step4Material}r.setMaterialInstanceAt(t,0,n),this.currentStep=e}const n=a.RgbaType.sRGB;switch(e){default:case 0:this.step1Material.setFloatParameter("gridlines",this.scene.sphereGridlines),this.step1CylinderFrontMaterial.setFloatParameter("gridlines",this.scene.cylinderGridlines),this.step1CylinderFrontMaterial.setColor4Parameter("baseColor",n,this.scene.baseColor),this.step1CylinderBackMaterial.setColor4Parameter("baseColor",n,this.scene.baseColor);const r=t.getInstance(this.frontCylinderEntity);t.setTransform(r,this.scene.cylinderTransform),r.delete();const i=t.getInstance(this.backCylinderEntity);t.setTransform(i,this.scene.cylinderTransform),i.delete();break;case 1:this.step2Material.setFloatParameter("greatCircle",this.scene.greatCircle),this.step2Material.setFloatParameter("luneAlpha",this.scene.luneAlpha),this.step2Material.setFloatParameter("luneExpansion",this.scene.luneExpansion),this.step2Material.setFloatParameter("antipodeAlpha",this.scene.antipodeAlpha);break;case 2:this.step3Material.setFloatParameter("rotation",this.scene.rotation),this.step3Material.setFloatParameter("fadeInTriangle",this.scene.fadeInTriangle),this.step3Material.setFloatParameter("triangleExpansion",this.scene.triangleExpansion),this.step3Material.setFloatParameter("fadeInLuneA",this.scene.fadeInLuneA),this.step3Material.setFloatParameter("fadeInLuneB",this.scene.fadeInLuneB),this.step3Material.setFloatParameter("fadeInLuneC",this.scene.fadeInLuneC);break;case 3:this.step4Material.setFloatParameter("fadeInPolygon",this.scene.fadeInPolygon),this.step4Material.setFloatParameter("fadeInTriangle",this.scene.fadeInTriangle)}}createCylinders(){const e=a.VertexBuffer$AttributeType,r=a.IndexBuffer$IndexType,t=a.RenderableManager$PrimitiveType,n=a.VertexAttribute,o=2*Math.PI/50,s={normals:new Float32Array(300),tangents:void 0,triangles:new Uint16Array(300),vertices:new Float32Array(300)};let u=0,c=-1,f=-1,l=-1;for(let e=0;e<50;e+=1,u+=o)s.triangles[l+=1]=(c/3+3)%100,s.triangles[l+=1]=(c/3+2)%100,s.triangles[l+=1]=(c/3+1)%100,s.triangles[l+=1]=(c/3+3)%100,s.triangles[l+=1]=(c/3+4)%100,s.triangles[l+=1]=(c/3+2)%100,s.vertices[c+=1]=Math.cos(u),s.vertices[c+=1]=Math.sin(u),s.vertices[c+=1]=0,s.vertices[c+=1]=Math.cos(u),s.vertices[c+=1]=Math.sin(u),s.vertices[c+=1]=1,s.normals[f+=1]=Math.cos(u),s.normals[f+=1]=Math.sin(u),s.normals[f+=1]=0,s.normals[f+=1]=Math.cos(u),s.normals[f+=1]=Math.sin(u),s.normals[f+=1]=0;const d=a._malloc(s.normals.length*s.normals.BYTES_PER_ELEMENT);a.HEAPU8.set(new Uint8Array(s.normals.buffer),d);const p=new a.SurfaceOrientation$Builder;p.vertexCount(100),p.normals(d,0);const m=p.build();a._free(d);const h=a._malloc(800);m.getQuats(h,100,a.VertexBuffer$AttributeType.SHORT4);const g=a.HEAPU8.subarray(h,h+800).slice().buffer;a._free(h),s.tangents=new Int16Array(g);const y=a.VertexBuffer.Builder().vertexCount(100).bufferCount(2).attribute(n.POSITION,0,e.FLOAT3,0,0).attribute(n.TANGENTS,1,e.SHORT4,0,0).normalized(n.TANGENTS).build(this.engine),v=a.IndexBuffer.Builder().indexCount(s.triangles.length).bufferType(r.USHORT).build(this.engine);y.setBufferAt(this.engine,0,s.vertices),y.setBufferAt(this.engine,1,s.tangents),v.setBuffer(this.engine,s.triangles);const _=i.fromRotation(i.create(),Math.PI/2,[1,0,0]),b=i.fromTranslation(i.create(),[0,0,-.5]),E=i.fromScaling(i.create(),[1,1,2]);i.multiply(_,_,E),i.multiply(_,_,b),a.RenderableManager.Builder(1).boundingBox({center:[-1,-1,-1],halfExtent:[1,1,1]}).material(0,this.step1CylinderFrontMaterial).geometry(0,t.TRIANGLES,y,v).culling(!1).build(this.engine,this.frontCylinderEntity),a.RenderableManager.Builder(1).boundingBox({center:[-1,-1,-1],halfExtent:[1,1,1]}).material(0,this.step1CylinderBackMaterial).geometry(0,t.TRIANGLES,y,v).culling(!1).build(this.engine,this.backCylinderEntity);const w=this.engine.getTransformManager();w.create(this.frontCylinderEntity);let x=w.getInstance(this.frontCylinderEntity);w.setTransform(x,_),x.delete(),w.create(this.backCylinderEntity),x=w.getInstance(this.backCylinderEntity),w.setTransform(x,_),x.delete()}createSphere(){const e=a.VertexBuffer$AttributeType,r=a.IndexBuffer$IndexType,t=a.RenderableManager$PrimitiveType,n=a.VertexAttribute,i=new a.IcoSphere(5),o=a.VertexBuffer.Builder().vertexCount(i.vertices.length/3).bufferCount(2).attribute(n.POSITION,0,e.FLOAT3,0,0).attribute(n.TANGENTS,1,e.SHORT4,0,0).normalized(n.TANGENTS).build(this.engine),s=a.IndexBuffer.Builder().indexCount(i.triangles.length).bufferType(r.USHORT).build(this.engine);o.setBufferAt(this.engine,0,i.vertices),o.setBufferAt(this.engine,1,i.tangents),s.setBuffer(this.engine,i.triangles),a.RenderableManager.Builder(1).boundingBox({center:[-1,-1,-1],halfExtent:[1,1,1]}).material(0,this.step1Material).geometry(0,t.TRIANGLES,o,s).build(this.engine,this.sphereEntity)}}class lr{constructor(){this.center=o.fromValues(0,0,0),this.eye=o.fromValues(0,1,3),this.up=o.fromValues(0,1,0)}}class dr{constructor(){this.antipodeAlpha=0,this.baseColor=[0,0,0,0],this.cylinderGridlines=0,this.cylinderTransform=i.create(),this.fadeInLuneA=0,this.fadeInLuneB=0,this.fadeInLuneC=0,this.fadeInPolygon=0,this.fadeInTriangle=0,this.greatCircle=0,this.luneAlpha=0,this.luneExpansion=0,this.rotation=0,this.sphereGridlines=0,this.textSpans=[],this.triangleExpansion=0,this.viewpoint=new lr}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */class pr{constructor(e){if(this.config=e,this.activePanelIndex=-1,this.progressValue=-1,this.frameCount=0,this.container=document.querySelector(e.containerSelector),!this.container)throw Error("Scrollytell container not found.");const r=window.getComputedStyle(this.container);if("scroll"!==r.getPropertyValue("overflow-y"))throw Error("Scrollytell container must have overflow-y:scroll.");if("relative"!==r.getPropertyValue("position"))throw Error("Scrollytell container must have position:relative.");if(this.panels=document.querySelectorAll(e.panelSelector),!this.panels)throw Error("Scrollytell panels not found.");if(this.chart=document.querySelector(e.chartSelector),e.fullsizeChart&&!this.chart)throw Error("Scrollytell chart not found.");if(e.fullsizeChart){const r=this.container.getBoundingClientRect().height;this.chart.style.height=`${r}px`,this.chart.style.top="0";const t=document.querySelectorAll(e.segmentSelector);for(const e of t)e.style.height=`${r}px`}e.developerHud&&this.showDeveloperHud(!0),this.tick=this.render.bind(this),window.requestAnimationFrame(this.tick)}getActivePanelIndex(){return this.activePanelIndex}getProgressValue(){return this.progressValue}refresh(){this.scrollTop=void 0,this.activePanelIndex=-2}showDeveloperHud(e){if(this.developerHudCanvas){const r=e?"visible":"hidden";return void(this.developerHudCanvas.style.visibility=r)}if(!e)return;const r=document.createElement("canvas"),t=r.style;t.position="fixed",t.width="100%",t.height="100%",t.left="0",t.top="0",t.zIndex="100",t.pointerEvents="none",this.container.appendChild(r);const n=window.devicePixelRatio;r.width=r.clientWidth*n,r.height=r.clientHeight*n,this.developerHudContext=r.getContext("2d"),this.developerHudContext.scale(n,n),this.developerHudCanvas=r;this.developerHudContext.font="bold 14px 'Lexend Deca', sans-serif",this.scrollTop=void 0}render(){const e=this.container.scrollTop;if(e===this.scrollTop)return void window.requestAnimationFrame(this.tick);this.scrollTop=e;const r=this.container.getBoundingClientRect(),t=(r.top+r.bottom)/2,n=this.activePanelIndex,i=this.progressValue;this.activePanelIndex=-1,this.progressValue=-1;for(const[e,r]of this.panels.entries()){const n=r.getBoundingClientRect(),i=!(n.top>t||n.bottom<t),o=(t-n.top)/n.height;if(i){this.activePanelIndex=e,this.progressValue=o;break}}const o=n!==this.activePanelIndex,a=i!==this.progressValue;o&&(this.config.exitHandler&&this.config.exitHandler(this,n),this.config.enterHandler&&this.config.enterHandler(this,this.activePanelIndex)),(a||o)&&(this.frameCount+=1,this.config.progressHandler&&this.config.progressHandler(this,this.progressValue)),this.developerHudContext&&this.renderDeveloperHud(r),window.requestAnimationFrame(this.tick)}renderDeveloperHud(e){const r=e,t=this.developerHudContext,n=(r.top+r.bottom)/2,i=this.developerHudCanvas.width,o=this.developerHudCanvas.height;t.clearRect(0,0,i,o),t.beginPath(),t.fillStyle="rgba(128, 128, 128, 0.125)";for(const[e,r]of this.panels.entries()){const e=r.getBoundingClientRect();t.rect(e.left,e.top,e.width,e.height)}t.fill(),t.beginPath(),t.fillStyle="rgba(255, 255, 255, 0.5)",t.rect(0,0,200,100),t.fill(),t.fillStyle="rgba(50, 50, 0, 1)";const a=`progress value = ${this.progressValue.toFixed(2)}`;t.fillText(a,10,20);const s=`active panel = ${this.activePanelIndex}`;t.fillText(s,10,40);const u=`frame count = ${this.frameCount}`;t.fillText(u,10,60),t.strokeStyle="rgba(255, 255, 255, 1.0)",t.beginPath(),t.moveTo(r.left,n-1),t.lineTo(r.right,n-1),t.moveTo(r.left,n+1),t.lineTo(r.right,n+1),t.stroke(),t.strokeStyle="rgba(0, 0, 0, 1.0)",t.setLineDash([10,1]),t.beginPath(),t.moveTo(r.left,n),t.lineTo(r.right,n),t.stroke()}}const mr=(e,r,t)=>Math.max(Math.min(e,t),r),hr=(e,r,t)=>e*(1-t)+r*t,gr=(e,r,t)=>{const n=mr((t-e)/(r-e),0,1);return n*n*(3-2*n)};class yr{constructor(e){this.previousStep=-1,this.scene=e}enterStep3(){this.scene.textSpans.length=3,this.scene.textSpans[0]={opacity:1,text:"a",x:-.61,y:-.2},this.scene.textSpans[1]={opacity:1,text:"b",x:.48,y:-.13},this.scene.textSpans[2]={opacity:1,text:"c",x:-.13,y:.54}}enterStep4(){this.scene.textSpans.length=11;const e=this.scene.textSpans[0]={opacity:1,text:"a",x:.13,y:-.03},r=this.scene.textSpans[1]={opacity:1,text:"b",x:.37,y:.31},t=this.scene.textSpans[2]={opacity:1,text:"c",x:.12,y:.63},n=this.scene.textSpans[3]={opacity:1,text:"d",x:-.3,y:.52},i=this.scene.textSpans[4]={opacity:1,text:"e",x:-.325,y:.12};this.scene.textSpans[5]={opacity:1,text:"-π",x:(e.x+r.x)/2,y:(e.y+r.y)/2},this.scene.textSpans[6]={opacity:1,text:"-π",x:(r.x+t.x)/2,y:(r.y+t.y)/2},this.scene.textSpans[7]={opacity:1,text:"-π",x:(t.x+n.x)/2,y:(t.y+n.y)/2},this.scene.textSpans[8]={opacity:1,text:"-π",x:(n.x+i.x)/2,y:(n.y+i.y)/2},this.scene.textSpans[9]={opacity:1,text:"-π",x:(i.x+e.x)/2,y:(i.y+e.y)/2};const o=(e.x+r.x+t.x+n.x+i.x)/5,a=(e.y+r.y+t.y+n.y+i.y)/5;this.scene.textSpans[10]={opacity:1,text:"2π",x:o,y:a}}exitStep3(){this.scene.textSpans.length=0}exitStep4(){this.scene.textSpans.length=0}update(e,r){const t=this[`updateStep${e+1}`],n=this[`exitStep${this.previousStep+1}`],i=this[`enterStep${e+1}`];return e!==this.previousStep&&(n&&n.apply(this),i&&i.apply(this),this.previousStep=e),t?t.apply(this,[r]):this.updateStep1(0)}updateStep1(e){const r=gr(.16,.29,e),t=gr(.28,.42,e),n=gr(.42,.66,e),a=gr(.66,.9,e),s=gr(.95,1,e);o.lerp(this.scene.viewpoint.eye,[0,0,3],[0,1.5,3.5],r*(1-a));const u=hr(1-r*(1-a)-.5,-4,s),c=i.fromRotation(i.create(),Math.PI/2,[1,0,0]),f=i.fromTranslation(i.create(),[0,0,u]),l=i.fromScaling(i.create(),[1,1,2]);return i.multiply(c,c,l),i.multiply(c,c,f),i.copy(this.scene.cylinderTransform,c),this.scene.sphereGridlines=n*(1-s),this.scene.cylinderGridlines=t*(1-n),this.scene.baseColor=[0,0,0,0],!1}updateStep2(e){const r=gr(0,.11,e),t=gr(.18,.22,e),n=gr(.31,.51,e),i=gr(.61,.71,e),a=gr(.72,.81,e),s=gr(.9,1,e);return o.lerp(this.scene.viewpoint.eye,[0,0,3],[0,1,3],r*(1-s)),this.scene.greatCircle=r*(1-s),this.scene.luneAlpha=t*(1-s),this.scene.luneExpansion=n*(1-i),this.scene.antipodeAlpha=a*(1-s),!1}updateStep3(e){const r=gr(0,.08,e),t=gr(.17,.23,e),n=gr(.23,.26,e),i=gr(.35,.4,e),a=gr(.4,.42,e),s=gr(.52,.63,e),u=gr(.63,.69,e),c=gr(.69,.75,e),f=gr(.75,.77,e),l=gr(.77,.92,e),d=gr(.92,1,e),p=o.create(),m=o.create();o.lerp(p,[0,0,3],[0,1,3],r*(1-d)),o.lerp(m,p,[2,2,2],n*(1-i)),o.lerp(this.scene.viewpoint.eye,m,[0,-1,3],c*(1-f)),this.scene.rotation=c*(1-f)*Math.PI,this.scene.fadeInTriangle=r*(1-d),this.scene.triangleExpansion=t*(1-i);const h=Math.sin(mr(3*s-0,0,1)*Math.PI),g=Math.sin(mr(3*s-1,0,1)*Math.PI),y=Math.sin(mr(3*s-2,0,1)*Math.PI);this.scene.fadeInLuneA=h,this.scene.fadeInLuneB=g,this.scene.fadeInLuneC=y,u>0&&u<=1&&(this.scene.fadeInLuneA=u*(1-d),this.scene.fadeInLuneB=u*(1-d),this.scene.fadeInLuneC=u*(1-d));const v=a*(1-u)+l*(1-d);return this.scene.textSpans[0].opacity=v,this.scene.textSpans[1].opacity=v,this.scene.textSpans[2].opacity=v,!1}updateStep4(e){const r=gr(0,.14,e),t=gr(.27,.39,e),n=gr(.65,.8,e),i=gr(.8,.87,e),a=gr(.93,1,e);o.lerp(this.scene.viewpoint.eye,[0,0,3],[0,1,3],r*(1-a)),this.scene.fadeInPolygon=r*(1-a),this.scene.fadeInTriangle=t*(1-n);const s=i*(1-a);for(let e=0;e<11;e+=1)this.scene.textSpans[e].opacity=s;return!1}}t.d(r,"App",function(){return vr});class vr{constructor(){this.scene=new dr,this.production="build:release".indexOf("release")>-1,console.info(this.production?"Production mode":"Development mode"),this.story=new pr({chartSelector:".chart",containerSelector:".container",panelSelector:".panel",segmentSelector:"segment",developerHud:!this.production,fullsizeChart:!0,progressHandler:e=>{if(this.display){const r=e.getActivePanelIndex(),t=e.getProgressValue();this.render(r,t)}}}),a.init(cr,()=>{this.display=new fr(this.production,this.scene),this.timeline=new yr(this.scene),this.timeline.update(0,0),this.display.update(0),this.display.resize(),this.story.refresh()}),document.querySelector(".container").focus()}render(e,r){e>-1&&(this.timeline.update(e,r),this.display.update(e)),this.display.render()}}window.onload=()=>{window.app=new vr}}]);
//# sourceMappingURL=main.js.map