!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=17)}([function(e,t,r){(function(t,n,i){var o=function(e){var o,a=void 0!==(e=e||{})?e:{},s={};for(o in a)a.hasOwnProperty(o)&&(s[o]=a[o]);a.arguments=[],a.thisProgram="./this.program",a.quit=function(e,t){throw t},a.preRun=[],a.postRun=[];var u=!1,c=!1,f=!1,l=!1;u="object"==typeof window,c="function"==typeof importScripts,f="object"==typeof t&&!u&&!c,l=!u&&!f&&!c;var d,p,m="";function h(e){return a.locateFile?a.locateFile(e,m):m+e}f?(m=n+"/",a.read=function(e,t){var n;return d||(d=r(1)),p||(p=r(2)),e=p.normalize(e),n=d.readFileSync(e),t?n:n.toString()},a.readBinary=function(e){var t=a.read(e,!0);return t.buffer||(t=new Uint8Array(t)),T(t.buffer),t},t.argv.length>1&&(a.thisProgram=t.argv[1].replace(/\\/g,"/")),a.arguments=t.argv.slice(2),t.on("uncaughtException",function(e){if(!(e instanceof Yf))throw e}),t.on("unhandledRejection",Qf),a.quit=function(e){t.exit(e)},a.inspect=function(){return"[Emscripten Module object]"}):l?("undefined"!=typeof read&&(a.read=function(e){return read(e)}),a.readBinary=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(T("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?a.arguments=scriptArgs:void 0!==arguments&&(a.arguments=arguments),"function"==typeof quit&&(a.quit=function(e){quit(e)})):(u||c)&&(c?m=self.location.href:document.currentScript&&(m=document.currentScript.src),m=0!==m.indexOf("blob:")?m.substr(0,m.lastIndexOf("/")+1):"",a.read=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},c&&(a.readBinary=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),a.readAsync=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)},a.setWindowTitle=function(e){document.title=e});var g=a.print||("undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null),y=a.printErr||("undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||g);for(o in s)s.hasOwnProperty(o)&&(a[o]=s[o]);s=void 0;var v={"f64-rem":function(e,t){return e%t},debugger:function(){}};new Array(0);function _(e,t,r){return r?+(e>>>0)+4294967296*+(t>>>0):+(e>>>0)+4294967296*+(0|t)}var b,E=0,w=function(e){E=e},x=function(){return E};"object"!=typeof WebAssembly&&y("no native wasm support detected");var S=!1;function T(e,t){e||Qf("Assertion failed: "+t)}var P="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function A(e,t,r){for(var n=t+r,i=t;e[i]&&!(i>=n);)++i;if(i-t>16&&e.subarray&&P)return P.decode(e.subarray(t,i));for(var o="";t<i;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var u=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var c=a-65536;o+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function C(e,t){return e?A(N,e,t):""}function M(e,t,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a);if(s<=127){if(r>=o)break;t[r++]=s}else if(s<=2047){if(r+1>=o)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=o)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=o)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-i}function B(e,t,r){return M(e,N,t,r)}function D(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:t+=n<=2047?2:n<=65535?3:4}return t}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");function I(e){return e}function k(e){return e.replace(/__Z[\w\d_]+/g,function(e){var t=I(e);return e===t?e:t+" ["+e+"]"})}function F(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function R(){var e=F();return a.extraStackTrace&&(e+="\n"+a.extraStackTrace()),k(e)}var L,O,N,U,G,V,W,$,j,z=16384,H=65536;function q(e,t){return e%t>0&&(e+=t-e%t),e}function Y(e){a.buffer=L=e}function X(){a.HEAP8=O=new Int8Array(L),a.HEAP16=U=new Int16Array(L),a.HEAP32=V=new Int32Array(L),a.HEAPU8=N=new Uint8Array(L),a.HEAPU16=G=new Uint16Array(L),a.HEAPU32=W=new Uint32Array(L),a.HEAPF32=$=new Float32Array(L),a.HEAPF64=j=new Float64Array(L)}var Q=5787728,K=544592,Z=5242880,J=a.TOTAL_MEMORY||16777216;function ee(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?a.dynCall_v(r):a.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}else t()}}J<Z&&y("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+J+"! (TOTAL_STACK="+Z+")"),a.buffer?L=a.buffer:("object"==typeof WebAssembly&&"function"==typeof WebAssembly.Memory?(b=new WebAssembly.Memory({initial:J/H}),L=b.buffer):L=new ArrayBuffer(J),a.buffer=L),X(),V[K>>2]=Q;var te=[],re=[],ne=[],ie=[],oe=!1;function ae(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)fe(a.preRun.shift());ee(te)}function se(){oe||(oe=!0,a.noFSInit||He.init.initialized||He.init(),Ve.init(),ee(re))}function ue(){He.ignorePermissions=!1,ee(ne)}function ce(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)le(a.postRun.shift());ee(ie)}function fe(e){te.unshift(e)}function le(e){ie.unshift(e)}var de=Math.abs,pe=Math.ceil,me=Math.floor,he=Math.min,ge=0,ye=null,ve=null;function _e(e){return e}function be(e){ge++,a.monitorRunDependencies&&a.monitorRunDependencies(ge)}function Ee(e){if(ge--,a.monitorRunDependencies&&a.monitorRunDependencies(ge),0==ge&&(null!==ye&&(clearInterval(ye),ye=null),ve)){var t=ve;ve=null,t()}}a.preloadedImages={},a.preloadedAudios={};var we="data:application/octet-stream;base64,";function xe(e){return String.prototype.startsWith?e.startsWith(we):0===e.indexOf(we)}var Se="filament.wasm";function Te(){try{if(a.wasmBinary)return new Uint8Array(a.wasmBinary);if(a.readBinary)return a.readBinary(Se);throw"both async and sync fetching of the wasm failed"}catch(e){Qf(e)}}function Pe(){return a.wasmBinary||!u&&!c||"function"!=typeof fetch?new Promise(function(e,t){e(Te())}):fetch(Se,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Se+"'";return e.arrayBuffer()}).catch(function(){return Te()})}function Ae(e){var t={env:e,global:{NaN:NaN,Infinity:1/0},"global.Math":Math,asm2wasm:v};function r(e,t){var r=e.exports;a.asm=r,Ee()}if(be(),a.instantiateWasm)try{return a.instantiateWasm(t,r)}catch(e){return y("Module.instantiateWasm callback failed with error: "+e),!1}function n(e){r(e.instance)}function i(e){Pe().then(function(e){return WebAssembly.instantiate(e,t)}).then(e,function(e){y("failed to asynchronously prepare wasm: "+e),Qf(e)})}return a.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||xe(Se)||"function"!=typeof fetch?i(n):WebAssembly.instantiateStreaming(fetch(Se,{credentials:"same-origin"}),t).then(n,function(e){y("wasm streaming compile failed: "+e),y("falling back to ArrayBuffer instantiation"),i(n)}),{}}xe(Se)||(Se=h(Se)),a.asm=function(e,t,r){return t.memory=b,t.table=new WebAssembly.Table({initial:2132,maximum:2132,element:"anyfunc"}),t.__memory_base=1024,t.__table_base=0,Ae(t)},re.push({func:function(){qf()}});var Ce=544832;function Me(e,t,r,n,i,o,a){var s=V[e>>2],u=V[e+4>>2],c=V[t>>2],f=V[t+4>>2];return s===c&&u===f?(V[e>>2]=r,V[e+4>>2]=n,1):(V[t>>2]=s,V[t+4>>2]=u,0)}function Be(e,t,r,n){var i=V[e>>2],o=V[e+4>>2];return V[e>>2]=zf(i,o,t,r),V[e+4>>2]=x(),0|(w(o),i)}function De(){return!!De.uncaught_exception}function Ie(e){try{return jf(e)}catch(e){}}var ke={last:0,caught:[],infos:{},deAdjust:function(e){if(!e||ke.infos[e])return e;for(var t in ke.infos)for(var r=+t,n=ke.infos[r].adjusted,i=n.length,o=0;o<i;o++)if(n[o]===e)return r;return e},addRef:function(e){e&&ke.infos[e].refcount++},decRef:function(e){if(e){var t=ke.infos[e];T(t.refcount>0),t.refcount--,0!==t.refcount||t.rethrown||(t.destructor&&a.dynCall_vi(t.destructor,e),delete ke.infos[e],Ie(e))}},clearRef:function(e){e&&(ke.infos[e].refcount=0)}};function Fe(e){var t=ke.infos[e];return t&&!t.caught&&(t.caught=!0,De.uncaught_exception--),t&&(t.rethrown=!1),ke.caught.push(e),ke.addRef(ke.deAdjust(e)),e}function Re(){throw S=!0,"Pure virtual function called!"}function Le(e){throw ke.last||(ke.last=e),e}function Oe(){var e=ke.last;if(!e)return 0|(w(0),0);var t=ke.infos[e],r=t.type;if(!r)return 0|(w(0),e);var n=Array.prototype.slice.call(arguments);a.___cxa_is_pointer_type(r);Oe.buffer||(Oe.buffer=Hf(4)),V[Oe.buffer>>2]=e,e=Oe.buffer;for(var i=0;i<n.length;i++)if(n[i]&&a.___cxa_can_catch(n[i],r,e))return e=V[e>>2],t.adjusted.push(e),0|(w(n[i]),e);return e=V[e>>2],0|(w(r),e)}function Ne(){}function Ue(e){return a.___errno_location&&(V[a.___errno_location()>>2]=e),e}var Ge={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),r="/"===e.substr(-1);return(e=Ge.normalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=Ge.splitPath(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},basename:function(e){if("/"===e)return"/";var t=e.lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return Ge.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return Ge.normalize(e.join("/"))},join2:function(e,t){return Ge.normalize(e+"/"+t)},resolve:function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:He.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,t="/"===n.charAt(0)}return(t?"/":"")+(e=Ge.normalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"))||"."},relative:function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=Ge.resolve(e).substr(1),t=Ge.resolve(t).substr(1);for(var n=r(e.split("/")),i=r(t.split("/")),o=Math.min(n.length,i.length),a=o,s=0;s<o;s++)if(n[s]!==i[s]){a=s;break}var u=[];for(s=a;s<n.length;s++)u.push("..");return(u=u.concat(i.slice(a))).join("/")}},Ve={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Ve.ttys[e]={input:[],output:[],ops:t},He.registerDevice(e,Ve.stream_ops)},stream_ops:{open:function(e){var t=Ve.ttys[e.node.rdev];if(!t)throw new He.ErrnoError(qe.ENODEV);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,r,n,i){if(!e.tty||!e.tty.ops.get_char)throw new He.ErrnoError(qe.ENXIO);for(var o=0,a=0;a<n;a++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(e){throw new He.ErrnoError(qe.EIO)}if(void 0===s&&0===o)throw new He.ErrnoError(qe.EAGAIN);if(null==s)break;o++,t[r+a]=s}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,r,n,i){if(!e.tty||!e.tty.ops.put_char)throw new He.ErrnoError(qe.ENXIO);try{for(var o=0;o<n;o++)e.tty.ops.put_char(e.tty,t[r+o])}catch(e){throw new He.ErrnoError(qe.EIO)}return n&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:function(e){if(!e.input.length){var r=null;if(f){var n=new i(256),o=0,a="win32"!=t.platform,s=t.stdin.fd;if(a){var u=!1;try{s=Lf.openSync("/dev/stdin","r"),u=!0}catch(e){}}try{o=Lf.readSync(s,n,0,256,null)}catch(e){if(-1==e.toString().indexOf("EOF"))throw e;o=0}u&&Lf.closeSync(s),r=o>0?n.slice(0,o).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(r=window.prompt("Input: "))&&(r+="\n"):"function"==typeof readline&&null!==(r=readline())&&(r+="\n");if(!r)return null;e.input=Uf(r,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(g(A(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(g(A(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(y(A(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(y(A(e.output,0)),e.output=[])}}},We={ops_table:null,mount:function(e){return We.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(He.isBlkdev(r)||He.isFIFO(r))throw new He.ErrnoError(qe.EPERM);We.ops_table||(We.ops_table={dir:{node:{getattr:We.node_ops.getattr,setattr:We.node_ops.setattr,lookup:We.node_ops.lookup,mknod:We.node_ops.mknod,rename:We.node_ops.rename,unlink:We.node_ops.unlink,rmdir:We.node_ops.rmdir,readdir:We.node_ops.readdir,symlink:We.node_ops.symlink},stream:{llseek:We.stream_ops.llseek}},file:{node:{getattr:We.node_ops.getattr,setattr:We.node_ops.setattr},stream:{llseek:We.stream_ops.llseek,read:We.stream_ops.read,write:We.stream_ops.write,allocate:We.stream_ops.allocate,mmap:We.stream_ops.mmap,msync:We.stream_ops.msync}},link:{node:{getattr:We.node_ops.getattr,setattr:We.node_ops.setattr,readlink:We.node_ops.readlink},stream:{}},chrdev:{node:{getattr:We.node_ops.getattr,setattr:We.node_ops.setattr},stream:He.chrdev_stream_ops}});var i=He.createNode(e,t,r,n);return He.isDir(i.mode)?(i.node_ops=We.ops_table.dir.node,i.stream_ops=We.ops_table.dir.stream,i.contents={}):He.isFile(i.mode)?(i.node_ops=We.ops_table.file.node,i.stream_ops=We.ops_table.file.stream,i.usedBytes=0,i.contents=null):He.isLink(i.mode)?(i.node_ops=We.ops_table.link.node,i.stream_ops=We.ops_table.link.stream):He.isChrdev(i.mode)&&(i.node_ops=We.ops_table.chrdev.node,i.stream_ops=We.ops_table.chrdev.stream),i.timestamp=Date.now(),e&&(e.contents[t]=i),i},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var t=[],r=0;r<e.usedBytes;++r)t.push(e.contents[r]);return t}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array},expandFileStorage:function(e,t){var r=e.contents?e.contents.length:0;if(!(r>=t)){t=Math.max(t,r*(r<1048576?2:1.125)|0),0!=r&&(t=Math.max(t,256));var n=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(n.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t){if(0==t)return e.contents=null,void(e.usedBytes=0);if(!e.contents||e.contents.subarray){var r=e.contents;return e.contents=new Uint8Array(new ArrayBuffer(t)),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),void(e.usedBytes=t)}if(e.contents||(e.contents=[]),e.contents.length>t)e.contents.length=t;else for(;e.contents.length<t;)e.contents.push(0);e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=He.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,He.isDir(e.mode)?t.size=4096:He.isFile(e.mode)?t.size=e.usedBytes:He.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&We.resizeFileStorage(e,t.size)},lookup:function(e,t){throw He.genericErrors[qe.ENOENT]},mknod:function(e,t,r,n){return We.createNode(e,t,r,n)},rename:function(e,t,r){if(He.isDir(e.mode)){var n;try{n=He.lookupNode(t,r)}catch(e){}if(n)for(var i in n.contents)throw new He.ErrnoError(qe.ENOTEMPTY)}delete e.parent.contents[e.name],e.name=r,t.contents[r]=e,e.parent=t},unlink:function(e,t){delete e.contents[t]},rmdir:function(e,t){var r=He.lookupNode(e,t);for(var n in r.contents)throw new He.ErrnoError(qe.ENOTEMPTY);delete e.contents[t]},readdir:function(e){var t=[".",".."];for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r);return t},symlink:function(e,t,r){var n=We.createNode(e,t,41471,0);return n.link=r,n},readlink:function(e){if(!He.isLink(e.mode))throw new He.ErrnoError(qe.EINVAL);return e.link}},stream_ops:{read:function(e,t,r,n,i){var o=e.node.contents;if(i>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-i,n);if(a>8&&o.subarray)t.set(o.subarray(i,i+a),r);else for(var s=0;s<a;s++)t[r+s]=o[i+s];return a},write:function(e,t,r,n,i,o){if(!1,!n)return 0;var a=e.node;if(a.timestamp=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(0===a.usedBytes&&0===i)return a.contents=new Uint8Array(t.subarray(r,r+n)),a.usedBytes=n,n;if(i+n<=a.usedBytes)return a.contents.set(t.subarray(r,r+n),i),n}if(We.expandFileStorage(a,i+n),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(r,r+n),i);else for(var s=0;s<n;s++)a.contents[i+s]=t[r+s];return a.usedBytes=Math.max(a.usedBytes,i+n),n},llseek:function(e,t,r){var n=t;if(1===r?n+=e.position:2===r&&He.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new He.ErrnoError(qe.EINVAL);return n},allocate:function(e,t,r){We.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap:function(e,t,r,n,i,o,a){if(!He.isFile(e.node.mode))throw new He.ErrnoError(qe.ENODEV);var s,u,c=e.node.contents;if(2&a||c.buffer!==t&&c.buffer!==t.buffer){if((i>0||i+n<e.node.usedBytes)&&(c=c.subarray?c.subarray(i,i+n):Array.prototype.slice.call(c,i,i+n)),u=!0,!(s=Hf(n)))throw new He.ErrnoError(qe.ENOMEM);t.set(c,s)}else u=!1,s=c.byteOffset;return{ptr:s,allocated:u}},msync:function(e,t,r,n,i){if(!He.isFile(e.node.mode))throw new He.ErrnoError(qe.ENODEV);if(2&i)return 0;We.stream_ops.write(e,t,0,n,r,!1);return 0}}},$e={dbs:{},indexedDB:function(){if("undefined"!=typeof indexedDB)return indexedDB;var e=null;return"object"==typeof window&&(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),T(e,"IDBFS used, but indexedDB not supported"),e},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(e){return We.mount.apply(null,arguments)},syncfs:function(e,t,r){$e.getLocalSet(e,function(n,i){if(n)return r(n);$e.getRemoteSet(e,function(e,n){if(e)return r(e);var o=t?n:i,a=t?i:n;$e.reconcile(o,a,r)})})},getDB:function(e,t){var r,n=$e.dbs[e];if(n)return t(null,n);try{r=$e.indexedDB().open(e,$e.DB_VERSION)}catch(e){return t(e)}if(!r)return t("Unable to connect to IndexedDB");r.onupgradeneeded=function(e){var t,r=e.target.result,n=e.target.transaction;(t=r.objectStoreNames.contains($e.DB_STORE_NAME)?n.objectStore($e.DB_STORE_NAME):r.createObjectStore($e.DB_STORE_NAME)).indexNames.contains("timestamp")||t.createIndex("timestamp","timestamp",{unique:!1})},r.onsuccess=function(){n=r.result,$e.dbs[e]=n,t(null,n)},r.onerror=function(e){t(this.error),e.preventDefault()}},getLocalSet:function(e,t){var r={};function n(e){return"."!==e&&".."!==e}function i(e){return function(t){return Ge.join2(e,t)}}for(var o=He.readdir(e.mountpoint).filter(n).map(i(e.mountpoint));o.length;){var a,s=o.pop();try{a=He.stat(s)}catch(e){return t(e)}He.isDir(a.mode)&&o.push.apply(o,He.readdir(s).filter(n).map(i(s))),r[s]={timestamp:a.mtime}}return t(null,{type:"local",entries:r})},getRemoteSet:function(e,t){var r={};$e.getDB(e.mountpoint,function(e,n){if(e)return t(e);try{var i=n.transaction([$e.DB_STORE_NAME],"readonly");i.onerror=function(e){t(this.error),e.preventDefault()},i.objectStore($e.DB_STORE_NAME).index("timestamp").openKeyCursor().onsuccess=function(e){var i=e.target.result;if(!i)return t(null,{type:"remote",db:n,entries:r});r[i.primaryKey]={timestamp:i.key},i.continue()}}catch(e){return t(e)}})},loadLocalEntry:function(e,t){var r,n;try{n=He.lookupPath(e).node,r=He.stat(e)}catch(e){return t(e)}return He.isDir(r.mode)?t(null,{timestamp:r.mtime,mode:r.mode}):He.isFile(r.mode)?(n.contents=We.getFileDataAsTypedArray(n),t(null,{timestamp:r.mtime,mode:r.mode,contents:n.contents})):t(new Error("node type not supported"))},storeLocalEntry:function(e,t,r){try{if(He.isDir(t.mode))He.mkdir(e,t.mode);else{if(!He.isFile(t.mode))return r(new Error("node type not supported"));He.writeFile(e,t.contents,{canOwn:!0})}He.chmod(e,t.mode),He.utime(e,t.timestamp,t.timestamp)}catch(e){return r(e)}r(null)},removeLocalEntry:function(e,t){try{He.lookupPath(e);var r=He.stat(e);He.isDir(r.mode)?He.rmdir(e):He.isFile(r.mode)&&He.unlink(e)}catch(e){return t(e)}t(null)},loadRemoteEntry:function(e,t,r){var n=e.get(t);n.onsuccess=function(e){r(null,e.target.result)},n.onerror=function(e){r(this.error),e.preventDefault()}},storeRemoteEntry:function(e,t,r,n){var i=e.put(r,t);i.onsuccess=function(){n(null)},i.onerror=function(e){n(this.error),e.preventDefault()}},removeRemoteEntry:function(e,t,r){var n=e.delete(t);n.onsuccess=function(){r(null)},n.onerror=function(e){r(this.error),e.preventDefault()}},reconcile:function(e,t,r){var n=0,i=[];Object.keys(e.entries).forEach(function(r){var o=e.entries[r],a=t.entries[r];(!a||o.timestamp>a.timestamp)&&(i.push(r),n++)});var o=[];if(Object.keys(t.entries).forEach(function(r){t.entries[r];e.entries[r]||(o.push(r),n++)}),!n)return r(null);var a=0,s=("remote"===e.type?e.db:t.db).transaction([$e.DB_STORE_NAME],"readwrite"),u=s.objectStore($e.DB_STORE_NAME);function c(e){return e?c.errored?void 0:(c.errored=!0,r(e)):++a>=n?r(null):void 0}s.onerror=function(e){c(this.error),e.preventDefault()},i.sort().forEach(function(e){"local"===t.type?$e.loadRemoteEntry(u,e,function(t,r){if(t)return c(t);$e.storeLocalEntry(e,r,c)}):$e.loadLocalEntry(e,function(t,r){if(t)return c(t);$e.storeRemoteEntry(u,e,r,c)})}),o.sort().reverse().forEach(function(e){"local"===t.type?$e.removeLocalEntry(e,c):$e.removeRemoteEntry(u,e,c)})}},je={isWindows:!1,staticInit:function(){je.isWindows=!!t.platform.match(/^win/);var e=t.binding("constants");e.fs&&(e=e.fs),je.flagsForNodeMap={1024:e.O_APPEND,64:e.O_CREAT,128:e.O_EXCL,0:e.O_RDONLY,2:e.O_RDWR,4096:e.O_SYNC,512:e.O_TRUNC,1:e.O_WRONLY}},bufferFrom:function(e){return i.alloc?i.from(e):new i(e)},mount:function(e){return T(f),je.createNode(null,"/",je.getMode(e.opts.root),0)},createNode:function(e,t,r,n){if(!He.isDir(r)&&!He.isFile(r)&&!He.isLink(r))throw new He.ErrnoError(qe.EINVAL);var i=He.createNode(e,t,r);return i.node_ops=je.node_ops,i.stream_ops=je.stream_ops,i},getMode:function(e){var t;try{t=Lf.lstatSync(e),je.isWindows&&(t.mode=t.mode|(292&t.mode)>>2)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}return t.mode},realPath:function(e){for(var t=[];e.parent!==e;)t.push(e.name),e=e.parent;return t.push(e.mount.opts.root),t.reverse(),Ge.join.apply(null,t)},flagsForNode:function(e){e&=-2097153,e&=-2049,e&=-32769,e&=-524289;var t=0;for(var r in je.flagsForNodeMap)e&r&&(t|=je.flagsForNodeMap[r],e^=r);if(e)throw new He.ErrnoError(qe.EINVAL);return t},node_ops:{getattr:function(e){var t,r=je.realPath(e);try{t=Lf.lstatSync(r)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}return je.isWindows&&!t.blksize&&(t.blksize=4096),je.isWindows&&!t.blocks&&(t.blocks=(t.size+t.blksize-1)/t.blksize|0),{dev:t.dev,ino:t.ino,mode:t.mode,nlink:t.nlink,uid:t.uid,gid:t.gid,rdev:t.rdev,size:t.size,atime:t.atime,mtime:t.mtime,ctime:t.ctime,blksize:t.blksize,blocks:t.blocks}},setattr:function(e,t){var r=je.realPath(e);try{if(void 0!==t.mode&&(Lf.chmodSync(r,t.mode),e.mode=t.mode),void 0!==t.timestamp){var n=new Date(t.timestamp);Lf.utimesSync(r,n,n)}void 0!==t.size&&Lf.truncateSync(r,t.size)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}},lookup:function(e,t){var r=Ge.join2(je.realPath(e),t),n=je.getMode(r);return je.createNode(e,t,n)},mknod:function(e,t,r,n){var i=je.createNode(e,t,r,n),o=je.realPath(i);try{He.isDir(i.mode)?Lf.mkdirSync(o,i.mode):Lf.writeFileSync(o,"",{mode:i.mode})}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}return i},rename:function(e,t,r){var n=je.realPath(e),i=Ge.join2(je.realPath(t),r);try{Lf.renameSync(n,i)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}},unlink:function(e,t){var r=Ge.join2(je.realPath(e),t);try{Lf.unlinkSync(r)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}},rmdir:function(e,t){var r=Ge.join2(je.realPath(e),t);try{Lf.rmdirSync(r)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}},readdir:function(e){var t=je.realPath(e);try{return Lf.readdirSync(t)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}},symlink:function(e,t,r){var n=Ge.join2(je.realPath(e),t);try{Lf.symlinkSync(r,n)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}},readlink:function(e){var t=je.realPath(e);try{return t=Lf.readlinkSync(t),t=Of.relative(Of.resolve(e.mount.opts.root),t)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}}},stream_ops:{open:function(e){var t=je.realPath(e.node);try{He.isFile(e.node.mode)&&(e.nfd=Lf.openSync(t,je.flagsForNode(e.flags)))}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}},close:function(e){try{He.isFile(e.node.mode)&&e.nfd&&Lf.closeSync(e.nfd)}catch(e){if(!e.code)throw e;throw new He.ErrnoError(qe[e.code])}},read:function(e,t,r,n,i){if(0===n)return 0;try{return Lf.readSync(e.nfd,je.bufferFrom(t.buffer),r,n,i)}catch(e){throw new He.ErrnoError(qe[e.code])}},write:function(e,t,r,n,i){try{return Lf.writeSync(e.nfd,je.bufferFrom(t.buffer),r,n,i)}catch(e){throw new He.ErrnoError(qe[e.code])}},llseek:function(e,t,r){var n=t;if(1===r)n+=e.position;else if(2===r&&He.isFile(e.node.mode))try{n+=Lf.fstatSync(e.nfd).size}catch(e){throw new He.ErrnoError(qe[e.code])}if(n<0)throw new He.ErrnoError(qe.EINVAL);return n}}},ze={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(e){T(c),ze.reader||(ze.reader=new FileReaderSync);var t=ze.createNode(null,"/",ze.DIR_MODE,0),r={};function n(e){for(var n=e.split("/"),i=t,o=0;o<n.length-1;o++){var a=n.slice(0,o+1).join("/");r[a]||(r[a]=ze.createNode(i,n[o],ze.DIR_MODE,0)),i=r[a]}return i}function i(e){var t=e.split("/");return t[t.length-1]}return Array.prototype.forEach.call(e.opts.files||[],function(e){ze.createNode(n(e.name),i(e.name),ze.FILE_MODE,0,e,e.lastModifiedDate)}),(e.opts.blobs||[]).forEach(function(e){ze.createNode(n(e.name),i(e.name),ze.FILE_MODE,0,e.data)}),(e.opts.packages||[]).forEach(function(e){e.metadata.files.forEach(function(t){var r=t.filename.substr(1);ze.createNode(n(r),i(r),ze.FILE_MODE,0,e.blob.slice(t.start,t.end))})}),t},createNode:function(e,t,r,n,i,o){var a=He.createNode(e,t,r);return a.mode=r,a.node_ops=ze.node_ops,a.stream_ops=ze.stream_ops,a.timestamp=(o||new Date).getTime(),T(ze.FILE_MODE!==ze.DIR_MODE),r===ze.FILE_MODE?(a.size=i.size,a.contents=i):(a.size=4096,a.contents={}),e&&(e.contents[t]=a),a},node_ops:{getattr:function(e){return{dev:1,ino:void 0,mode:e.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:e.size,atime:new Date(e.timestamp),mtime:new Date(e.timestamp),ctime:new Date(e.timestamp),blksize:4096,blocks:Math.ceil(e.size/4096)}},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp)},lookup:function(e,t){throw new He.ErrnoError(qe.ENOENT)},mknod:function(e,t,r,n){throw new He.ErrnoError(qe.EPERM)},rename:function(e,t,r){throw new He.ErrnoError(qe.EPERM)},unlink:function(e,t){throw new He.ErrnoError(qe.EPERM)},rmdir:function(e,t){throw new He.ErrnoError(qe.EPERM)},readdir:function(e){var t=[".",".."];for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r);return t},symlink:function(e,t,r){throw new He.ErrnoError(qe.EPERM)},readlink:function(e){throw new He.ErrnoError(qe.EPERM)}},stream_ops:{read:function(e,t,r,n,i){if(i>=e.node.size)return 0;var o=e.node.contents.slice(i,i+n),a=ze.reader.readAsArrayBuffer(o);return t.set(new Uint8Array(a),r),o.size},write:function(e,t,r,n,i){throw new He.ErrnoError(qe.EIO)},llseek:function(e,t,r){var n=t;if(1===r?n+=e.position:2===r&&He.isFile(e.node.mode)&&(n+=e.node.size),n<0)throw new He.ErrnoError(qe.EINVAL);return n}}},He={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(e){if(!(e instanceof He.ErrnoError))throw e+" : "+R();return Ue(e.errno)},lookupPath:function(e,t){if(t=t||{},!(e=Ge.resolve(He.cwd(),e)))return{path:"",node:null};var r={follow_mount:!0,recurse_count:0};for(var n in r)void 0===t[n]&&(t[n]=r[n]);if(t.recurse_count>8)throw new He.ErrnoError(40);for(var i=Ge.normalizeArray(e.split("/").filter(function(e){return!!e}),!1),o=He.root,a="/",s=0;s<i.length;s++){var u=s===i.length-1;if(u&&t.parent)break;if(o=He.lookupNode(o,i[s]),a=Ge.join2(a,i[s]),He.isMountpoint(o)&&(!u||u&&t.follow_mount)&&(o=o.mounted.root),!u||t.follow)for(var c=0;He.isLink(o.mode);){var f=He.readlink(a);if(a=Ge.resolve(Ge.dirname(a),f),o=He.lookupPath(a,{recurse_count:t.recurse_count}).node,c++>40)throw new He.ErrnoError(40)}}return{path:a,node:o}},getPath:function(e){for(var t;;){if(He.isRoot(e)){var r=e.mount.mountpoint;return t?"/"!==r[r.length-1]?r+"/"+t:r+t:r}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%He.nameTable.length},hashAddNode:function(e){var t=He.hashName(e.parent.id,e.name);e.name_next=He.nameTable[t],He.nameTable[t]=e},hashRemoveNode:function(e){var t=He.hashName(e.parent.id,e.name);if(He.nameTable[t]===e)He.nameTable[t]=e.name_next;else for(var r=He.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode:function(e,t){var r=He.mayLookup(e);if(r)throw new He.ErrnoError(r,e);for(var n=He.hashName(e.id,t),i=He.nameTable[n];i;i=i.name_next){var o=i.name;if(i.parent.id===e.id&&o===t)return i}return He.lookup(e,t)},createNode:function(e,t,r,n){if(!He.FSNode){He.FSNode=function(e,t,r,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=He.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n},He.FSNode.prototype={};Object.defineProperties(He.FSNode.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return He.isDir(this.mode)}},isDevice:{get:function(){return He.isChrdev(this.mode)}}})}var i=new He.FSNode(e,t,r,n);return He.hashAddNode(i),i},destroyNode:function(e){He.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return 49152==(49152&e)},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(e){var t=He.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return He.ignorePermissions?0:(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:13},mayLookup:function(e){var t=He.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:13)},mayCreate:function(e,t){try{He.lookupNode(e,t);return 17}catch(e){}return He.nodePermissions(e,"wx")},mayDelete:function(e,t,r){var n;try{n=He.lookupNode(e,t)}catch(e){return e.errno}var i=He.nodePermissions(e,"wx");if(i)return i;if(r){if(!He.isDir(n.mode))return 20;if(He.isRoot(n)||He.getPath(n)===He.cwd())return 16}else if(He.isDir(n.mode))return 21;return 0},mayOpen:function(e,t){return e?He.isLink(e.mode)?40:He.isDir(e.mode)&&("r"!==He.flagsToPermissionString(t)||512&t)?21:He.nodePermissions(e,He.flagsToPermissionString(t)):2},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||He.MAX_OPEN_FDS;for(var r=e;r<=t;r++)if(!He.streams[r])return r;throw new He.ErrnoError(24)},getStream:function(e){return He.streams[e]},createStream:function(e,t,r){He.FSStream||(He.FSStream=function(){},He.FSStream.prototype={},Object.defineProperties(He.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}}));var n=new He.FSStream;for(var i in e)n[i]=e[i];e=n;var o=He.nextfd(t,r);return e.fd=o,He.streams[o]=e,e},closeStream:function(e){He.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=He.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new He.ErrnoError(29)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){He.devices[e]={stream_ops:t}},getDevice:function(e){return He.devices[e]},getMounts:function(e){for(var t=[],r=[e];r.length;){var n=r.pop();t.push(n),r.push.apply(r,n.mounts)}return t},syncfs:function(e,t){"function"==typeof e&&(t=e,e=!1),He.syncFSRequests++,He.syncFSRequests>1&&console.log("warning: "+He.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var r=He.getMounts(He.root.mount),n=0;function i(e){return He.syncFSRequests--,t(e)}function o(e){if(e)return o.errored?void 0:(o.errored=!0,i(e));++n>=r.length&&i(null)}r.forEach(function(t){if(!t.type.syncfs)return o(null);t.type.syncfs(t,e,o)})},mount:function(e,t,r){var n,i="/"===r,o=!r;if(i&&He.root)throw new He.ErrnoError(16);if(!i&&!o){var a=He.lookupPath(r,{follow_mount:!1});if(r=a.path,n=a.node,He.isMountpoint(n))throw new He.ErrnoError(16);if(!He.isDir(n.mode))throw new He.ErrnoError(20)}var s={type:e,opts:t,mountpoint:r,mounts:[]},u=e.mount(s);return u.mount=s,s.root=u,i?He.root=u:n&&(n.mounted=s,n.mount&&n.mount.mounts.push(s)),u},unmount:function(e){var t=He.lookupPath(e,{follow_mount:!1});if(!He.isMountpoint(t.node))throw new He.ErrnoError(22);var r=t.node,n=r.mounted,i=He.getMounts(n);Object.keys(He.nameTable).forEach(function(e){for(var t=He.nameTable[e];t;){var r=t.name_next;-1!==i.indexOf(t.mount)&&He.destroyNode(t),t=r}}),r.mounted=null;var o=r.mount.mounts.indexOf(n);r.mount.mounts.splice(o,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,r){var n=He.lookupPath(e,{parent:!0}).node,i=Ge.basename(e);if(!i||"."===i||".."===i)throw new He.ErrnoError(22);var o=He.mayCreate(n,i);if(o)throw new He.ErrnoError(o);if(!n.node_ops.mknod)throw new He.ErrnoError(1);return n.node_ops.mknod(n,i,t,r)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,He.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,He.mknod(e,t,0)},mkdirTree:function(e,t){for(var r=e.split("/"),n="",i=0;i<r.length;++i)if(r[i]){n+="/"+r[i];try{He.mkdir(n,t)}catch(e){if(17!=e.errno)throw e}}},mkdev:function(e,t,r){return void 0===r&&(r=t,t=438),t|=8192,He.mknod(e,t,r)},symlink:function(e,t){if(!Ge.resolve(e))throw new He.ErrnoError(2);var r=He.lookupPath(t,{parent:!0}).node;if(!r)throw new He.ErrnoError(2);var n=Ge.basename(t),i=He.mayCreate(r,n);if(i)throw new He.ErrnoError(i);if(!r.node_ops.symlink)throw new He.ErrnoError(1);return r.node_ops.symlink(r,n,e)},rename:function(e,t){var r,n,i=Ge.dirname(e),o=Ge.dirname(t),a=Ge.basename(e),s=Ge.basename(t);try{r=He.lookupPath(e,{parent:!0}).node,n=He.lookupPath(t,{parent:!0}).node}catch(e){throw new He.ErrnoError(16)}if(!r||!n)throw new He.ErrnoError(2);if(r.mount!==n.mount)throw new He.ErrnoError(18);var u,c=He.lookupNode(r,a),f=Ge.relative(e,o);if("."!==f.charAt(0))throw new He.ErrnoError(22);if("."!==(f=Ge.relative(t,i)).charAt(0))throw new He.ErrnoError(39);try{u=He.lookupNode(n,s)}catch(e){}if(c!==u){var l=He.isDir(c.mode),d=He.mayDelete(r,a,l);if(d)throw new He.ErrnoError(d);if(d=u?He.mayDelete(n,s,l):He.mayCreate(n,s))throw new He.ErrnoError(d);if(!r.node_ops.rename)throw new He.ErrnoError(1);if(He.isMountpoint(c)||u&&He.isMountpoint(u))throw new He.ErrnoError(16);if(n!==r&&(d=He.nodePermissions(r,"w")))throw new He.ErrnoError(d);try{He.trackingDelegate.willMovePath&&He.trackingDelegate.willMovePath(e,t)}catch(r){console.log("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+r.message)}He.hashRemoveNode(c);try{r.node_ops.rename(c,n,s)}catch(e){throw e}finally{He.hashAddNode(c)}try{He.trackingDelegate.onMovePath&&He.trackingDelegate.onMovePath(e,t)}catch(r){console.log("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+r.message)}}},rmdir:function(e){var t=He.lookupPath(e,{parent:!0}).node,r=Ge.basename(e),n=He.lookupNode(t,r),i=He.mayDelete(t,r,!0);if(i)throw new He.ErrnoError(i);if(!t.node_ops.rmdir)throw new He.ErrnoError(1);if(He.isMountpoint(n))throw new He.ErrnoError(16);try{He.trackingDelegate.willDeletePath&&He.trackingDelegate.willDeletePath(e)}catch(t){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.rmdir(t,r),He.destroyNode(n);try{He.trackingDelegate.onDeletePath&&He.trackingDelegate.onDeletePath(e)}catch(t){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readdir:function(e){var t=He.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new He.ErrnoError(20);return t.node_ops.readdir(t)},unlink:function(e){var t=He.lookupPath(e,{parent:!0}).node,r=Ge.basename(e),n=He.lookupNode(t,r),i=He.mayDelete(t,r,!1);if(i)throw new He.ErrnoError(i);if(!t.node_ops.unlink)throw new He.ErrnoError(1);if(He.isMountpoint(n))throw new He.ErrnoError(16);try{He.trackingDelegate.willDeletePath&&He.trackingDelegate.willDeletePath(e)}catch(t){console.log("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.unlink(t,r),He.destroyNode(n);try{He.trackingDelegate.onDeletePath&&He.trackingDelegate.onDeletePath(e)}catch(t){console.log("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readlink:function(e){var t=He.lookupPath(e).node;if(!t)throw new He.ErrnoError(2);if(!t.node_ops.readlink)throw new He.ErrnoError(22);return Ge.resolve(He.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var r=He.lookupPath(e,{follow:!t}).node;if(!r)throw new He.ErrnoError(2);if(!r.node_ops.getattr)throw new He.ErrnoError(1);return r.node_ops.getattr(r)},lstat:function(e){return He.stat(e,!0)},chmod:function(e,t,r){var n;"string"==typeof e?n=He.lookupPath(e,{follow:!r}).node:n=e;if(!n.node_ops.setattr)throw new He.ErrnoError(1);n.node_ops.setattr(n,{mode:4095&t|-4096&n.mode,timestamp:Date.now()})},lchmod:function(e,t){He.chmod(e,t,!0)},fchmod:function(e,t){var r=He.getStream(e);if(!r)throw new He.ErrnoError(9);He.chmod(r.node,t)},chown:function(e,t,r,n){var i;"string"==typeof e?i=He.lookupPath(e,{follow:!n}).node:i=e;if(!i.node_ops.setattr)throw new He.ErrnoError(1);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:function(e,t,r){He.chown(e,t,r,!0)},fchown:function(e,t,r){var n=He.getStream(e);if(!n)throw new He.ErrnoError(9);He.chown(n.node,t,r)},truncate:function(e,t){if(t<0)throw new He.ErrnoError(22);var r;"string"==typeof e?r=He.lookupPath(e,{follow:!0}).node:r=e;if(!r.node_ops.setattr)throw new He.ErrnoError(1);if(He.isDir(r.mode))throw new He.ErrnoError(21);if(!He.isFile(r.mode))throw new He.ErrnoError(22);var n=He.nodePermissions(r,"w");if(n)throw new He.ErrnoError(n);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var r=He.getStream(e);if(!r)throw new He.ErrnoError(9);if(0==(2097155&r.flags))throw new He.ErrnoError(22);He.truncate(r.node,t)},utime:function(e,t,r){var n=He.lookupPath(e,{follow:!0}).node;n.node_ops.setattr(n,{timestamp:Math.max(t,r)})},open:function(e,t,r,n,i){if(""===e)throw new He.ErrnoError(2);var o;if(r=void 0===r?438:r,r=64&(t="string"==typeof t?He.modeStringToFlags(t):t)?4095&r|32768:0,"object"==typeof e)o=e;else{e=Ge.normalize(e);try{o=He.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var s=!1;if(64&t)if(o){if(128&t)throw new He.ErrnoError(17)}else o=He.mknod(e,r,0),s=!0;if(!o)throw new He.ErrnoError(2);if(He.isChrdev(o.mode)&&(t&=-513),65536&t&&!He.isDir(o.mode))throw new He.ErrnoError(20);if(!s){var u=He.mayOpen(o,t);if(u)throw new He.ErrnoError(u)}512&t&&He.truncate(o,0),t&=-641;var c=He.createStream({node:o,path:He.getPath(o),flags:t,seekable:!0,position:0,stream_ops:o.stream_ops,ungotten:[],error:!1},n,i);c.stream_ops.open&&c.stream_ops.open(c),!a.logReadFiles||1&t||(He.readFiles||(He.readFiles={}),e in He.readFiles||(He.readFiles[e]=1,console.log("FS.trackingDelegate error on read file: "+e)));try{if(He.trackingDelegate.onOpenFile){var f=0;1!=(2097155&t)&&(f|=He.tracking.openFlags.READ),0!=(2097155&t)&&(f|=He.tracking.openFlags.WRITE),He.trackingDelegate.onOpenFile(e,f)}}catch(t){console.log("FS.trackingDelegate['onOpenFile']('"+e+"', flags) threw an exception: "+t.message)}return c},close:function(e){if(He.isClosed(e))throw new He.ErrnoError(9);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{He.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,r){if(He.isClosed(e))throw new He.ErrnoError(9);if(!e.seekable||!e.stream_ops.llseek)throw new He.ErrnoError(29);if(0!=r&&1!=r&&2!=r)throw new He.ErrnoError(22);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read:function(e,t,r,n,i){if(n<0||i<0)throw new He.ErrnoError(22);if(He.isClosed(e))throw new He.ErrnoError(9);if(1==(2097155&e.flags))throw new He.ErrnoError(9);if(He.isDir(e.node.mode))throw new He.ErrnoError(21);if(!e.stream_ops.read)throw new He.ErrnoError(22);var o=void 0!==i;if(o){if(!e.seekable)throw new He.ErrnoError(29)}else i=e.position;var a=e.stream_ops.read(e,t,r,n,i);return o||(e.position+=a),a},write:function(e,t,r,n,i,o){if(n<0||i<0)throw new He.ErrnoError(22);if(He.isClosed(e))throw new He.ErrnoError(9);if(0==(2097155&e.flags))throw new He.ErrnoError(9);if(He.isDir(e.node.mode))throw new He.ErrnoError(21);if(!e.stream_ops.write)throw new He.ErrnoError(22);1024&e.flags&&He.llseek(e,0,2);var a=void 0!==i;if(a){if(!e.seekable)throw new He.ErrnoError(29)}else i=e.position;var s=e.stream_ops.write(e,t,r,n,i,o);a||(e.position+=s);try{e.path&&He.trackingDelegate.onWriteToFile&&He.trackingDelegate.onWriteToFile(e.path)}catch(t){console.log("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+t.message)}return s},allocate:function(e,t,r){if(He.isClosed(e))throw new He.ErrnoError(9);if(t<0||r<=0)throw new He.ErrnoError(22);if(0==(2097155&e.flags))throw new He.ErrnoError(9);if(!He.isFile(e.node.mode)&&!He.isDir(e.node.mode))throw new He.ErrnoError(19);if(!e.stream_ops.allocate)throw new He.ErrnoError(95);e.stream_ops.allocate(e,t,r)},mmap:function(e,t,r,n,i,o,a){if(1==(2097155&e.flags))throw new He.ErrnoError(13);if(!e.stream_ops.mmap)throw new He.ErrnoError(19);return e.stream_ops.mmap(e,t,r,n,i,o,a)},msync:function(e,t,r,n,i){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,r,n,i):0},munmap:function(e){return 0},ioctl:function(e,t,r){if(!e.stream_ops.ioctl)throw new He.ErrnoError(25);return e.stream_ops.ioctl(e,t,r)},readFile:function(e,t){if((t=t||{}).flags=t.flags||"r",t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var r,n=He.open(e,t.flags),i=He.stat(e).size,o=new Uint8Array(i);return He.read(n,o,0,i,0),"utf8"===t.encoding?r=A(o,0):"binary"===t.encoding&&(r=o),He.close(n),r},writeFile:function(e,t,r){(r=r||{}).flags=r.flags||"w";var n=He.open(e,r.flags,r.mode);if("string"==typeof t){var i=new Uint8Array(D(t)+1),o=M(t,i,0,i.length);He.write(n,i,0,o,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");He.write(n,t,0,t.byteLength,void 0,r.canOwn)}He.close(n)},cwd:function(){return He.currentPath},chdir:function(e){var t=He.lookupPath(e,{follow:!0});if(null===t.node)throw new He.ErrnoError(2);if(!He.isDir(t.node.mode))throw new He.ErrnoError(20);var r=He.nodePermissions(t.node,"x");if(r)throw new He.ErrnoError(r);He.currentPath=t.path},createDefaultDirectories:function(){He.mkdir("/tmp"),He.mkdir("/home"),He.mkdir("/home/web_user")},createDefaultDevices:function(){var e;if(He.mkdir("/dev"),He.registerDevice(He.makedev(1,3),{read:function(){return 0},write:function(e,t,r,n,i){return n}}),He.mkdev("/dev/null",He.makedev(1,3)),Ve.register(He.makedev(5,0),Ve.default_tty_ops),Ve.register(He.makedev(6,0),Ve.default_tty1_ops),He.mkdev("/dev/tty",He.makedev(5,0)),He.mkdev("/dev/tty1",He.makedev(6,0)),"object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);e=function(){return crypto.getRandomValues(t),t[0]}}else if(f)try{var n=r(16);e=function(){return n.randomBytes(1)[0]}}catch(t){e=function(){return 256*Math.random()|0}}else e=function(){Qf("random_device")};He.createDevice("/dev","random",e),He.createDevice("/dev","urandom",e),He.mkdir("/dev/shm"),He.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){He.mkdir("/proc"),He.mkdir("/proc/self"),He.mkdir("/proc/self/fd"),He.mount({mount:function(){var e=He.createNode("/proc/self","fd",16895,73);return e.node_ops={lookup:function(e,t){var r=+t,n=He.getStream(r);if(!n)throw new He.ErrnoError(9);var i={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return n.path}}};return i.parent=i,i}},e}},{},"/proc/self/fd")},createStandardStreams:function(){a.stdin?He.createDevice("/dev","stdin",a.stdin):He.symlink("/dev/tty","/dev/stdin"),a.stdout?He.createDevice("/dev","stdout",null,a.stdout):He.symlink("/dev/tty","/dev/stdout"),a.stderr?He.createDevice("/dev","stderr",null,a.stderr):He.symlink("/dev/tty1","/dev/stderr");He.open("/dev/stdin","r"),He.open("/dev/stdout","w"),He.open("/dev/stderr","w")},ensureErrnoError:function(){He.ErrnoError||(He.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error",this.stack&&Object.defineProperty(this,"stack",{value:(new Error).stack,writable:!0})},He.ErrnoError.prototype=new Error,He.ErrnoError.prototype.constructor=He.ErrnoError,[2].forEach(function(e){He.genericErrors[e]=new He.ErrnoError(e),He.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:function(){He.ensureErrnoError(),He.nameTable=new Array(4096),He.mount(We,{},"/"),He.createDefaultDirectories(),He.createDefaultDevices(),He.createSpecialDirectories(),He.filesystems={MEMFS:We,IDBFS:$e,NODEFS:je,WORKERFS:ze}},init:function(e,t,r){He.init.initialized=!0,He.ensureErrnoError(),a.stdin=e||a.stdin,a.stdout=t||a.stdout,a.stderr=r||a.stderr,He.createStandardStreams()},quit:function(){He.init.initialized=!1;var e=a._fflush;e&&e(0);for(var t=0;t<He.streams.length;t++){var r=He.streams[t];r&&He.close(r)}},getMode:function(e,t){var r=0;return e&&(r|=365),t&&(r|=146),r},joinPath:function(e,t){var r=Ge.join.apply(null,e);return t&&"/"==r[0]&&(r=r.substr(1)),r},absolutePath:function(e,t){return Ge.resolve(t,e)},standardizePath:function(e){return Ge.normalize(e)},findObject:function(e,t){var r=He.analyzePath(e,t);return r.exists?r.object:(Ue(r.error),null)},analyzePath:function(e,t){try{e=(n=He.lookupPath(e,{follow:!t})).path}catch(e){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=He.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=Ge.basename(e),n=He.lookupPath(e,{follow:!t}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot="/"===n.path}catch(e){r.error=e.errno}return r},createFolder:function(e,t,r,n){var i=Ge.join2("string"==typeof e?e:He.getPath(e),t),o=He.getMode(r,n);return He.mkdir(i,o)},createPath:function(e,t,r,n){e="string"==typeof e?e:He.getPath(e);for(var i=t.split("/").reverse();i.length;){var o=i.pop();if(o){var a=Ge.join2(e,o);try{He.mkdir(a)}catch(e){}e=a}}return a},createFile:function(e,t,r,n,i){var o=Ge.join2("string"==typeof e?e:He.getPath(e),t),a=He.getMode(n,i);return He.create(o,a)},createDataFile:function(e,t,r,n,i,o){var a=t?Ge.join2("string"==typeof e?e:He.getPath(e),t):e,s=He.getMode(n,i),u=He.create(a,s);if(r){if("string"==typeof r){for(var c=new Array(r.length),f=0,l=r.length;f<l;++f)c[f]=r.charCodeAt(f);r=c}He.chmod(u,146|s);var d=He.open(u,"w");He.write(d,r,0,r.length,0,o),He.close(d),He.chmod(u,s)}return u},createDevice:function(e,t,r,n){var i=Ge.join2("string"==typeof e?e:He.getPath(e),t),o=He.getMode(!!r,!!n);He.createDevice.major||(He.createDevice.major=64);var a=He.makedev(He.createDevice.major++,0);return He.registerDevice(a,{open:function(e){e.seekable=!1},close:function(e){n&&n.buffer&&n.buffer.length&&n(10)},read:function(e,t,n,i,o){for(var a=0,s=0;s<i;s++){var u;try{u=r()}catch(e){throw new He.ErrnoError(5)}if(void 0===u&&0===a)throw new He.ErrnoError(11);if(null==u)break;a++,t[n+s]=u}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,r,i,o){for(var a=0;a<i;a++)try{n(t[r+a])}catch(e){throw new He.ErrnoError(5)}return i&&(e.node.timestamp=Date.now()),a}}),He.mkdev(i,o,a)},createLink:function(e,t,r,n,i){var o=Ge.join2("string"==typeof e?e:He.getPath(e),t);return He.symlink(r,o)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;var t=!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!a.read)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=Uf(a.read(e.url),!0),e.usedBytes=e.contents.length}catch(e){t=!1}return t||Ue(5),t},createLazyFile:function(e,t,r,n,i){function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,r=e/this.chunkSize|0;return this.getter(r)[t]}},o.prototype.setDataGetter=function(e){this.getter=e},o.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",r,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+r+". Status: "+e.status);var t,n=Number(e.getResponseHeader("Content-length")),i=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,o=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,a=1048576;i||(a=n);var s=this;s.setDataGetter(function(e){var t=e*a,i=(e+1)*a-1;if(i=Math.min(i,n-1),void 0===s.chunks[e]&&(s.chunks[e]=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>n-1)throw new Error("only "+n+" bytes available! programmer error!");var i=new XMLHttpRequest;if(i.open("GET",r,!1),n!==a&&i.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(i.responseType="arraybuffer"),i.overrideMimeType&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null),!(i.status>=200&&i.status<300||304===i.status))throw new Error("Couldn't load "+r+". Status: "+i.status);return void 0!==i.response?new Uint8Array(i.response||[]):Uf(i.responseText||"",!0)}(t,i)),void 0===s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]}),!o&&n||(a=n=1,n=this.getter(0).length,a=n,console.log("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!c)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a=new o;Object.defineProperties(a,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var s={isDevice:!1,contents:a}}else s={isDevice:!1,url:r};var u=He.createFile(e,t,s,n,i);s.contents?u.contents=s.contents:s.url&&(u.contents=null,u.url=s.url),Object.defineProperties(u,{usedBytes:{get:function(){return this.contents.length}}});var f={};return Object.keys(u.stream_ops).forEach(function(e){var t=u.stream_ops[e];f[e]=function(){if(!He.forceLoadFile(u))throw new He.ErrnoError(5);return t.apply(null,arguments)}}),f.read=function(e,t,r,n,i){if(!He.forceLoadFile(u))throw new He.ErrnoError(5);var o=e.node.contents;if(i>=o.length)return 0;var a=Math.min(o.length-i,n);if(o.slice)for(var s=0;s<a;s++)t[r+s]=o[i+s];else for(s=0;s<a;s++)t[r+s]=o.get(i+s);return a},u.stream_ops=f,u},createPreloadedFile:function(e,t,r,n,i,o,s,u,c,f){Browser.init();var l=t?Ge.resolve(Ge.join2(e,t)):e;_e("cp "+l);function d(r){function d(r){f&&f(),u||He.createDataFile(e,t,r,n,i,c),o&&o(),Ee()}var p=!1;a.preloadPlugins.forEach(function(e){p||e.canHandle(l)&&(e.handle(r,l,d,function(){s&&s(),Ee()}),p=!0)}),p||d(r)}be(),"string"==typeof r?Browser.asyncLoad(r,function(e){d(e)},s):d(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,r){t=t||function(){},r=r||function(){};var n=He.indexedDB();try{var i=n.open(He.DB_NAME(),He.DB_VERSION)}catch(e){return r(e)}i.onupgradeneeded=function(){console.log("creating db"),i.result.createObjectStore(He.DB_STORE_NAME)},i.onsuccess=function(){var n=i.result.transaction([He.DB_STORE_NAME],"readwrite"),o=n.objectStore(He.DB_STORE_NAME),a=0,s=0,u=e.length;function c(){0==s?t():r()}e.forEach(function(e){var t=o.put(He.analyzePath(e).object.contents,e);t.onsuccess=function(){++a+s==u&&c()},t.onerror=function(){a+ ++s==u&&c()}}),n.onerror=r},i.onerror=r},loadFilesFromDB:function(e,t,r){t=t||function(){},r=r||function(){};var n=He.indexedDB();try{var i=n.open(He.DB_NAME(),He.DB_VERSION)}catch(e){return r(e)}i.onupgradeneeded=r,i.onsuccess=function(){var n=i.result;try{var o=n.transaction([He.DB_STORE_NAME],"readonly")}catch(e){return void r(e)}var a=o.objectStore(He.DB_STORE_NAME),s=0,u=0,c=e.length;function f(){0==u?t():r()}e.forEach(function(e){var t=a.get(e);t.onsuccess=function(){He.analyzePath(e).exists&&He.unlink(e),He.createDataFile(Ge.dirname(e),Ge.basename(e),t.result,!0,!0,!0),++s+u==c&&f()},t.onerror=function(){s+ ++u==c&&f()}}),o.onerror=r},i.onerror=r}},qe={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86},Ye={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(e,t){if("/"!==t[0]){var r;if(-100===e)r=He.cwd();else{var n=He.getStream(e);if(!n)throw new He.ErrnoError(qe.EBADF);r=n.path}t=Ge.join2(r,t)}return t},doStat:function(e,t,r){try{var n=e(t)}catch(e){if(e&&e.node&&Ge.normalize(t)!==Ge.normalize(He.getPath(e.node)))return-qe.ENOTDIR;throw e}return V[r>>2]=n.dev,V[r+4>>2]=0,V[r+8>>2]=n.ino,V[r+12>>2]=n.mode,V[r+16>>2]=n.nlink,V[r+20>>2]=n.uid,V[r+24>>2]=n.gid,V[r+28>>2]=n.rdev,V[r+32>>2]=0,V[r+36>>2]=n.size,V[r+40>>2]=4096,V[r+44>>2]=n.blocks,V[r+48>>2]=n.atime.getTime()/1e3|0,V[r+52>>2]=0,V[r+56>>2]=n.mtime.getTime()/1e3|0,V[r+60>>2]=0,V[r+64>>2]=n.ctime.getTime()/1e3|0,V[r+68>>2]=0,V[r+72>>2]=n.ino,0},doMsync:function(e,t,r,n){var i=new Uint8Array(N.subarray(e,e+r));He.msync(t,i,0,r,n)},doMkdir:function(e,t){return"/"===(e=Ge.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),He.mkdir(e,t,0),0},doMknod:function(e,t,r){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-qe.EINVAL}return He.mknod(e,t,r),0},doReadlink:function(e,t,r){if(r<=0)return-qe.EINVAL;var n=He.readlink(e),i=Math.min(r,D(n)),o=O[t+i];return B(n,t,r+1),O[t+i]=o,i},doAccess:function(e,t){if(-8&t)return-qe.EINVAL;var r;r=He.lookupPath(e,{follow:!0}).node;var n="";return 4&t&&(n+="r"),2&t&&(n+="w"),1&t&&(n+="x"),n&&He.nodePermissions(r,n)?-qe.EACCES:0},doDup:function(e,t,r){var n=He.getStream(r);return n&&He.close(n),He.open(e,t,0,r,r).fd},doReadv:function(e,t,r,n){for(var i=0,o=0;o<r;o++){var a=V[t+8*o>>2],s=V[t+(8*o+4)>>2],u=He.read(e,O,a,s,n);if(u<0)return-1;if(i+=u,u<s)break}return i},doWritev:function(e,t,r,n){for(var i=0,o=0;o<r;o++){var a=V[t+8*o>>2],s=V[t+(8*o+4)>>2],u=He.write(e,O,a,s,n);if(u<0)return-1;i+=u}return i},varargs:0,get:function(e){return Ye.varargs+=4,V[Ye.varargs-4>>2]},getStr:function(){return C(Ye.get())},getStreamFromFD:function(){var e=He.getStream(Ye.get());if(!e)throw new He.ErrnoError(qe.EBADF);return e},getSocketFromFD:function(){var e=SOCKFS.getSocket(Ye.get());if(!e)throw new He.ErrnoError(qe.EBADF);return e},getSocketAddress:function(e){var t=Ye.get(),r=Ye.get();if(e&&0===t)return null;var n=__read_sockaddr(t,r);if(n.errno)throw new He.ErrnoError(n.errno);return n.addr=DNS.lookup_addr(n.addr)||n.addr,n},get64:function(){var e=Ye.get();Ye.get();return e},getZero:function(){Ye.get()}};function Xe(e,t){Ye.varargs=t;try{var r=Ye.getStreamFromFD(),n=(Ye.get(),Ye.get()),i=Ye.get(),o=Ye.get(),a=n;return He.llseek(r,a,o),V[i>>2]=r.position,r.getdents&&0===a&&0===o&&(r.getdents=null),0}catch(e){return void 0!==He&&e instanceof He.ErrnoError||Qf(e),-e.errno}}function Qe(e,t){Ye.varargs=t;try{var r=Ye.getStreamFromFD(),n=Ye.get(),i=Ye.get();return Ye.doWritev(r,n,i)}catch(e){return void 0!==He&&e instanceof He.ErrnoError||Qf(e),-e.errno}}function Ke(e,t){Ye.varargs=t;try{var r=Ye.getStreamFromFD();switch(Ye.get()){case 0:return(n=Ye.get())<0?-qe.EINVAL:He.open(r.path,r.flags,0,n).fd;case 1:case 2:return 0;case 3:return r.flags;case 4:var n=Ye.get();return r.flags|=n,0;case 12:n=Ye.get();return U[n+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-qe.EINVAL;case 9:return Ue(qe.EINVAL),-1;default:return-qe.EINVAL}}catch(e){return void 0!==He&&e instanceof He.ErrnoError||Qf(e),-e.errno}}function Ze(e,t){Ye.varargs=t;try{var r=Ye.getStreamFromFD(),n=Ye.get(),i=Ye.get();return He.read(r,O,n,i)}catch(e){return void 0!==He&&e instanceof He.ErrnoError||Qf(e),-e.errno}}function Je(e,t){Ye.varargs=t;try{var r=Ye.getStr(),n=Ye.get(),i=Ye.get();return He.open(r,n,i).fd}catch(e){return void 0!==He&&e instanceof He.ErrnoError||Qf(e),-e.errno}}function et(e,t){Ye.varargs=t;try{var r=Ye.getStreamFromFD(),n=Ye.get();switch(n){case 21509:case 21505:return r.tty?0:-qe.ENOTTY;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.tty?0:-qe.ENOTTY;case 21519:if(!r.tty)return-qe.ENOTTY;var i=Ye.get();return V[i>>2]=0,0;case 21520:return r.tty?-qe.EINVAL:-qe.ENOTTY;case 21531:i=Ye.get();return He.ioctl(r,n,i);case 21523:case 21524:return r.tty?0:-qe.ENOTTY;default:Qf("bad ioctl syscall "+n)}}catch(e){return void 0!==He&&e instanceof He.ErrnoError||Qf(e),-e.errno}}function tt(e,t){Ye.varargs=t;try{var r=Ye.getStreamFromFD();return He.close(r),0}catch(e){return void 0!==He&&e instanceof He.ErrnoError||Qf(e),-e.errno}}var rt={};function nt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function it(e){return this.fromWireType(W[e>>2])}var ot={},at={},st={},ut=48,ct=57;function ft(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=ut&&t<=ct?"_"+e:e}function lt(e,t){return e=ft(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function dt(e,t){var r=lt(t,function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var pt=void 0;function mt(e){throw new pt(e)}function ht(e,t,r){function n(t){var n=r(t);n.length!==e.length&&mt("Mismatched type converter count");for(var i=0;i<e.length;++i)Tt(e[i],n[i])}e.forEach(function(e){st[e]=t});var i=new Array(t.length),o=[],a=0;t.forEach(function(e,t){at.hasOwnProperty(e)?i[t]=at[e]:(o.push(e),ot.hasOwnProperty(e)||(ot[e]=[]),ot[e].push(function(){i[t]=at[e],++a===o.length&&n(i)}))}),0===o.length&&n(i)}function gt(e){var t=rt[e];delete rt[e];var r=t.elements,n=r.length,i=r.map(function(e){return e.getterReturnType}).concat(r.map(function(e){return e.setterArgumentType})),o=t.rawConstructor,a=t.rawDestructor;ht([e],i,function(e){return r.forEach(function(t,r){var i=e[r],o=t.getter,a=t.getterContext,s=e[r+n],u=t.setter,c=t.setterContext;t.read=function(e){return i.fromWireType(o(a,e))},t.write=function(e,t){var r=[];u(c,e,s.toWireType(r,t)),nt(r)}}),[{name:t.name,fromWireType:function(e){for(var t=new Array(n),i=0;i<n;++i)t[i]=r[i].read(e);return a(e),t},toWireType:function(e,i){if(n!==i.length)throw new TypeError("Incorrect number of tuple elements for "+t.name+": expected="+n+", actual="+i.length);for(var s=o(),u=0;u<n;++u)r[u].write(s,i[u]);return null!==e&&e.push(a,s),s},argPackAdvance:8,readValueFromPointer:it,destructorFunction:a}]})}var yt={};function vt(e){var t=yt[e];delete yt[e];var r=t.rawConstructor,n=t.rawDestructor,i=t.fields;ht([e],i.map(function(e){return e.getterReturnType}).concat(i.map(function(e){return e.setterArgumentType})),function(e){var o={};return i.forEach(function(t,r){var n=t.fieldName,a=e[r],s=t.getter,u=t.getterContext,c=e[r+i.length],f=t.setter,l=t.setterContext;o[n]={read:function(e){return a.fromWireType(s(u,e))},write:function(e,t){var r=[];f(l,e,c.toWireType(r,t)),nt(r)}}}),[{name:t.name,fromWireType:function(e){var t={};for(var r in o)t[r]=o[r].read(e);return n(e),t},toWireType:function(e,t){for(var i in o)if(!(i in t))throw new TypeError("Missing field");var a=r();for(i in o)o[i].write(a,t[i]);return null!==e&&e.push(n,a),a},argPackAdvance:8,readValueFromPointer:it,destructorFunction:n}]})}function _t(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function bt(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Et=e}var Et=void 0;function wt(e){for(var t="",r=e;N[r];)t+=Et[N[r++]];return t}var xt=void 0;function St(e){throw new xt(e)}function Tt(e,t,r){if(r=r||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||St('type "'+n+'" must have a positive integer typeid pointer'),at.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;St("Cannot register type '"+n+"' twice")}if(at[e]=t,delete st[e],ot.hasOwnProperty(e)){var i=ot[e];delete ot[e],i.forEach(function(e){e()})}}function Pt(e,t,r,n,i){var o=_t(r);Tt(e,{name:t=wt(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:i},argPackAdvance:8,readValueFromPointer:function(e){var n;if(1===r)n=O;else if(2===r)n=U;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);n=V}return this.fromWireType(n[e>>o])},destructorFunction:null})}function At(e){if(!(this instanceof Ut))return!1;if(!(e instanceof Ut))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)i=n.upcast(i),n=n.baseClass;return t===n&&r===i}function Ct(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function Mt(e){St(e.$$.ptrType.registeredClass.name+" instance already deleted")}function Bt(){if(this.$$.ptr||Mt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Object.create(Object.getPrototypeOf(this),{$$:{value:Ct(this.$$)}});return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function Dt(e){var t=e.$$;t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)}function It(){this.$$.ptr||Mt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&St("Object already scheduled for deletion"),this.$$.count.value-=1,0===this.$$.count.value&&Dt(this),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function kt(){return!this.$$.ptr}var Ft=void 0,Rt=[];function Lt(){for(;Rt.length;){var e=Rt.pop();e.$$.deleteScheduled=!1,e.delete()}}function Ot(){return this.$$.ptr||Mt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&St("Object already scheduled for deletion"),Rt.push(this),1===Rt.length&&Ft&&Ft(Lt),this.$$.deleteScheduled=!0,this}function Nt(){Ut.prototype.isAliasOf=At,Ut.prototype.clone=Bt,Ut.prototype.delete=It,Ut.prototype.isDeleted=kt,Ut.prototype.deleteLater=Ot}function Ut(){}var Gt={};function Vt(e,t,r){if(void 0===e[t].overloadTable){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||St("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}}function Wt(e,t,r){a.hasOwnProperty(e)?((void 0===r||void 0!==a[e].overloadTable&&void 0!==a[e].overloadTable[r])&&St("Cannot register public name '"+e+"' twice"),Vt(a,e,e),a.hasOwnProperty(r)&&St("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),a[e].overloadTable[r]=t):(a[e]=t,void 0!==r&&(a[e].numArguments=r))}function $t(e,t,r,n,i,o,a,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=i,this.getActualType=o,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}function jt(e,t,r){for(;t!==r;)t.upcast||St("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function zt(e,t){if(null===t)return this.isReference&&St("null is not a valid "+this.name),0;t.$$||St('Cannot pass "'+Rr(t)+'" as a '+this.name),t.$$.ptr||St("Cannot pass deleted object as a pointer of type "+this.name);var r=t.$$.ptrType.registeredClass;return jt(t.$$.ptr,r,this.registeredClass)}function Ht(e,t){var r;if(null===t)return this.isReference&&St("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t.$$||St('Cannot pass "'+Rr(t)+'" as a '+this.name),t.$$.ptr||St("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&St("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;if(r=jt(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&St("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:St("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var i=t.clone();r=this.rawShare(r,Mr(function(){i.delete()})),null!==e&&e.push(this.rawDestructor,r)}break;default:St("Unsupporting sharing policy")}return r}function qt(e,t){if(null===t)return this.isReference&&St("null is not a valid "+this.name),0;t.$$||St('Cannot pass "'+Rr(t)+'" as a '+this.name),t.$$.ptr||St("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&St("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;return jt(t.$$.ptr,r,this.registeredClass)}function Yt(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Xt(e){this.rawDestructor&&this.rawDestructor(e)}function Qt(e){null!==e&&e.delete()}function Kt(e,t,r){if(t===r)return e;if(void 0===r.baseClass)return null;var n=Kt(e,t,r.baseClass);return null===n?null:r.downcast(n)}function Zt(){return Object.keys(rr).length}function Jt(){var e=[];for(var t in rr)rr.hasOwnProperty(t)&&e.push(rr[t]);return e}function er(e){Ft=e,Rt.length&&Ft&&Ft(Lt)}function tr(){a.getInheritedInstanceCount=Zt,a.getLiveInheritedInstances=Jt,a.flushPendingDeletes=Lt,a.setDelayFunction=er}var rr={};function nr(e,t){for(void 0===t&&St("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function ir(e,t){return t=nr(e,t),rr[t]}function or(e,t){return t.ptrType&&t.ptr||mt("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!==!!t.smartPtr&&mt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Object.create(e,{$$:{value:t}})}function ar(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=ir(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function i(){return this.isSmartPointer?or(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):or(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o,a=this.registeredClass.getActualType(t),s=Gt[a];if(!s)return i.call(this);o=this.isConst?s.constPointerType:s.pointerType;var u=Kt(t,this.registeredClass,o.registeredClass);return null===u?i.call(this):this.isSmartPointer?or(o.registeredClass.instancePrototype,{ptrType:o,ptr:u,smartPtrType:this,smartPtr:e}):or(o.registeredClass.instancePrototype,{ptrType:o,ptr:u})}function sr(){ur.prototype.getPointee=Yt,ur.prototype.destructor=Xt,ur.prototype.argPackAdvance=8,ur.prototype.readValueFromPointer=it,ur.prototype.deleteObject=Qt,ur.prototype.fromWireType=ar}function ur(e,t,r,n,i,o,a,s,u,c,f){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=i,this.pointeeType=o,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=u,this.rawShare=c,this.rawDestructor=f,i||void 0!==t.baseClass?this.toWireType=Ht:n?(this.toWireType=zt,this.destructorFunction=null):(this.toWireType=qt,this.destructorFunction=null)}function cr(e,t,r){a.hasOwnProperty(e)||mt("Replacing nonexistant public symbol"),void 0!==a[e].overloadTable&&void 0!==r?a[e].overloadTable[r]=t:(a[e]=t,a[e].argCount=r)}function fr(e,t){var r;if(e=wt(e),void 0!==a["FUNCTION_TABLE_"+e])r=a["FUNCTION_TABLE_"+e][t];else if("undefined"!=typeof FUNCTION_TABLE)r=FUNCTION_TABLE[t];else{var n=a["dynCall_"+e];void 0===n&&void 0===(n=a["dynCall_"+e.replace(/f/g,"d")])&&St("No dynCall invoker for signature: "+e),r=function(r){for(var n=[],i=1;i<e.length;++i)n.push("a"+i);var o="return function "+("dynCall_"+e+"_"+t)+"("+n.join(", ")+") {\n";return o+="    return dynCall(rawFunction"+(n.length?", ":"")+n.join(", ")+");\n",o+="};\n",new Function("dynCall","rawFunction",o)(r,t)}(n)}return"function"!=typeof r&&St("unknown function pointer with signature "+e+": "+t),r}var lr=void 0;function dr(e){var t=$f(e),r=wt(t);return jf(t),r}function pr(e,t){var r=[],n={};throw t.forEach(function e(t){n[t]||at[t]||(st[t]?st[t].forEach(e):(r.push(t),n[t]=!0))}),new lr(e+": "+r.map(dr).join([", "]))}function mr(e,t,r,n,i,o,a,s,u,c,f,l,d){f=wt(f),o=fr(i,o),s&&(s=fr(a,s)),c&&(c=fr(u,c)),d=fr(l,d);var p=ft(f);Wt(p,function(){pr("Cannot construct "+f+" due to unbound types",[n])}),ht([e,t,r],n?[n]:[],function(t){var r,i;t=t[0],i=n?(r=t.registeredClass).instancePrototype:Ut.prototype;var a=lt(p,function(){if(Object.getPrototypeOf(this)!==u)throw new xt("Use 'new' to construct "+f);if(void 0===l.constructor_body)throw new xt(f+" has no accessible constructor");var e=l.constructor_body[arguments.length];if(void 0===e)throw new xt("Tried to invoke ctor of "+f+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(l.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)}),u=Object.create(i,{constructor:{value:a}});a.prototype=u;var l=new $t(f,a,u,d,r,o,s,c),m=new ur(f,l,!0,!1,!1),h=new ur(f+"*",l,!1,!1,!1),g=new ur(f+" const*",l,!1,!0,!1);return Gt[e]={pointerType:h,constPointerType:g},cr(p,a),[m,h,g]})}function hr(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=lt(e.name||"unknownFunctionName",function(){});r.prototype=e.prototype;var n=new r,i=e.apply(n,t);return i instanceof Object?i:n}function gr(e,t,r,n,i){var o=t.length;o<2&&St("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==t[1]&&null!==r,s=!1,u=1;u<t.length;++u)if(null!==t[u]&&void 0===t[u].destructorFunction){s=!0;break}var c="void"!==t[0].name,f="",l="";for(u=0;u<o-2;++u)f+=(0!==u?", ":"")+"arg"+u,l+=(0!==u?", ":"")+"arg"+u+"Wired";var d="return function "+ft(e)+"("+f+") {\nif (arguments.length !== "+(o-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(o-2)+" args!');\n}\n";s&&(d+="var destructors = [];\n");var p=s?"destructors":"null",m=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],h=[St,n,i,nt,t[0],t[1]];a&&(d+="var thisWired = classParam.toWireType("+p+", this);\n");for(u=0;u<o-2;++u)d+="var arg"+u+"Wired = argType"+u+".toWireType("+p+", arg"+u+"); // "+t[u+2].name+"\n",m.push("argType"+u),h.push(t[u+2]);if(a&&(l="thisWired"+(l.length>0?", ":"")+l),d+=(c?"var rv = ":"")+"invoker(fn"+(l.length>0?", ":"")+l+");\n",s)d+="runDestructors(destructors);\n";else for(u=a?1:2;u<t.length;++u){var g=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==t[u].destructorFunction&&(d+=g+"_dtor("+g+"); // "+t[u].name+"\n",m.push(g+"_dtor"),h.push(t[u].destructorFunction))}return c&&(d+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),d+="}\n",m.push(d),hr(Function,m).apply(null,h)}function yr(e,t){for(var r=[],n=0;n<e;n++)r.push(V[(t>>2)+n]);return r}function vr(e,t,r,n,i,o,a){var s=yr(r,n);t=wt(t),o=fr(i,o),ht([],[e],function(e){var n=(e=e[0]).name+"."+t;function i(){pr("Cannot call "+n+" due to unbound types",s)}var u=e.registeredClass.constructor;return void 0===u[t]?(i.argCount=r-1,u[t]=i):(Vt(u,t,n),u[t].overloadTable[r-1]=i),ht([],s,function(e){var i=[e[0],null].concat(e.slice(1)),s=gr(n,i,null,o,a);return void 0===u[t].overloadTable?(s.argCount=r-1,u[t]=s):u[t].overloadTable[r-1]=s,[]}),[]})}function _r(e,t,r,n,i,o){var a=yr(t,r);i=fr(n,i),ht([],[e],function(e){var r="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new xt("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){pr("Cannot construct "+e.name+" due to unbound types",a)},ht([],a,function(n){return e.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&St(r+" called with "+arguments.length+" arguments, expected "+(t-1));var e=[],a=new Array(t);a[0]=o;for(var s=1;s<t;++s)a[s]=n[s].toWireType(e,arguments[s-1]);var u=i.apply(null,a);return nt(e),n[0].fromWireType(u)},[]}),[]})}function br(e,t,r,n,i,o,a,s){var u=yr(r,n);t=wt(t),o=fr(i,o),ht([],[e],function(e){var n=(e=e[0]).name+"."+t;function i(){pr("Cannot call "+n+" due to unbound types",u)}s&&e.registeredClass.pureVirtualFunctions.push(t);var c=e.registeredClass.instancePrototype,f=c[t];return void 0===f||void 0===f.overloadTable&&f.className!==e.name&&f.argCount===r-2?(i.argCount=r-2,i.className=e.name,c[t]=i):(Vt(c,t,n),c[t].overloadTable[r-2]=i),ht([],u,function(i){var s=gr(n,i,e,o,a);return void 0===c[t].overloadTable?(s.argCount=r-2,c[t]=s):c[t].overloadTable[r-2]=s,[]}),[]})}function Er(e,t,r){return e instanceof Object||St(r+' with invalid "this": '+e),e instanceof t.registeredClass.constructor||St(r+' incompatible with "this" of type '+e.constructor.name),e.$$.ptr||St("cannot call emscripten binding method "+r+" on deleted object"),jt(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)}function wr(e,t,r,n,i,o,a,s,u,c){t=wt(t),i=fr(n,i),ht([],[e],function(e){var n=(e=e[0]).name+"."+t,f={get:function(){pr("Cannot access "+n+" due to unbound types",[r,a])},enumerable:!0,configurable:!0};return f.set=u?function(){pr("Cannot access "+n+" due to unbound types",[r,a])}:function(e){St(n+" is a read-only property")},Object.defineProperty(e.registeredClass.instancePrototype,t,f),ht([],u?[r,a]:[r],function(r){var a=r[0],f={get:function(){var t=Er(this,e,n+" getter");return a.fromWireType(i(o,t))},enumerable:!0};if(u){u=fr(s,u);var l=r[1];f.set=function(t){var r=Er(this,e,n+" setter"),i=[];u(c,r,l.toWireType(i,t)),nt(i)}}return Object.defineProperty(e.registeredClass.instancePrototype,t,f),[]}),[]})}var xr=[],Sr=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Tr(e){e>4&&0==--Sr[e].refcount&&(Sr[e]=void 0,xr.push(e))}function Pr(){for(var e=0,t=5;t<Sr.length;++t)void 0!==Sr[t]&&++e;return e}function Ar(){for(var e=5;e<Sr.length;++e)if(void 0!==Sr[e])return Sr[e];return null}function Cr(){a.count_emval_handles=Pr,a.get_first_emval=Ar}function Mr(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=xr.length?xr.pop():Sr.length;return Sr[t]={refcount:1,value:e},t}}function Br(e,t){Tt(e,{name:t=wt(t),fromWireType:function(e){var t=Sr[e].value;return Tr(e),t},toWireType:function(e,t){return Mr(t)},argPackAdvance:8,readValueFromPointer:it,destructorFunction:null})}function Dr(e,t,r){switch(t){case 0:return function(e){var t=r?O:N;return this.fromWireType(t[e])};case 1:return function(e){var t=r?U:G;return this.fromWireType(t[e>>1])};case 2:return function(e){var t=r?V:W;return this.fromWireType(t[e>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function Ir(e,t,r,n){var i=_t(r);function o(){}t=wt(t),o.values={},Tt(e,{name:t,constructor:o,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:Dr(t,i,n),destructorFunction:null}),Wt(t,o)}function kr(e,t){var r=at[e];return void 0===r&&St(t+" has unknown type "+dr(e)),r}function Fr(e,t,r){var n=kr(e,"enum");t=wt(t);var i=n.constructor,o=Object.create(n.constructor.prototype,{value:{value:r},constructor:{value:lt(n.name+"_"+t,function(){})}});i.values[r]=o,i[t]=o}function Rr(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function Lr(e,t){switch(t){case 2:return function(e){return this.fromWireType($[e>>2])};case 3:return function(e){return this.fromWireType(j[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Or(e,t,r){var n=_t(r);Tt(e,{name:t=wt(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+Rr(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:Lr(t,n),destructorFunction:null})}function Nr(e,t,r,n,i,o){var a=yr(t,r);e=wt(e),i=fr(n,i),Wt(e,function(){pr("Cannot call "+e+" due to unbound types",a)},t-1),ht([],a,function(r){var n=[r[0],null].concat(r.slice(1));return cr(e,gr(e,n,null,i,o),t-1),[]})}function Ur(e,t,r){switch(t){case 0:return r?function(e){return O[e]}:function(e){return N[e]};case 1:return r?function(e){return U[e>>1]}:function(e){return G[e>>1]};case 2:return r?function(e){return V[e>>2]}:function(e){return W[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Gr(e,t,r,n,i){t=wt(t),-1===i&&(i=4294967295);var o=_t(r),a=function(e){return e};if(0===n){var s=32-8*r;a=function(e){return e<<s>>>s}}var u=-1!=t.indexOf("unsigned");Tt(e,{name:t,fromWireType:a,toWireType:function(e,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError('Cannot convert "'+Rr(r)+'" to '+this.name);if(r<n||r>i)throw new TypeError('Passing a number "'+Rr(r)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+n+", "+i+"]!");return u?r>>>0:0|r},argPackAdvance:8,readValueFromPointer:Ur(t,o,0!==n),destructorFunction:null})}function Vr(e,t,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function i(e){var t=W,r=t[e>>=2],i=t[e+1];return new n(t.buffer,i,r)}Tt(e,{name:r=wt(r),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})}function Wr(e,t){var r="std::string"===(t=wt(t));Tt(e,{name:t,fromWireType:function(e){var t,n=W[e>>2];if(r){var i=N[e+4+n],o=0;0!=i&&(o=i,N[e+4+n]=0);for(var a=e+4,s=0;s<=n;++s){var u=e+4+s;if(0==N[u]){var c=C(a);void 0===t?t=c:(t+=String.fromCharCode(0),t+=c),a=u+1}}0!=o&&(N[e+4+n]=o)}else{var f=new Array(n);for(s=0;s<n;++s)f[s]=String.fromCharCode(N[e+4+s]);t=f.join("")}return jf(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n="string"==typeof t;n||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||St("Cannot pass non-string to std::string");var i=(r&&n?function(){return D(t)}:function(){return t.length})(),o=Hf(4+i+1);if(W[o>>2]=i,r&&n)B(t,o+4,i+1);else if(n)for(var a=0;a<i;++a){var s=t.charCodeAt(a);s>255&&(jf(o),St("String has UTF-16 code units that do not fit in 8 bits")),N[o+4+a]=s}else for(a=0;a<i;++a)N[o+4+a]=t[a];return null!==e&&e.push(jf,o),o},argPackAdvance:8,readValueFromPointer:it,destructorFunction:function(e){jf(e)}})}function $r(e,t,r){var n,i;r=wt(r),2===t?(n=function(){return G},i=1):4===t&&(n=function(){return W},i=2),Tt(e,{name:r,fromWireType:function(e){for(var t=n(),r=W[e>>2],o=new Array(r),a=e+4>>i,s=0;s<r;++s)o[s]=String.fromCharCode(t[a+s]);return jf(e),o.join("")},toWireType:function(e,r){var o=n(),a=r.length,s=Hf(4+a*t);W[s>>2]=a;for(var u=s+4>>i,c=0;c<a;++c)o[u+c]=r.charCodeAt(c);return null!==e&&e.push(jf,s),s},argPackAdvance:8,readValueFromPointer:it,destructorFunction:function(e){jf(e)}})}function jr(e,t,r,n,i,o){rt[e]={name:wt(t),rawConstructor:fr(r,n),rawDestructor:fr(i,o),elements:[]}}function zr(e,t,r,n,i,o,a,s,u){rt[e].elements.push({getterReturnType:t,getter:fr(r,n),getterContext:i,setterArgumentType:o,setter:fr(a,s),setterContext:u})}function Hr(e,t,r,n,i,o){yt[e]={name:wt(t),rawConstructor:fr(r,n),rawDestructor:fr(i,o),fields:[]}}function qr(e,t,r,n,i,o,a,s,u,c){yt[e].fields.push({fieldName:wt(t),getterReturnType:r,getter:fr(n,i),getterContext:o,setterArgumentType:a,setter:fr(s,u),setterContext:c})}function Yr(e,t){Tt(e,{isVoid:!0,name:t=wt(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}function Xr(e){return e||St("Cannot use deleted val. handle = "+e),Sr[e].value}function Qr(e,t,r){e=Xr(e),t=kr(t,"emval::as");var n=[],i=Mr(n);return V[r>>2]=i,t.toWireType(n,e)}function Kr(e,t){return Mr((e=Xr(e))[t=Xr(t)])}function Zr(e){e>4&&(Sr[e].refcount+=1)}var Jr={};function en(e){var t=Jr[e];return void 0===t?wt(e):t}function tn(e){return Mr(en(e))}function rn(e){nt(Sr[e].value),Tr(e)}function nn(e,t){return Mr((e=kr(e,"_emval_take_value")).readValueFromPointer(t))}function on(){a.abort()}function an(){Qf()}function sn(){return f||"undefined"!=typeof dateNow||(u||c)&&self.performance&&self.performance.now}function un(e,t){var r;if(0===e)r=Date.now();else{if(1!==e||!sn())return Ue(22),-1;r=an()}return V[t>>2]=r/1e3|0,V[t+4>>2]=r%1e3*1e3*1e3|0,0}function cn(){return J}var fn={counter:1,lastError:0,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},currentContext:null,offscreenCanvases:{},timerQueriesEXT:[],queries:[],samplers:[],transformFeedbacks:[],syncs:[],programInfos:{},stringCache:{},stringiCache:{},unpackAlignment:4,init:function(){fn.miniTempBuffer=new Float32Array(fn.MINI_TEMP_BUFFER_SIZE);for(var e=0;e<fn.MINI_TEMP_BUFFER_SIZE;e++)fn.miniTempBufferViews[e]=fn.miniTempBuffer.subarray(0,e+1)},recordError:function(e){fn.lastError||(fn.lastError=e)},getNewId:function(e){for(var t=fn.counter++,r=e.length;r<t;r++)e[r]=null;return t},MINI_TEMP_BUFFER_SIZE:256,miniTempBuffer:null,miniTempBufferViews:[0],getSource:function(e,t,r,n){for(var i="",o=0;o<t;++o){var a=n?V[n+4*o>>2]:-1;i+=C(V[r+4*o>>2],a<0?void 0:a)}return i},createContext:function(e,t){var r=t.majorVersion>1?e.getContext("webgl2",t):e.getContext("webgl",t)||e.getContext("experimental-webgl",t);return r&&fn.registerContext(r,t)},registerContext:function(e,t){var r=Hf(8),n={handle:r,attributes:t,version:t.majorVersion,GLctx:e};function i(){var e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return!!e&&parseInt(e[2],10)}return n.supportsWebGL2EntryPoints=n.version>=2&&(!1===i()||i()>=58),e.canvas&&(e.canvas.GLctxObject=n),fn.contexts[r]=n,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&fn.initExtensions(n),r},makeContextCurrent:function(e){return fn.currentContext=fn.contexts[e],a.ctx=Qa=fn.currentContext&&fn.currentContext.GLctx,!(e&&!Qa)},getContext:function(e){return fn.contexts[e]},deleteContext:function(e){fn.currentContext===fn.contexts[e]&&(fn.currentContext=null),"object"==typeof JSEvents&&JSEvents.removeAllHandlersOnTarget(fn.contexts[e].GLctx.canvas),fn.contexts[e]&&fn.contexts[e].GLctx.canvas&&(fn.contexts[e].GLctx.canvas.GLctxObject=void 0),jf(fn.contexts[e]),fn.contexts[e]=null},initExtensions:function(e){if(e||(e=fn.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t=e.GLctx;if(e.version<2){var r=t.getExtension("ANGLE_instanced_arrays");r&&(t.vertexAttribDivisor=function(e,t){r.vertexAttribDivisorANGLE(e,t)},t.drawArraysInstanced=function(e,t,n,i){r.drawArraysInstancedANGLE(e,t,n,i)},t.drawElementsInstanced=function(e,t,n,i,o){r.drawElementsInstancedANGLE(e,t,n,i,o)});var n=t.getExtension("OES_vertex_array_object");n&&(t.createVertexArray=function(){return n.createVertexArrayOES()},t.deleteVertexArray=function(e){n.deleteVertexArrayOES(e)},t.bindVertexArray=function(e){n.bindVertexArrayOES(e)},t.isVertexArray=function(e){return n.isVertexArrayOES(e)});var i=t.getExtension("WEBGL_draw_buffers");i&&(t.drawBuffers=function(e,t){i.drawBuffersWEBGL(e,t)})}t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query");var o=["OES_texture_float","OES_texture_half_float","OES_standard_derivatives","OES_vertex_array_object","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_frag_depth","WEBGL_draw_buffers","ANGLE_instanced_arrays","OES_texture_float_linear","OES_texture_half_float_linear","EXT_blend_minmax","EXT_shader_texture_lod","WEBGL_compressed_texture_pvrtc","EXT_color_buffer_half_float","WEBGL_color_buffer_float","EXT_sRGB","WEBGL_compressed_texture_etc1","EXT_disjoint_timer_query","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_astc","EXT_color_buffer_float","WEBGL_compressed_texture_s3tc_srgb","EXT_disjoint_timer_query_webgl2"],a=t.getSupportedExtensions();a&&a.length>0&&t.getSupportedExtensions().forEach(function(e){-1!=o.indexOf(e)&&t.getExtension(e)})}},populateUniformTable:function(e){for(var t=fn.programs[e],r=fn.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},n=r.uniforms,i=Qa.getProgramParameter(t,35718),o=0;o<i;++o){var a=Qa.getActiveUniform(t,o),s=a.name;r.maxUniformLength=Math.max(r.maxUniformLength,s.length+1),"]"==s.slice(-1)&&(s=s.slice(0,s.lastIndexOf("[")));var u=Qa.getUniformLocation(t,s);if(u){var c=fn.getNewId(fn.uniforms);n[s]=[a.size,c],fn.uniforms[c]=u;for(var f=1;f<a.size;++f){var l=s+"["+f+"]";u=Qa.getUniformLocation(t,l),c=fn.getNewId(fn.uniforms),fn.uniforms[c]=u}}}}};function ln(e){Qa.activeTexture(e)}function dn(e,t){Qa.attachShader(fn.programs[e],fn.shaders[t])}function pn(e,t){Qa.beginQuery(e,fn.queries[t])}function mn(e,t){Qa.disjointTimerQueryExt.beginQueryEXT(e,fn.timerQueriesEXT[t])}function hn(e){Qa.beginTransformFeedback(e)}function gn(e,t,r){Qa.bindAttribLocation(fn.programs[e],t,C(r))}function yn(e,t){35051==e?Qa.currentPixelPackBufferBinding=t:35052==e&&(Qa.currentPixelUnpackBufferBinding=t),Qa.bindBuffer(e,fn.buffers[t])}function vn(e,t,r){Qa.bindBufferBase(e,t,fn.buffers[r])}function _n(e,t,r,n,i){Qa.bindBufferRange(e,t,fn.buffers[r],n,i)}function bn(e,t){Qa.bindFramebuffer(e,fn.framebuffers[t])}function En(e,t){Qa.bindRenderbuffer(e,fn.renderbuffers[t])}function wn(e,t){Qa.bindSampler(e,fn.samplers[t])}function xn(e,t){Qa.bindTexture(e,fn.textures[t])}function Sn(e,t){Qa.bindTransformFeedback(e,fn.transformFeedbacks[t])}function Tn(e){Qa.bindVertexArray(fn.vaos[e])}function Pn(e){Qa.bindVertexArray(fn.vaos[e])}function An(e,t,r,n){Qa.blendColor(e,t,r,n)}function Cn(e){Qa.blendEquation(e)}function Mn(e,t){Qa.blendEquationSeparate(e,t)}function Bn(e,t){Qa.blendFunc(e,t)}function Dn(e,t,r,n){Qa.blendFuncSeparate(e,t,r,n)}function In(e,t,r,n,i,o,a,s,u,c){Qa.blitFramebuffer(e,t,r,n,i,o,a,s,u,c)}function kn(e,t,r,n){fn.currentContext.supportsWebGL2EntryPoints?r?Qa.bufferData(e,N,n,r,t):Qa.bufferData(e,t,n):Qa.bufferData(e,r?N.subarray(r,r+t):t,n)}function Fn(e,t,r,n){fn.currentContext.supportsWebGL2EntryPoints?Qa.bufferSubData(e,t,N,n,r):Qa.bufferSubData(e,t,N.subarray(n,n+r))}function Rn(e){return Qa.checkFramebufferStatus(e)}function Ln(e){Qa.clear(e)}function On(e,t,r,n){Qa.clearBufferfi(e,t,r,n)}function Nn(e,t,r){Qa.clearBufferfv(e,t,$,r>>2)}function Un(e,t,r){Qa.clearBufferiv(e,t,V,r>>2)}function Gn(e,t,r){Qa.clearBufferuiv(e,t,W,r>>2)}function Vn(e,t,r,n){Qa.clearColor(e,t,r,n)}function Wn(e){Qa.clearDepth(e)}function $n(e){Qa.clearStencil(e)}function jn(e,t,r,n){n>>>=0;var i=4294967295==(r>>>=0)&&4294967295==n?-1:_(r,n,!0);return Qa.clientWaitSync(fn.syncs[e],t,i)}function zn(e,t,r,n){Qa.colorMask(!!e,!!t,!!r,!!n)}function Hn(e){Qa.compileShader(fn.shaders[e])}function qn(e,t,r,n,i,o,a,s){fn.currentContext.supportsWebGL2EntryPoints?Qa.currentPixelUnpackBufferBinding?Qa.compressedTexImage2D(e,t,r,n,i,o,a,s):Qa.compressedTexImage2D(e,t,r,n,i,o,N,s,a):Qa.compressedTexImage2D(e,t,r,n,i,o,s?N.subarray(s,s+a):null)}function Yn(e,t,r,n,i,o,a,s,u){fn.currentContext.supportsWebGL2EntryPoints?Qa.currentPixelUnpackBufferBinding?Qa.compressedTexImage3D(e,t,r,n,i,o,a,s,u):Qa.compressedTexImage3D(e,t,r,n,i,o,a,N,u,s):Qa.compressedTexImage3D(e,t,r,n,i,o,a,u?N.subarray(u,u+s):null)}function Xn(e,t,r,n,i,o,a,s,u){fn.currentContext.supportsWebGL2EntryPoints?Qa.currentPixelUnpackBufferBinding?Qa.compressedTexSubImage2D(e,t,r,n,i,o,a,s,u):Qa.compressedTexSubImage2D(e,t,r,n,i,o,a,N,u,s):Qa.compressedTexSubImage2D(e,t,r,n,i,o,a,u?N.subarray(u,u+s):null)}function Qn(e,t,r,n,i,o,a,s,u,c,f){fn.currentContext.supportsWebGL2EntryPoints?Qa.currentPixelUnpackBufferBinding?Qa.compressedTexSubImage3D(e,t,r,n,i,o,a,s,u,c,f):Qa.compressedTexSubImage3D(e,t,r,n,i,o,a,s,u,N,f,c):Qa.compressedTexSubImage3D(e,t,r,n,i,o,a,s,u,f?N.subarray(f,f+c):null)}function Kn(e,t,r,n,i){Qa.copyBufferSubData(e,t,r,n,i)}function Zn(e,t,r,n,i,o,a,s){Qa.copyTexImage2D(e,t,r,n,i,o,a,s)}function Jn(e,t,r,n,i,o,a,s){Qa.copyTexSubImage2D(e,t,r,n,i,o,a,s)}function ei(e,t,r,n,i,o,a,s,u){Qa.copyTexSubImage3D(e,t,r,n,i,o,a,s,u)}function ti(){var e=fn.getNewId(fn.programs),t=Qa.createProgram();return t.name=e,fn.programs[e]=t,e}function ri(e){var t=fn.getNewId(fn.shaders);return fn.shaders[t]=Qa.createShader(e),t}function ni(e){Qa.cullFace(e)}function ii(e,t){for(var r=0;r<e;r++){var n=V[t+4*r>>2],i=fn.buffers[n];i&&(Qa.deleteBuffer(i),i.name=0,fn.buffers[n]=null,n==fn.currArrayBuffer&&(fn.currArrayBuffer=0),n==fn.currElementArrayBuffer&&(fn.currElementArrayBuffer=0),n==Qa.currentPixelPackBufferBinding&&(Qa.currentPixelPackBufferBinding=0),n==Qa.currentPixelUnpackBufferBinding&&(Qa.currentPixelUnpackBufferBinding=0))}}function oi(e,t){for(var r=0;r<e;++r){var n=V[t+4*r>>2],i=fn.framebuffers[n];i&&(Qa.deleteFramebuffer(i),i.name=0,fn.framebuffers[n]=null)}}function ai(e){if(e){var t=fn.programs[e];t?(Qa.deleteProgram(t),t.name=0,fn.programs[e]=null,fn.programInfos[e]=null):fn.recordError(1281)}}function si(e,t){for(var r=0;r<e;r++){var n=V[t+4*r>>2],i=fn.queries[n];i&&(Qa.deleteQuery(i),fn.queries[n]=null)}}function ui(e,t){for(var r=0;r<e;r++){var n=V[t+4*r>>2],i=fn.timerQueriesEXT[n];i&&(Qa.disjointTimerQueryExt.deleteQueryEXT(i),fn.timerQueriesEXT[n]=null)}}function ci(e,t){for(var r=0;r<e;r++){var n=V[t+4*r>>2],i=fn.renderbuffers[n];i&&(Qa.deleteRenderbuffer(i),i.name=0,fn.renderbuffers[n]=null)}}function fi(e,t){for(var r=0;r<e;r++){var n=V[t+4*r>>2],i=fn.samplers[n];i&&(Qa.deleteSampler(i),i.name=0,fn.samplers[n]=null)}}function li(e){if(e){var t=fn.shaders[e];t?(Qa.deleteShader(t),fn.shaders[e]=null):fn.recordError(1281)}}function di(e){if(e){var t=fn.syncs[e];t?(Qa.deleteSync(t),t.name=0,fn.syncs[e]=null):fn.recordError(1281)}}function pi(e,t){for(var r=0;r<e;r++){var n=V[t+4*r>>2],i=fn.textures[n];i&&(Qa.deleteTexture(i),i.name=0,fn.textures[n]=null)}}function mi(e,t){for(var r=0;r<e;r++){var n=V[t+4*r>>2],i=fn.transformFeedbacks[n];i&&(Qa.deleteTransformFeedback(i),i.name=0,fn.transformFeedbacks[n]=null)}}function hi(e,t){for(var r=0;r<e;r++){var n=V[t+4*r>>2];Qa.deleteVertexArray(fn.vaos[n]),fn.vaos[n]=null}}function gi(e,t){for(var r=0;r<e;r++){var n=V[t+4*r>>2];Qa.deleteVertexArray(fn.vaos[n]),fn.vaos[n]=null}}function yi(e){Qa.depthFunc(e)}function vi(e){Qa.depthMask(!!e)}function _i(e,t){Qa.depthRange(e,t)}function bi(e,t){Qa.detachShader(fn.programs[e],fn.shaders[t])}function Ei(e){Qa.disable(e)}function wi(e){Qa.disableVertexAttribArray(e)}function xi(e,t,r){Qa.drawArrays(e,t,r)}function Si(e,t,r,n){Qa.drawArraysInstanced(e,t,r,n)}function Ti(e,t,r,n){Qa.drawArraysInstanced(e,t,r,n)}function Pi(e,t,r,n){Qa.drawArraysInstanced(e,t,r,n)}function Ai(e,t,r,n){Qa.drawArraysInstanced(e,t,r,n)}function Ci(e,t,r,n){Qa.drawArraysInstanced(e,t,r,n)}var Mi=[];function Bi(e,t){for(var r=Mi[e],n=0;n<e;n++)r[n]=V[t+4*n>>2];Qa.drawBuffers(r)}function Di(e,t){for(var r=Mi[e],n=0;n<e;n++)r[n]=V[t+4*n>>2];Qa.drawBuffers(r)}function Ii(e,t){for(var r=Mi[e],n=0;n<e;n++)r[n]=V[t+4*n>>2];Qa.drawBuffers(r)}function ki(e,t,r,n){Qa.drawElements(e,t,r,n)}function Fi(e,t,r,n,i){Qa.drawElementsInstanced(e,t,r,n,i)}function Ri(e,t,r,n,i){Qa.drawElementsInstanced(e,t,r,n,i)}function Li(e,t,r,n,i){Qa.drawElementsInstanced(e,t,r,n,i)}function Oi(e,t,r,n,i){Qa.drawElementsInstanced(e,t,r,n,i)}function Ni(e,t,r,n,i){Qa.drawElementsInstanced(e,t,r,n,i)}function Ui(e,t,r,n){Qa.drawElements(e,t,r,n)}function Gi(e,t,r,n,i,o){Ui(e,n,i,o)}function Vi(e){Qa.enable(e)}function Wi(e){Qa.enableVertexAttribArray(e)}function $i(e){Qa.endQuery(e)}function ji(e){Qa.disjointTimerQueryExt.endQueryEXT(e)}function zi(){Qa.endTransformFeedback()}function Hi(e,t){var r=Qa.fenceSync(e,t);if(r){var n=fn.getNewId(fn.syncs);return r.name=n,fn.syncs[n]=r,n}return 0}function qi(){Qa.finish()}function Yi(){Qa.flush()}function Xi(){y("missing function: emscripten_glFlushMappedBufferRange"),Qf(-1)}function Qi(e,t,r,n){Qa.framebufferRenderbuffer(e,t,r,fn.renderbuffers[n])}function Ki(e,t,r,n,i){Qa.framebufferTexture2D(e,t,r,fn.textures[n],i)}function Zi(e,t,r,n,i){Qa.framebufferTextureLayer(e,t,fn.textures[r],n,i)}function Ji(e){Qa.frontFace(e)}function eo(e,t,r,n){for(var i=0;i<e;i++){var o=Qa[r](),a=o&&fn.getNewId(n);o?(o.name=a,n[a]=o):fn.recordError(1282),V[t+4*i>>2]=a}}function to(e,t){eo(e,t,"createBuffer",fn.buffers)}function ro(e,t){eo(e,t,"createFramebuffer",fn.framebuffers)}function no(e,t){eo(e,t,"createQuery",fn.queries)}function io(e,t){for(var r=0;r<e;r++){var n=Qa.disjointTimerQueryExt.createQueryEXT();if(!n){for(fn.recordError(1282);r<e;)V[t+4*r++>>2]=0;return}var i=fn.getNewId(fn.timerQueriesEXT);n.name=i,fn.timerQueriesEXT[i]=n,V[t+4*r>>2]=i}}function oo(e,t){eo(e,t,"createRenderbuffer",fn.renderbuffers)}function ao(e,t){eo(e,t,"createSampler",fn.samplers)}function so(e,t){eo(e,t,"createTexture",fn.textures)}function uo(e,t){eo(e,t,"createTransformFeedback",fn.transformFeedbacks)}function co(e,t){eo(e,t,"createVertexArray",fn.vaos)}function fo(e,t){eo(e,t,"createVertexArray",fn.vaos)}function lo(e){Qa.generateMipmap(e)}function po(e,t,r,n,i,o,a){e=fn.programs[e];var s=Qa.getActiveAttrib(e,t);if(s){if(r>0&&a){var u=B(s.name,a,r);n&&(V[n>>2]=u)}else n&&(V[n>>2]=0);i&&(V[i>>2]=s.size),o&&(V[o>>2]=s.type)}}function mo(e,t,r,n,i,o,a){e=fn.programs[e];var s=Qa.getActiveUniform(e,t);if(s){if(r>0&&a){var u=B(s.name,a,r);n&&(V[n>>2]=u)}else n&&(V[n>>2]=0);i&&(V[i>>2]=s.size),o&&(V[o>>2]=s.type)}}function ho(e,t,r,n,i){e=fn.programs[e];var o=Qa.getActiveUniformBlockName(e,t);if(o)if(i&&r>0){var a=B(o,i,r);n&&(V[n>>2]=a)}else n&&(V[n>>2]=0)}function go(e,t,r,n){if(n)switch(e=fn.programs[e],r){case 35393:var i=Qa.getActiveUniformBlockName(e,t);return void(V[n>>2]=i.length+1);default:var o=Qa.getActiveUniformBlockParameter(e,t,r);if(!o)return;if("number"==typeof o)V[n>>2]=o;else for(var a=0;a<o.length;a++)V[n+4*a>>2]=o[a]}else fn.recordError(1281)}function yo(e,t,r,n,i){if(i)if(t>0&&0==r)fn.recordError(1281);else{e=fn.programs[e];for(var o=[],a=0;a<t;a++)o.push(V[r+4*a>>2]);var s=Qa.getActiveUniforms(e,o,n);if(s){var u=s.length;for(a=0;a<u;a++)V[i+4*a>>2]=s[a]}}else fn.recordError(1281)}function vo(e,t,r,n){var i=Qa.getAttachedShaders(fn.programs[e]),o=i.length;o>t&&(o=t),V[r>>2]=o;for(var a=0;a<o;++a){var s=fn.shaders.indexOf(i[a]);V[n+4*a>>2]=s}}function _o(e,t){return Qa.getAttribLocation(fn.programs[e],C(t))}function bo(e,t,r){if(t){var n=void 0;switch(e){case 36346:n=1;break;case 36344:return void("Integer"!==r&&"Integer64"!==r&&fn.recordError(1280));case 34814:case 36345:n=0;break;case 34466:var i=Qa.getParameter(34467);n=i?i.length:0;break;case 33309:if(fn.currentContext.version<2)return void fn.recordError(1282);n=2*Qa.getSupportedExtensions().length;break;case 33307:case 33308:if(fn.currentContext.version<2)return void fn.recordError(1280);n=33307==e?3:0}if(void 0===n){var o=Qa.getParameter(e);switch(typeof o){case"number":n=o;break;case"boolean":n=o?1:0;break;case"string":return void fn.recordError(1280);case"object":if(null===o)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 35097:case 36389:case 34068:n=0;break;default:return void fn.recordError(1280)}else{if(o instanceof Float32Array||o instanceof Uint32Array||o instanceof Int32Array||o instanceof Array){for(var a=0;a<o.length;++a)switch(r){case"Integer":V[t+4*a>>2]=o[a];break;case"Float":$[t+4*a>>2]=o[a];break;case"Boolean":O[t+a>>0]=o[a]?1:0;break;default:throw"internal glGet error, bad type: "+r}return}try{n=0|o.name}catch(t){return fn.recordError(1280),void y("GL_INVALID_ENUM in glGet"+r+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+t+")")}}break;default:return void fn.recordError(1280)}}switch(r){case"Integer64":tempI64=[n>>>0,(tempDouble=n,+de(tempDouble)>=1?tempDouble>0?(0|he(+me(tempDouble/4294967296),4294967295))>>>0:~~+pe((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],V[t>>2]=tempI64[0],V[t+4>>2]=tempI64[1];break;case"Integer":V[t>>2]=n;break;case"Float":$[t>>2]=n;break;case"Boolean":O[t>>0]=n?1:0;break;default:throw"internal glGet error, bad type: "+r}}else fn.recordError(1281)}function Eo(e,t){bo(e,t,"Boolean")}function wo(e,t,r){r?(tempI64=[Qa.getBufferParameter(e,t)>>>0,(tempDouble=Qa.getBufferParameter(e,t),+de(tempDouble)>=1?tempDouble>0?(0|he(+me(tempDouble/4294967296),4294967295))>>>0:~~+pe((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],V[r>>2]=tempI64[0],V[r+4>>2]=tempI64[1]):fn.recordError(1281)}function xo(e,t,r){r?V[r>>2]=Qa.getBufferParameter(e,t):fn.recordError(1281)}function So(){y("missing function: emscripten_glGetBufferPointerv"),Qf(-1)}function To(){if(fn.lastError){var e=fn.lastError;return fn.lastError=0,e}return Qa.getError()}function Po(e,t){bo(e,t,"Float")}function Ao(e,t){return Qa.getFragDataLocation(fn.programs[e],C(t))}function Co(e,t,r,n){var i=Qa.getFramebufferAttachmentParameter(e,t,r);(i instanceof WebGLRenderbuffer||i instanceof WebGLTexture)&&(i=0|i.name),V[n>>2]=i}function Mo(e,t,r,n){if(r){var i,o=Qa.getIndexedParameter(e,t);switch(typeof o){case"boolean":i=o?1:0;break;case"number":i=o;break;case"object":if(null===o)switch(e){case 35983:case 35368:i=0;break;default:return void fn.recordError(1280)}else{if(!(o instanceof WebGLBuffer))return void fn.recordError(1280);i=0|o.name}break;default:return void fn.recordError(1280)}switch(n){case"Integer64":tempI64=[i>>>0,(tempDouble=i,+de(tempDouble)>=1?tempDouble>0?(0|he(+me(tempDouble/4294967296),4294967295))>>>0:~~+pe((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],V[r>>2]=tempI64[0],V[r+4>>2]=tempI64[1];break;case"Integer":V[r>>2]=i;break;case"Float":$[r>>2]=i;break;case"Boolean":O[r>>0]=i?1:0;break;default:throw"internal emscriptenWebGLGetIndexed() error, bad type: "+n}}else fn.recordError(1281)}function Bo(e,t,r){Mo(e,t,r,"Integer64")}function Do(e,t){bo(e,t,"Integer64")}function Io(e,t,r){Mo(e,t,r,"Integer")}function ko(e,t){bo(e,t,"Integer")}function Fo(){y("missing function: emscripten_glGetInternalformativ"),Qf(-1)}function Ro(e,t,r,n,i){fn.recordError(1282)}function Lo(e,t,r,n){var i=Qa.getProgramInfoLog(fn.programs[e]);if(null===i&&(i="(unknown error)"),t>0&&n){var o=B(i,n,t);r&&(V[r>>2]=o)}else r&&(V[r>>2]=0)}function Oo(e,t,r){if(r)if(e>=fn.counter)fn.recordError(1281);else{var n=fn.programInfos[e];if(n)if(35716==t){var i=Qa.getProgramInfoLog(fn.programs[e]);null===i&&(i="(unknown error)"),V[r>>2]=i.length+1}else if(35719==t)V[r>>2]=n.maxUniformLength;else if(35722==t){if(-1==n.maxAttributeLength){e=fn.programs[e];var o=Qa.getProgramParameter(e,35721);n.maxAttributeLength=0;for(var a=0;a<o;++a){var s=Qa.getActiveAttrib(e,a);n.maxAttributeLength=Math.max(n.maxAttributeLength,s.name.length+1)}}V[r>>2]=n.maxAttributeLength}else if(35381==t){if(-1==n.maxUniformBlockNameLength){e=fn.programs[e];var u=Qa.getProgramParameter(e,35382);n.maxUniformBlockNameLength=0;for(a=0;a<u;++a){var c=Qa.getActiveUniformBlockName(e,a);n.maxUniformBlockNameLength=Math.max(n.maxUniformBlockNameLength,c.length+1)}}V[r>>2]=n.maxUniformBlockNameLength}else V[r>>2]=Qa.getProgramParameter(fn.programs[e],t);else fn.recordError(1282)}else fn.recordError(1281)}function No(e,t,r){if(r){var n,i=fn.timerQueriesEXT[e],o=Qa.disjointTimerQueryExt.getQueryObjectEXT(i,t);n="boolean"==typeof o?o?1:0:o,tempI64=[n>>>0,(tempDouble=n,+de(tempDouble)>=1?tempDouble>0?(0|he(+me(tempDouble/4294967296),4294967295))>>>0:~~+pe((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],V[r>>2]=tempI64[0],V[r+4>>2]=tempI64[1]}else fn.recordError(1281)}function Uo(e,t,r){if(r){var n,i=fn.timerQueriesEXT[e],o=Qa.disjointTimerQueryExt.getQueryObjectEXT(i,t);n="boolean"==typeof o?o?1:0:o,V[r>>2]=n}else fn.recordError(1281)}function Go(e,t,r){if(r){var n,i=fn.timerQueriesEXT[e],o=Qa.disjointTimerQueryExt.getQueryObjectEXT(i,t);n="boolean"==typeof o?o?1:0:o,tempI64=[n>>>0,(tempDouble=n,+de(tempDouble)>=1?tempDouble>0?(0|he(+me(tempDouble/4294967296),4294967295))>>>0:~~+pe((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],V[r>>2]=tempI64[0],V[r+4>>2]=tempI64[1]}else fn.recordError(1281)}function Vo(e,t,r){if(r){var n,i=fn.queries[e],o=Qa.getQueryParameter(i,t);n="boolean"==typeof o?o?1:0:o,V[r>>2]=n}else fn.recordError(1281)}function Wo(e,t,r){if(r){var n,i=fn.timerQueriesEXT[e],o=Qa.disjointTimerQueryExt.getQueryObjectEXT(i,t);n="boolean"==typeof o?o?1:0:o,V[r>>2]=n}else fn.recordError(1281)}function $o(e,t,r){r?V[r>>2]=Qa.getQuery(e,t):fn.recordError(1281)}function jo(e,t,r){r?V[r>>2]=Qa.disjointTimerQueryExt.getQueryEXT(e,t):fn.recordError(1281)}function zo(e,t,r){r?V[r>>2]=Qa.getRenderbufferParameter(e,t):fn.recordError(1281)}function Ho(e,t,r){r?(e=fn.samplers[e],$[r>>2]=Qa.getSamplerParameter(e,t)):fn.recordError(1281)}function qo(e,t,r){r?(e=fn.samplers[e],V[r>>2]=Qa.getSamplerParameter(e,t)):fn.recordError(1281)}function Yo(e,t,r,n){var i=Qa.getShaderInfoLog(fn.shaders[e]);if(null===i&&(i="(unknown error)"),t>0&&n){var o=B(i,n,t);r&&(V[r>>2]=o)}else r&&(V[r>>2]=0)}function Xo(e,t,r,n){var i=Qa.getShaderPrecisionFormat(e,t);V[r>>2]=i.rangeMin,V[r+4>>2]=i.rangeMax,V[n>>2]=i.precision}function Qo(e,t,r,n){var i=Qa.getShaderSource(fn.shaders[e]);if(i)if(t>0&&n){var o=B(i,n,t);r&&(V[r>>2]=o)}else r&&(V[r>>2]=0)}function Ko(e,t,r){if(r)if(35716==t){var n=Qa.getShaderInfoLog(fn.shaders[e]);null===n&&(n="(unknown error)"),V[r>>2]=n.length+1}else if(35720==t){var i=Qa.getShaderSource(fn.shaders[e]),o=null===i||0==i.length?0:i.length+1;V[r>>2]=o}else V[r>>2]=Qa.getShaderParameter(fn.shaders[e],t);else fn.recordError(1281)}function Zo(e){var t=D(e)+1,r=Hf(t);return B(e,r,t),r}function Jo(e){if(fn.stringCache[e])return fn.stringCache[e];var t;switch(e){case 7939:for(var r=Qa.getSupportedExtensions(),n=[],i=0;i<r.length;++i)n.push(r[i]),n.push("GL_"+r[i]);t=Zo(n.join(" "));break;case 7936:case 7937:case 37445:case 37446:var o=Qa.getParameter(e);o||fn.recordError(1280),t=Zo(o);break;case 7938:var a=Qa.getParameter(Qa.VERSION);t=Zo(a=fn.currentContext.version>=2?"OpenGL ES 3.0 ("+a+")":"OpenGL ES 2.0 ("+a+")");break;case 35724:var s=Qa.getParameter(Qa.SHADING_LANGUAGE_VERSION),u=s.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==u&&(3==u[1].length&&(u[1]=u[1]+"0"),s="OpenGL ES GLSL ES "+u[1]+" ("+s+")"),t=Zo(s);break;default:return fn.recordError(1280),0}return fn.stringCache[e]=t,t}function ea(e,t){if(fn.currentContext.version<2)return fn.recordError(1282),0;var r=fn.stringiCache[e];if(r)return t<0||t>=r.length?(fn.recordError(1281),0):r[t];switch(e){case 7939:for(var n=Qa.getSupportedExtensions(),i=[],o=0;o<n.length;++o)i.push(Zo(n[o])),i.push(Zo("GL_"+n[o]));return r=fn.stringiCache[e]=i,t<0||t>=r.length?(fn.recordError(1281),0):r[t];default:return fn.recordError(1280),0}}function ta(e,t,r,n,i){if(r<0)fn.recordError(1281);else if(i){var o=Qa.getSyncParameter(fn.syncs[e],t);V[n>>2]=o,null!==o&&n&&(V[n>>2]=1)}else fn.recordError(1281)}function ra(e,t,r){r?$[r>>2]=Qa.getTexParameter(e,t):fn.recordError(1281)}function na(e,t,r){r?V[r>>2]=Qa.getTexParameter(e,t):fn.recordError(1281)}function ia(e,t,r,n,i,o,a){e=fn.programs[e];var s=Qa.getTransformFeedbackVarying(e,t);if(s){if(a&&r>0){var u=B(s.name,a,r);n&&(V[n>>2]=u)}else n&&(V[n>>2]=0);i&&(V[i>>2]=s.size),o&&(V[o>>2]=s.type)}}function oa(e,t){return Qa.getUniformBlockIndex(fn.programs[e],C(t))}function aa(e,t,r,n){if(n)if(t>0&&(0==r||0==n))fn.recordError(1281);else{e=fn.programs[e];for(var i=[],o=0;o<t;o++)i.push(C(V[r+4*o>>2]));var a=Qa.getUniformIndices(e,i);if(a){var s=a.length;for(o=0;o<s;o++)V[n+4*o>>2]=a[o]}}else fn.recordError(1281)}function sa(e,t){var r=0;if("]"==(t=C(t))[t.length-1]){var n=t.lastIndexOf("[");r="]"!=t[n+1]?parseInt(t.slice(n+1)):0,t=t.slice(0,n)}var i=fn.programInfos[e]&&fn.programInfos[e].uniforms[t];return i&&r>=0&&r<i[0]?i[1]+r:-1}function ua(e,t,r,n){if(r){var i=Qa.getUniform(fn.programs[e],fn.uniforms[t]);if("number"==typeof i||"boolean"==typeof i)switch(n){case"Integer":V[r>>2]=i;break;case"Float":$[r>>2]=i;break;default:throw"internal emscriptenWebGLGetUniform() error, bad type: "+n}else for(var o=0;o<i.length;o++)switch(n){case"Integer":V[r+4*o>>2]=i[o];break;case"Float":$[r+4*o>>2]=i[o];break;default:throw"internal emscriptenWebGLGetUniform() error, bad type: "+n}}else fn.recordError(1281)}function ca(e,t,r){ua(e,t,r,"Float")}function fa(e,t,r){ua(e,t,r,"Integer")}function la(e,t,r){ua(e,t,r,"Integer")}function da(e,t,r,n){if(r){var i=Qa.getVertexAttrib(e,t);if(34975==t)V[r>>2]=i.name;else if("number"==typeof i||"boolean"==typeof i)switch(n){case"Integer":V[r>>2]=i;break;case"Float":$[r>>2]=i;break;case"FloatToInteger":V[r>>2]=Math.fround(i);break;default:throw"internal emscriptenWebGLGetVertexAttrib() error, bad type: "+n}else for(var o=0;o<i.length;o++)switch(n){case"Integer":V[r+4*o>>2]=i[o];break;case"Float":$[r+4*o>>2]=i[o];break;case"FloatToInteger":V[r+4*o>>2]=Math.fround(i[o]);break;default:throw"internal emscriptenWebGLGetVertexAttrib() error, bad type: "+n}}else fn.recordError(1281)}function pa(e,t,r){da(e,t,r,"Integer")}function ma(e,t,r){da(e,t,r,"Integer")}function ha(e,t,r){r?V[r>>2]=Qa.getVertexAttribOffset(e,t):fn.recordError(1281)}function ga(e,t,r){da(e,t,r,"Float")}function ya(e,t,r){da(e,t,r,"FloatToInteger")}function va(e,t){Qa.hint(e,t)}function _a(e,t,r){for(var n=Mi[t],i=0;i<t;i++)n[i]=V[r+4*i>>2];Qa.invalidateFramebuffer(e,n)}function ba(e,t,r,n,i,o,a){for(var s=Mi[t],u=0;u<t;u++)s[u]=V[r+4*u>>2];Qa.invalidateSubFramebuffer(e,s,n,i,o,a)}function Ea(e){var t=fn.buffers[e];return t?Qa.isBuffer(t):0}function wa(e){return Qa.isEnabled(e)}function xa(e){var t=fn.framebuffers[e];return t?Qa.isFramebuffer(t):0}function Sa(e){return(e=fn.programs[e])?Qa.isProgram(e):0}function Ta(e){var t=fn.queries[e];return t?Qa.isQuery(t):0}function Pa(e){var t=fn.timerQueriesEXT[e];return t?Qa.disjointTimerQueryExt.isQueryEXT(t):0}function Aa(e){var t=fn.renderbuffers[e];return t?Qa.isRenderbuffer(t):0}function Ca(e){var t=fn.samplers[e];return t?Qa.isSampler(t):0}function Ma(e){var t=fn.shaders[e];return t?Qa.isShader(t):0}function Ba(e){return(e=fn.syncs[e])?Qa.isSync(e):0}function Da(e){var t=fn.textures[e];return t?Qa.isTexture(t):0}function Ia(e){return Qa.isTransformFeedback(fn.transformFeedbacks[e])}function ka(e){var t=fn.vaos[e];return t?Qa.isVertexArray(t):0}function Fa(e){var t=fn.vaos[e];return t?Qa.isVertexArray(t):0}function Ra(e){Qa.lineWidth(e)}function La(e){Qa.linkProgram(fn.programs[e]),fn.populateUniformTable(e)}function Oa(){y("missing function: emscripten_glMapBufferRange"),Qf(-1)}function Na(){Qa.pauseTransformFeedback()}function Ua(e,t){3317==e&&(fn.unpackAlignment=t),Qa.pixelStorei(e,t)}function Ga(e,t){Qa.polygonOffset(e,t)}function Va(e,t,r,n){fn.recordError(1280)}function Wa(e,t,r){fn.recordError(1280)}function $a(e,t){Qa.disjointTimerQueryExt.queryCounterEXT(fn.timerQueriesEXT[e],t)}function ja(e){Qa.readBuffer(e)}function za(e,t,r,n){var i;return t*(e*r+(i=n)-1&-i)}var Ha={6402:1,6403:1,6406:1,6407:3,6408:4,6409:1,6410:2,33319:2,33320:2,35904:3,35906:4,36244:1,36248:3,36249:4},qa={5120:1,5121:1,5122:2,5123:2,5124:4,5125:4,5126:4,5131:2,32819:2,32820:2,33635:2,33640:4,34042:4,35899:4,35902:4,36193:2};function Ya(e,t,r,n,i,o){var a=Ha[t]*qa[e];if(a){var s=i+za(r,n,a,fn.unpackAlignment);switch(e){case 5120:return O.subarray(i,s);case 5121:return N.subarray(i,s);case 5122:return U.subarray(i>>1,s>>1);case 5124:return V.subarray(i>>2,s>>2);case 5126:return $.subarray(i>>2,s>>2);case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return W.subarray(i>>2,s>>2);case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return G.subarray(i>>1,s>>1);default:fn.recordError(1280)}}else fn.recordError(1280)}function Xa(e){switch(e){case 5120:return O;case 5121:return N;case 5122:return U;case 5123:case 33635:case 32819:case 32820:case 36193:case 5131:return G;case 5124:return V;case 5125:case 34042:case 35902:case 33640:case 35899:case 34042:return W;case 5126:return $}}var Qa,Ka={5122:1,5123:1,5124:2,5125:2,5126:2,5131:1,32819:1,32820:1,33635:1,33640:2,34042:2,35899:2,35902:2,36193:1};function Za(e,t,r,n,i,o,a){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.currentPixelPackBufferBinding?Qa.readPixels(e,t,r,n,i,o,a):Qa.readPixels(e,t,r,n,i,o,Xa(o),a>>(0|Ka[o]));else{var s=Ya(o,i,r,n,a);s?Qa.readPixels(e,t,r,n,i,o,s):fn.recordError(1280)}}function Ja(){}function es(e,t,r,n){Qa.renderbufferStorage(e,t,r,n)}function ts(e,t,r,n,i){Qa.renderbufferStorageMultisample(e,t,r,n,i)}function rs(){Qa.resumeTransformFeedback()}function ns(e,t){Qa.sampleCoverage(e,!!t)}function is(e,t,r){Qa.samplerParameterf(fn.samplers[e],t,r)}function os(e,t,r){var n=$[r>>2];Qa.samplerParameterf(fn.samplers[e],t,n)}function as(e,t,r){Qa.samplerParameteri(fn.samplers[e],t,r)}function ss(e,t,r){var n=V[r>>2];Qa.samplerParameteri(fn.samplers[e],t,n)}function us(e,t,r,n){Qa.scissor(e,t,r,n)}function cs(){fn.recordError(1280)}function fs(e,t,r,n){var i=fn.getSource(e,t,r,n);Qa.shaderSource(fn.shaders[e],i)}function ls(e,t,r){Qa.stencilFunc(e,t,r)}function ds(e,t,r,n){Qa.stencilFuncSeparate(e,t,r,n)}function ps(e){Qa.stencilMask(e)}function ms(e,t){Qa.stencilMaskSeparate(e,t)}function hs(e,t,r){Qa.stencilOp(e,t,r)}function gs(e,t,r,n){Qa.stencilOpSeparate(e,t,r,n)}function ys(e,t,r,n,i,o,a,s,u){fn.currentContext.supportsWebGL2EntryPoints?Qa.currentPixelUnpackBufferBinding?Qa.texImage2D(e,t,r,n,i,o,a,s,u):0!=u?Qa.texImage2D(e,t,r,n,i,o,a,s,Xa(s),u>>(0|Ka[s])):Qa.texImage2D(e,t,r,n,i,o,a,s,null):Qa.texImage2D(e,t,r,n,i,o,a,s,u?Ya(s,a,n,i,u):null)}function vs(e,t,r,n,i,o,a,s,u,c){Qa.currentPixelUnpackBufferBinding?Qa.texImage3D(e,t,r,n,i,o,a,s,u,c):0!=c?Qa.texImage3D(e,t,r,n,i,o,a,s,u,Xa(u),c>>(0|Ka[u])):Qa.texImage3D(e,t,r,n,i,o,a,s,u,null)}function _s(e,t,r){Qa.texParameterf(e,t,r)}function bs(e,t,r){var n=$[r>>2];Qa.texParameterf(e,t,n)}function Es(e,t,r){Qa.texParameteri(e,t,r)}function ws(e,t,r){var n=V[r>>2];Qa.texParameteri(e,t,n)}function xs(e,t,r,n,i){Qa.texStorage2D(e,t,r,n,i)}function Ss(e,t,r,n,i,o){Qa.texStorage3D(e,t,r,n,i,o)}function Ts(e,t,r,n,i,o,a,s,u){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.currentPixelUnpackBufferBinding?Qa.texSubImage2D(e,t,r,n,i,o,a,s,u):0!=u?Qa.texSubImage2D(e,t,r,n,i,o,a,s,Xa(s),u>>(0|Ka[s])):Qa.texSubImage2D(e,t,r,n,i,o,a,s,null);else{var c=null;u&&(c=Ya(s,a,i,o,u)),Qa.texSubImage2D(e,t,r,n,i,o,a,s,c)}}function Ps(e,t,r,n,i,o,a,s,u,c,f){Qa.currentPixelUnpackBufferBinding?Qa.texSubImage3D(e,t,r,n,i,o,a,s,u,c,f):0!=f?Qa.texSubImage3D(e,t,r,n,i,o,a,s,u,c,Xa(c),f>>(0|Ka[c])):Qa.texSubImage3D(e,t,r,n,i,o,a,s,u,c,null)}function As(e,t,r,n){e=fn.programs[e];for(var i=[],o=0;o<t;o++)i.push(C(V[r+4*o>>2]));Qa.transformFeedbackVaryings(e,i,n)}function Cs(e,t){Qa.uniform1f(fn.uniforms[e],t)}function Ms(e,t,r){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.uniform1fv(fn.uniforms[e],$,r>>2,t);else{if(t<=fn.MINI_TEMP_BUFFER_SIZE)for(var n=fn.miniTempBufferViews[t-1],i=0;i<t;++i)n[i]=$[r+4*i>>2];else n=$.subarray(r>>2,r+4*t>>2);Qa.uniform1fv(fn.uniforms[e],n)}}function Bs(e,t){Qa.uniform1i(fn.uniforms[e],t)}function Ds(e,t,r){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniform1iv(fn.uniforms[e],V,r>>2,t):Qa.uniform1iv(fn.uniforms[e],V.subarray(r>>2,r+4*t>>2))}function Is(e,t){Qa.uniform1ui(fn.uniforms[e],t)}function ks(e,t,r){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniform1uiv(fn.uniforms[e],W,r>>2,t):Qa.uniform1uiv(fn.uniforms[e],W.subarray(r>>2,r+4*t>>2))}function Fs(e,t,r){Qa.uniform2f(fn.uniforms[e],t,r)}function Rs(e,t,r){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.uniform2fv(fn.uniforms[e],$,r>>2,2*t);else{if(2*t<=fn.MINI_TEMP_BUFFER_SIZE)for(var n=fn.miniTempBufferViews[2*t-1],i=0;i<2*t;i+=2)n[i]=$[r+4*i>>2],n[i+1]=$[r+(4*i+4)>>2];else n=$.subarray(r>>2,r+8*t>>2);Qa.uniform2fv(fn.uniforms[e],n)}}function Ls(e,t,r){Qa.uniform2i(fn.uniforms[e],t,r)}function Os(e,t,r){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniform2iv(fn.uniforms[e],V,r>>2,2*t):Qa.uniform2iv(fn.uniforms[e],V.subarray(r>>2,r+8*t>>2))}function Ns(e,t,r){Qa.uniform2ui(fn.uniforms[e],t,r)}function Us(e,t,r){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniform2uiv(fn.uniforms[e],W,r>>2,2*t):Qa.uniform2uiv(fn.uniforms[e],W.subarray(r>>2,r+8*t>>2))}function Gs(e,t,r,n){Qa.uniform3f(fn.uniforms[e],t,r,n)}function Vs(e,t,r){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.uniform3fv(fn.uniforms[e],$,r>>2,3*t);else{if(3*t<=fn.MINI_TEMP_BUFFER_SIZE)for(var n=fn.miniTempBufferViews[3*t-1],i=0;i<3*t;i+=3)n[i]=$[r+4*i>>2],n[i+1]=$[r+(4*i+4)>>2],n[i+2]=$[r+(4*i+8)>>2];else n=$.subarray(r>>2,r+12*t>>2);Qa.uniform3fv(fn.uniforms[e],n)}}function Ws(e,t,r,n){Qa.uniform3i(fn.uniforms[e],t,r,n)}function $s(e,t,r){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniform3iv(fn.uniforms[e],V,r>>2,3*t):Qa.uniform3iv(fn.uniforms[e],V.subarray(r>>2,r+12*t>>2))}function js(e,t,r,n){Qa.uniform3ui(fn.uniforms[e],t,r,n)}function zs(e,t,r){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniform3uiv(fn.uniforms[e],W,r>>2,3*t):Qa.uniform3uiv(fn.uniforms[e],W.subarray(r>>2,r+12*t>>2))}function Hs(e,t,r,n,i){Qa.uniform4f(fn.uniforms[e],t,r,n,i)}function qs(e,t,r){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.uniform4fv(fn.uniforms[e],$,r>>2,4*t);else{if(4*t<=fn.MINI_TEMP_BUFFER_SIZE)for(var n=fn.miniTempBufferViews[4*t-1],i=0;i<4*t;i+=4)n[i]=$[r+4*i>>2],n[i+1]=$[r+(4*i+4)>>2],n[i+2]=$[r+(4*i+8)>>2],n[i+3]=$[r+(4*i+12)>>2];else n=$.subarray(r>>2,r+16*t>>2);Qa.uniform4fv(fn.uniforms[e],n)}}function Ys(e,t,r,n,i){Qa.uniform4i(fn.uniforms[e],t,r,n,i)}function Xs(e,t,r){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniform4iv(fn.uniforms[e],V,r>>2,4*t):Qa.uniform4iv(fn.uniforms[e],V.subarray(r>>2,r+16*t>>2))}function Qs(e,t,r,n,i){Qa.uniform4ui(fn.uniforms[e],t,r,n,i)}function Ks(e,t,r){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniform4uiv(fn.uniforms[e],W,r>>2,4*t):Qa.uniform4uiv(fn.uniforms[e],W.subarray(r>>2,r+16*t>>2))}function Zs(e,t,r){e=fn.programs[e],Qa.uniformBlockBinding(e,t,r)}function Js(e,t,r,n){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.uniformMatrix2fv(fn.uniforms[e],!!r,$,n>>2,4*t);else{if(4*t<=fn.MINI_TEMP_BUFFER_SIZE)for(var i=fn.miniTempBufferViews[4*t-1],o=0;o<4*t;o+=4)i[o]=$[n+4*o>>2],i[o+1]=$[n+(4*o+4)>>2],i[o+2]=$[n+(4*o+8)>>2],i[o+3]=$[n+(4*o+12)>>2];else i=$.subarray(n>>2,n+16*t>>2);Qa.uniformMatrix2fv(fn.uniforms[e],!!r,i)}}function eu(e,t,r,n){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniformMatrix2x3fv(fn.uniforms[e],!!r,$,n>>2,6*t):Qa.uniformMatrix2x3fv(fn.uniforms[e],!!r,$.subarray(n>>2,n+24*t>>2))}function tu(e,t,r,n){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniformMatrix2x4fv(fn.uniforms[e],!!r,$,n>>2,8*t):Qa.uniformMatrix2x4fv(fn.uniforms[e],!!r,$.subarray(n>>2,n+32*t>>2))}function ru(e,t,r,n){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.uniformMatrix3fv(fn.uniforms[e],!!r,$,n>>2,9*t);else{if(9*t<=fn.MINI_TEMP_BUFFER_SIZE)for(var i=fn.miniTempBufferViews[9*t-1],o=0;o<9*t;o+=9)i[o]=$[n+4*o>>2],i[o+1]=$[n+(4*o+4)>>2],i[o+2]=$[n+(4*o+8)>>2],i[o+3]=$[n+(4*o+12)>>2],i[o+4]=$[n+(4*o+16)>>2],i[o+5]=$[n+(4*o+20)>>2],i[o+6]=$[n+(4*o+24)>>2],i[o+7]=$[n+(4*o+28)>>2],i[o+8]=$[n+(4*o+32)>>2];else i=$.subarray(n>>2,n+36*t>>2);Qa.uniformMatrix3fv(fn.uniforms[e],!!r,i)}}function nu(e,t,r,n){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniformMatrix3x2fv(fn.uniforms[e],!!r,$,n>>2,6*t):Qa.uniformMatrix3x2fv(fn.uniforms[e],!!r,$.subarray(n>>2,n+24*t>>2))}function iu(e,t,r,n){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniformMatrix3x4fv(fn.uniforms[e],!!r,$,n>>2,12*t):Qa.uniformMatrix3x4fv(fn.uniforms[e],!!r,$.subarray(n>>2,n+48*t>>2))}function ou(e,t,r,n){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.uniformMatrix4fv(fn.uniforms[e],!!r,$,n>>2,16*t);else{if(16*t<=fn.MINI_TEMP_BUFFER_SIZE)for(var i=fn.miniTempBufferViews[16*t-1],o=0;o<16*t;o+=16)i[o]=$[n+4*o>>2],i[o+1]=$[n+(4*o+4)>>2],i[o+2]=$[n+(4*o+8)>>2],i[o+3]=$[n+(4*o+12)>>2],i[o+4]=$[n+(4*o+16)>>2],i[o+5]=$[n+(4*o+20)>>2],i[o+6]=$[n+(4*o+24)>>2],i[o+7]=$[n+(4*o+28)>>2],i[o+8]=$[n+(4*o+32)>>2],i[o+9]=$[n+(4*o+36)>>2],i[o+10]=$[n+(4*o+40)>>2],i[o+11]=$[n+(4*o+44)>>2],i[o+12]=$[n+(4*o+48)>>2],i[o+13]=$[n+(4*o+52)>>2],i[o+14]=$[n+(4*o+56)>>2],i[o+15]=$[n+(4*o+60)>>2];else i=$.subarray(n>>2,n+64*t>>2);Qa.uniformMatrix4fv(fn.uniforms[e],!!r,i)}}function au(e,t,r,n){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniformMatrix4x2fv(fn.uniforms[e],!!r,$,n>>2,8*t):Qa.uniformMatrix4x2fv(fn.uniforms[e],!!r,$.subarray(n>>2,n+32*t>>2))}function su(e,t,r,n){fn.currentContext.supportsWebGL2EntryPoints?Qa.uniformMatrix4x3fv(fn.uniforms[e],!!r,$,n>>2,12*t):Qa.uniformMatrix4x3fv(fn.uniforms[e],!!r,$.subarray(n>>2,n+48*t>>2))}function uu(){y("missing function: emscripten_glUnmapBuffer"),Qf(-1)}function cu(e){Qa.useProgram(fn.programs[e])}function fu(e){Qa.validateProgram(fn.programs[e])}function lu(e,t){Qa.vertexAttrib1f(e,t)}function du(e,t){Qa.vertexAttrib1f(e,$[t>>2])}function pu(e,t,r){Qa.vertexAttrib2f(e,t,r)}function mu(e,t){Qa.vertexAttrib2f(e,$[t>>2],$[t+4>>2])}function hu(e,t,r,n){Qa.vertexAttrib3f(e,t,r,n)}function gu(e,t){Qa.vertexAttrib3f(e,$[t>>2],$[t+4>>2],$[t+8>>2])}function yu(e,t,r,n,i){Qa.vertexAttrib4f(e,t,r,n,i)}function vu(e,t){Qa.vertexAttrib4f(e,$[t>>2],$[t+4>>2],$[t+8>>2],$[t+12>>2])}function _u(e,t){Qa.vertexAttribDivisor(e,t)}function bu(e,t){Qa.vertexAttribDivisor(e,t)}function Eu(e,t){Qa.vertexAttribDivisor(e,t)}function wu(e,t){Qa.vertexAttribDivisor(e,t)}function xu(e,t){Qa.vertexAttribDivisor(e,t)}function Su(e,t,r,n,i){Qa.vertexAttribI4i(e,t,r,n,i)}function Tu(e,t){Qa.vertexAttribI4i(e,V[t>>2],V[t+4>>2],V[t+8>>2],V[t+12>>2])}function Pu(e,t,r,n,i){Qa.vertexAttribI4ui(e,t,r,n,i)}function Au(e,t){Qa.vertexAttribI4ui(e,W[t>>2],W[t+4>>2],W[t+8>>2],W[t+12>>2])}function Cu(e,t,r,n,i){Qa.vertexAttribIPointer(e,t,r,n,i)}function Mu(e,t,r,n,i,o){Qa.vertexAttribPointer(e,t,r,!!n,i,o)}function Bu(e,t,r,n){Qa.viewport(e,t,r,n)}function Du(e,t,r,n){n>>>=0;var i=4294967295==(r>>>=0)&&4294967295==n?-1:_(r,n,!0);Qa.waitSync(fn.syncs[e],t,i)}function Iu(e){Qf("OOM")}function ku(e){e=q(e,65536);var t=a.buffer.byteLength;try{return-1!==b.grow((e-t)/65536)?a.buffer=b.buffer:null}catch(e){return null}}function Fu(e){var t=cn();if(e>2147418112)return!1;for(var r=Math.max(t,16777216);r<e;)r=r<=536870912?q(2*r,65536):Math.min(q((3*r+2147483648)/4,65536),2147418112);var n=ku(r);return!(!n||n.byteLength!=r)&&(Y(n),X(),J=r,W[K>>2]=e,!0)}function Ru(e){Qa.activeTexture(e)}function Lu(e,t){Qa.attachShader(fn.programs[e],fn.shaders[t])}function Ou(e,t){35051==e?Qa.currentPixelPackBufferBinding=t:35052==e&&(Qa.currentPixelUnpackBufferBinding=t),Qa.bindBuffer(e,fn.buffers[t])}function Nu(e,t,r,n,i){Qa.bindBufferRange(e,t,fn.buffers[r],n,i)}function Uu(e,t){Qa.bindFramebuffer(e,fn.framebuffers[t])}function Gu(e,t){Qa.bindRenderbuffer(e,fn.renderbuffers[t])}function Vu(e,t){Qa.bindSampler(e,fn.samplers[t])}function Wu(e,t){Qa.bindTexture(e,fn.textures[t])}function $u(e){Qa.bindVertexArray(fn.vaos[e])}function ju(e,t){Qa.blendEquationSeparate(e,t)}function zu(e,t,r,n){Qa.blendFuncSeparate(e,t,r,n)}function Hu(e,t,r,n,i,o,a,s,u,c){Qa.blitFramebuffer(e,t,r,n,i,o,a,s,u,c)}function qu(e,t,r,n){fn.currentContext.supportsWebGL2EntryPoints?r?Qa.bufferData(e,N,n,r,t):Qa.bufferData(e,t,n):Qa.bufferData(e,r?N.subarray(r,r+t):t,n)}function Yu(e,t,r,n){fn.currentContext.supportsWebGL2EntryPoints?Qa.bufferSubData(e,t,N,n,r):Qa.bufferSubData(e,t,N.subarray(n,n+r))}function Xu(e){Qa.clear(e)}function Qu(e,t,r,n){Qa.clearColor(e,t,r,n)}function Ku(e){Qa.clearDepth(e)}function Zu(e){Qa.clearStencil(e)}function Ju(e,t,r,n){Qa.colorMask(!!e,!!t,!!r,!!n)}function ec(e){Qa.compileShader(fn.shaders[e])}function tc(e,t,r,n,i,o,a,s,u){fn.currentContext.supportsWebGL2EntryPoints?Qa.currentPixelUnpackBufferBinding?Qa.compressedTexSubImage2D(e,t,r,n,i,o,a,s,u):Qa.compressedTexSubImage2D(e,t,r,n,i,o,a,N,u,s):Qa.compressedTexSubImage2D(e,t,r,n,i,o,a,u?N.subarray(u,u+s):null)}function rc(e,t,r,n,i,o,a,s,u,c,f){fn.currentContext.supportsWebGL2EntryPoints?Qa.currentPixelUnpackBufferBinding?Qa.compressedTexSubImage3D(e,t,r,n,i,o,a,s,u,c,f):Qa.compressedTexSubImage3D(e,t,r,n,i,o,a,s,u,N,f,c):Qa.compressedTexSubImage3D(e,t,r,n,i,o,a,s,u,f?N.subarray(f,f+c):null)}function nc(){var e=fn.getNewId(fn.programs),t=Qa.createProgram();return t.name=e,fn.programs[e]=t,e}function ic(e){var t=fn.getNewId(fn.shaders);return fn.shaders[t]=Qa.createShader(e),t}function oc(e){Qa.cullFace(e)}function ac(e,t){for(var r=0;r<e;r++){var n=V[t+4*r>>2],i=fn.buffers[n];i&&(Qa.deleteBuffer(i),i.name=0,fn.buffers[n]=null,n==fn.currArrayBuffer&&(fn.currArrayBuffer=0),n==fn.currElementArrayBuffer&&(fn.currElementArrayBuffer=0),n==Qa.currentPixelPackBufferBinding&&(Qa.currentPixelPackBufferBinding=0),n==Qa.currentPixelUnpackBufferBinding&&(Qa.currentPixelUnpackBufferBinding=0))}}function sc(e,t){for(var r=0;r<e;++r){var n=V[t+4*r>>2],i=fn.framebuffers[n];i&&(Qa.deleteFramebuffer(i),i.name=0,fn.framebuffers[n]=null)}}function uc(e){if(e){var t=fn.programs[e];t?(Qa.deleteProgram(t),t.name=0,fn.programs[e]=null,fn.programInfos[e]=null):fn.recordError(1281)}}function cc(e,t){for(var r=0;r<e;r++){var n=V[t+4*r>>2],i=fn.renderbuffers[n];i&&(Qa.deleteRenderbuffer(i),i.name=0,fn.renderbuffers[n]=null)}}function fc(e,t){for(var r=0;r<e;r++){var n=V[t+4*r>>2],i=fn.samplers[n];i&&(Qa.deleteSampler(i),i.name=0,fn.samplers[n]=null)}}function lc(e){if(e){var t=fn.shaders[e];t?(Qa.deleteShader(t),fn.shaders[e]=null):fn.recordError(1281)}}function dc(e){if(e){var t=fn.syncs[e];t?(Qa.deleteSync(t),t.name=0,fn.syncs[e]=null):fn.recordError(1281)}}function pc(e,t){for(var r=0;r<e;r++){var n=V[t+4*r>>2],i=fn.textures[n];i&&(Qa.deleteTexture(i),i.name=0,fn.textures[n]=null)}}function mc(e,t){for(var r=0;r<e;r++){var n=V[t+4*r>>2];Qa.deleteVertexArray(fn.vaos[n]),fn.vaos[n]=null}}function hc(e){Qa.depthFunc(e)}function gc(e){Qa.depthMask(!!e)}function yc(e,t){Qa.detachShader(fn.programs[e],fn.shaders[t])}function vc(e){Qa.disable(e)}function _c(e){Qa.disableVertexAttribArray(e)}function bc(e,t,r){Qa.drawArrays(e,t,r)}function Ec(e,t,r,n,i,o){Ui(e,n,i,o)}function wc(e){Qa.enable(e)}function xc(e){Qa.enableVertexAttribArray(e)}function Sc(e,t){var r=Qa.fenceSync(e,t);if(r){var n=fn.getNewId(fn.syncs);return r.name=n,fn.syncs[n]=r,n}return 0}function Tc(){Qa.flush()}function Pc(e,t,r,n){Qa.framebufferRenderbuffer(e,t,r,fn.renderbuffers[n])}function Ac(e,t,r,n,i){Qa.framebufferTexture2D(e,t,r,fn.textures[n],i)}function Cc(e,t,r,n,i){Qa.framebufferTextureLayer(e,t,fn.textures[r],n,i)}function Mc(e){Qa.frontFace(e)}function Bc(e,t){eo(e,t,"createBuffer",fn.buffers)}function Dc(e,t){eo(e,t,"createFramebuffer",fn.framebuffers)}function Ic(e,t){eo(e,t,"createRenderbuffer",fn.renderbuffers)}function kc(e,t){eo(e,t,"createSampler",fn.samplers)}function Fc(e,t){eo(e,t,"createTexture",fn.textures)}function Rc(e,t){eo(e,t,"createVertexArray",fn.vaos)}function Lc(e){Qa.generateMipmap(e)}function Oc(){if(fn.lastError){var e=fn.lastError;return fn.lastError=0,e}return Qa.getError()}function Nc(e,t){bo(e,t,"Float")}function Uc(e,t){bo(e,t,"Integer")}function Gc(e,t,r,n){var i=Qa.getProgramInfoLog(fn.programs[e]);if(null===i&&(i="(unknown error)"),t>0&&n){var o=B(i,n,t);r&&(V[r>>2]=o)}else r&&(V[r>>2]=0)}function Vc(e,t,r){if(r)if(e>=fn.counter)fn.recordError(1281);else{var n=fn.programInfos[e];if(n)if(35716==t){var i=Qa.getProgramInfoLog(fn.programs[e]);null===i&&(i="(unknown error)"),V[r>>2]=i.length+1}else if(35719==t)V[r>>2]=n.maxUniformLength;else if(35722==t){if(-1==n.maxAttributeLength){e=fn.programs[e];var o=Qa.getProgramParameter(e,35721);n.maxAttributeLength=0;for(var a=0;a<o;++a){var s=Qa.getActiveAttrib(e,a);n.maxAttributeLength=Math.max(n.maxAttributeLength,s.name.length+1)}}V[r>>2]=n.maxAttributeLength}else if(35381==t){if(-1==n.maxUniformBlockNameLength){e=fn.programs[e];var u=Qa.getProgramParameter(e,35382);n.maxUniformBlockNameLength=0;for(a=0;a<u;++a){var c=Qa.getActiveUniformBlockName(e,a);n.maxUniformBlockNameLength=Math.max(n.maxUniformBlockNameLength,c.length+1)}}V[r>>2]=n.maxUniformBlockNameLength}else V[r>>2]=Qa.getProgramParameter(fn.programs[e],t);else fn.recordError(1282)}else fn.recordError(1281)}function Wc(e,t,r,n){var i=Qa.getShaderInfoLog(fn.shaders[e]);if(null===i&&(i="(unknown error)"),t>0&&n){var o=B(i,n,t);r&&(V[r>>2]=o)}else r&&(V[r>>2]=0)}function $c(e,t,r){if(r)if(35716==t){var n=Qa.getShaderInfoLog(fn.shaders[e]);null===n&&(n="(unknown error)"),V[r>>2]=n.length+1}else if(35720==t){var i=Qa.getShaderSource(fn.shaders[e]),o=null===i||0==i.length?0:i.length+1;V[r>>2]=o}else V[r>>2]=Qa.getShaderParameter(fn.shaders[e],t);else fn.recordError(1281)}function jc(e){if(fn.stringCache[e])return fn.stringCache[e];var t;switch(e){case 7939:for(var r=Qa.getSupportedExtensions(),n=[],i=0;i<r.length;++i)n.push(r[i]),n.push("GL_"+r[i]);t=Zo(n.join(" "));break;case 7936:case 7937:case 37445:case 37446:var o=Qa.getParameter(e);o||fn.recordError(1280),t=Zo(o);break;case 7938:var a=Qa.getParameter(Qa.VERSION);t=Zo(a=fn.currentContext.version>=2?"OpenGL ES 3.0 ("+a+")":"OpenGL ES 2.0 ("+a+")");break;case 35724:var s=Qa.getParameter(Qa.SHADING_LANGUAGE_VERSION),u=s.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==u&&(3==u[1].length&&(u[1]=u[1]+"0"),s="OpenGL ES GLSL ES "+u[1]+" ("+s+")"),t=Zo(s);break;default:return fn.recordError(1280),0}return fn.stringCache[e]=t,t}function zc(e,t){if(fn.currentContext.version<2)return fn.recordError(1282),0;var r=fn.stringiCache[e];if(r)return t<0||t>=r.length?(fn.recordError(1281),0):r[t];switch(e){case 7939:for(var n=Qa.getSupportedExtensions(),i=[],o=0;o<n.length;++o)i.push(Zo(n[o])),i.push(Zo("GL_"+n[o]));return r=fn.stringiCache[e]=i,t<0||t>=r.length?(fn.recordError(1281),0):r[t];default:return fn.recordError(1280),0}}function Hc(e,t){return Qa.getUniformBlockIndex(fn.programs[e],C(t))}function qc(e,t){var r=0;if("]"==(t=C(t))[t.length-1]){var n=t.lastIndexOf("[");r="]"!=t[n+1]?parseInt(t.slice(n+1)):0,t=t.slice(0,n)}var i=fn.programInfos[e]&&fn.programInfos[e].uniforms[t];return i&&r>=0&&r<i[0]?i[1]+r:-1}function Yc(e,t,r){da(e,t,r,"FloatToInteger")}function Xc(e,t){Qa.hint(e,t)}function Qc(e,t,r){for(var n=Mi[t],i=0;i<t;i++)n[i]=V[r+4*i>>2];Qa.invalidateFramebuffer(e,n)}function Kc(e,t,r,n,i,o,a){for(var s=Mi[t],u=0;u<t;u++)s[u]=V[r+4*u>>2];Qa.invalidateSubFramebuffer(e,s,n,i,o,a)}function Zc(e){return Qa.isEnabled(e)}function Jc(e){Qa.linkProgram(fn.programs[e]),fn.populateUniformTable(e)}function ef(e,t){3317==e&&(fn.unpackAlignment=t),Qa.pixelStorei(e,t)}function tf(e,t){Qa.polygonOffset(e,t)}function rf(e,t,r,n,i,o,a){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.currentPixelPackBufferBinding?Qa.readPixels(e,t,r,n,i,o,a):Qa.readPixels(e,t,r,n,i,o,Xa(o),a>>(0|Ka[o]));else{var s=Ya(o,i,r,n,a);s?Qa.readPixels(e,t,r,n,i,o,s):fn.recordError(1280)}}function nf(e,t,r,n){Qa.renderbufferStorage(e,t,r,n)}function of(e,t,r,n,i){Qa.renderbufferStorageMultisample(e,t,r,n,i)}function af(e,t,r){Qa.samplerParameteri(fn.samplers[e],t,r)}function sf(e,t,r,n){Qa.scissor(e,t,r,n)}function uf(e,t,r,n){var i=fn.getSource(e,t,r,n);Qa.shaderSource(fn.shaders[e],i)}function cf(e,t,r){Qa.texParameteri(e,t,r)}function ff(e,t,r,n,i){Qa.texStorage2D(e,t,r,n,i)}function lf(){y("missing function: glTexStorage2DMultisample"),Qf(-1)}function df(e,t,r,n,i,o){Qa.texStorage3D(e,t,r,n,i,o)}function pf(e,t,r,n,i,o,a,s,u){if(fn.currentContext.supportsWebGL2EntryPoints)Qa.currentPixelUnpackBufferBinding?Qa.texSubImage2D(e,t,r,n,i,o,a,s,u):0!=u?Qa.texSubImage2D(e,t,r,n,i,o,a,s,Xa(s),u>>(0|Ka[s])):Qa.texSubImage2D(e,t,r,n,i,o,a,s,null);else{var c=null;u&&(c=Ya(s,a,i,o,u)),Qa.texSubImage2D(e,t,r,n,i,o,a,s,c)}}function mf(e,t,r,n,i,o,a,s,u,c,f){Qa.currentPixelUnpackBufferBinding?Qa.texSubImage3D(e,t,r,n,i,o,a,s,u,c,f):0!=f?Qa.texSubImage3D(e,t,r,n,i,o,a,s,u,c,Xa(c),f>>(0|Ka[c])):Qa.texSubImage3D(e,t,r,n,i,o,a,s,u,c,null)}function hf(e,t){Qa.uniform1f(fn.uniforms[e],t)}function gf(e,t){Qa.uniform1i(fn.uniforms[e],t)}function yf(e,t,r,n,i){Qa.uniform4f(fn.uniforms[e],t,r,n,i)}function vf(e,t,r){e=fn.programs[e],Qa.uniformBlockBinding(e,t,r)}function _f(e){Qa.useProgram(fn.programs[e])}function bf(e,t,r,n,i){Qa.vertexAttribIPointer(e,t,r,n,i)}function Ef(e,t,r,n,i,o){Qa.vertexAttribPointer(e,t,r,!!n,i,o)}function wf(e,t,r,n){Qa.viewport(e,t,r,n)}function xf(e,t,r,n){n>>>=0;var i=4294967295==(r>>>=0)&&4294967295==n?-1:_(r,n,!0);Qa.waitSync(fn.syncs[e],t,i)}function Sf(e){return Math.pow(2,e)}function Tf(e){return Sf(e)}function Pf(e){return Math.log(e)/Math.LN2}function Af(){Qf("trap!")}function Cf(e,t,r){N.set(N.subarray(t,t+r),e)}function Mf(){return 0}function Bf(){return 0}function Df(){return 0}function If(){return 0}function kf(){return 11}function Ff(){}function Rf(e){switch(e){case 30:return z;case 85:return 2147418112/z;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 79:return 0;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return Ue(22),-1}if(He.staticInit(),f){var Lf=r(1),Of=r(2);je.staticInit()}pt=a.InternalError=dt(Error,"InternalError"),bt(),xt=a.BindingError=dt(Error,"BindingError"),Nt(),sr(),tr(),lr=a.UnboundTypeError=dt(Error,"UnboundTypeError"),Cr(),an=f?function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof dateNow?dateNow:"object"==typeof self&&self.performance&&"function"==typeof self.performance.now?function(){return self.performance.now()}:"object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:Date.now,fn.init();for(var Nf=0;Nf<32;Nf++)Mi.push(new Array(Nf));function Uf(e,t,r){var n=r>0?r:D(e)+1,i=new Array(n),o=M(e,i,0,i.length);return t&&(i.length=o),i}var Gf={},Vf={abort:Qf,setTempRet0:w,getTempRet0:x,ClassHandle:Ut,ClassHandle_clone:Bt,ClassHandle_delete:It,ClassHandle_deleteLater:Ot,ClassHandle_isAliasOf:At,ClassHandle_isDeleted:kt,RegisteredClass:$t,RegisteredPointer:ur,RegisteredPointer_deleteObject:Qt,RegisteredPointer_destructor:Xt,RegisteredPointer_fromWireType:ar,RegisteredPointer_getPointee:Yt,__ZSt18uncaught_exceptionv:De,___atomic_compare_exchange_8:Me,___atomic_fetch_sub_8:Be,___cxa_begin_catch:Fe,___cxa_find_matching_catch:Oe,___cxa_free_exception:Ie,___cxa_pure_virtual:Re,___gxx_personality_v0:Ne,___resumeException:Le,___setErrNo:Ue,___syscall140:Xe,___syscall146:Qe,___syscall221:Ke,___syscall3:Ze,___syscall5:Je,___syscall54:et,___syscall6:tt,__computeUnpackAlignedImageSize:za,__embind_finalize_value_array:gt,__embind_finalize_value_object:vt,__embind_register_bool:Pt,__embind_register_class:mr,__embind_register_class_class_function:vr,__embind_register_class_constructor:_r,__embind_register_class_function:br,__embind_register_class_property:wr,__embind_register_emval:Br,__embind_register_enum:Ir,__embind_register_enum_value:Fr,__embind_register_float:Or,__embind_register_function:Nr,__embind_register_integer:Gr,__embind_register_memory_view:Vr,__embind_register_std_string:Wr,__embind_register_std_wstring:$r,__embind_register_value_array:jr,__embind_register_value_array_element:zr,__embind_register_value_object:Hr,__embind_register_value_object_field:qr,__embind_register_void:Yr,__emval_as:Qr,__emval_decref:Tr,__emval_get_property:Kr,__emval_incref:Zr,__emval_new_cstring:tn,__emval_register:Mr,__emval_run_destructors:rn,__emval_take_value:nn,__glGenObject:eo,__heapObjectForWebGLType:Xa,_abort:on,_clock_gettime:un,_embind_repr:Rr,_emscripten_get_heap_size:cn,_emscripten_get_now:an,_emscripten_get_now_is_monotonic:sn,_emscripten_glActiveTexture:ln,_emscripten_glAttachShader:dn,_emscripten_glBeginQuery:pn,_emscripten_glBeginQueryEXT:mn,_emscripten_glBeginTransformFeedback:hn,_emscripten_glBindAttribLocation:gn,_emscripten_glBindBuffer:yn,_emscripten_glBindBufferBase:vn,_emscripten_glBindBufferRange:_n,_emscripten_glBindFramebuffer:bn,_emscripten_glBindRenderbuffer:En,_emscripten_glBindSampler:wn,_emscripten_glBindTexture:xn,_emscripten_glBindTransformFeedback:Sn,_emscripten_glBindVertexArray:Tn,_emscripten_glBindVertexArrayOES:Pn,_emscripten_glBlendColor:An,_emscripten_glBlendEquation:Cn,_emscripten_glBlendEquationSeparate:Mn,_emscripten_glBlendFunc:Bn,_emscripten_glBlendFuncSeparate:Dn,_emscripten_glBlitFramebuffer:In,_emscripten_glBufferData:kn,_emscripten_glBufferSubData:Fn,_emscripten_glCheckFramebufferStatus:Rn,_emscripten_glClear:Ln,_emscripten_glClearBufferfi:On,_emscripten_glClearBufferfv:Nn,_emscripten_glClearBufferiv:Un,_emscripten_glClearBufferuiv:Gn,_emscripten_glClearColor:Vn,_emscripten_glClearDepthf:Wn,_emscripten_glClearStencil:$n,_emscripten_glClientWaitSync:jn,_emscripten_glColorMask:zn,_emscripten_glCompileShader:Hn,_emscripten_glCompressedTexImage2D:qn,_emscripten_glCompressedTexImage3D:Yn,_emscripten_glCompressedTexSubImage2D:Xn,_emscripten_glCompressedTexSubImage3D:Qn,_emscripten_glCopyBufferSubData:Kn,_emscripten_glCopyTexImage2D:Zn,_emscripten_glCopyTexSubImage2D:Jn,_emscripten_glCopyTexSubImage3D:ei,_emscripten_glCreateProgram:ti,_emscripten_glCreateShader:ri,_emscripten_glCullFace:ni,_emscripten_glDeleteBuffers:ii,_emscripten_glDeleteFramebuffers:oi,_emscripten_glDeleteProgram:ai,_emscripten_glDeleteQueries:si,_emscripten_glDeleteQueriesEXT:ui,_emscripten_glDeleteRenderbuffers:ci,_emscripten_glDeleteSamplers:fi,_emscripten_glDeleteShader:li,_emscripten_glDeleteSync:di,_emscripten_glDeleteTextures:pi,_emscripten_glDeleteTransformFeedbacks:mi,_emscripten_glDeleteVertexArrays:hi,_emscripten_glDeleteVertexArraysOES:gi,_emscripten_glDepthFunc:yi,_emscripten_glDepthMask:vi,_emscripten_glDepthRangef:_i,_emscripten_glDetachShader:bi,_emscripten_glDisable:Ei,_emscripten_glDisableVertexAttribArray:wi,_emscripten_glDrawArrays:xi,_emscripten_glDrawArraysInstanced:Si,_emscripten_glDrawArraysInstancedANGLE:Ti,_emscripten_glDrawArraysInstancedARB:Pi,_emscripten_glDrawArraysInstancedEXT:Ai,_emscripten_glDrawArraysInstancedNV:Ci,_emscripten_glDrawBuffers:Bi,_emscripten_glDrawBuffersEXT:Di,_emscripten_glDrawBuffersWEBGL:Ii,_emscripten_glDrawElements:ki,_emscripten_glDrawElementsInstanced:Fi,_emscripten_glDrawElementsInstancedANGLE:Ri,_emscripten_glDrawElementsInstancedARB:Li,_emscripten_glDrawElementsInstancedEXT:Oi,_emscripten_glDrawElementsInstancedNV:Ni,_emscripten_glDrawRangeElements:Gi,_emscripten_glEnable:Vi,_emscripten_glEnableVertexAttribArray:Wi,_emscripten_glEndQuery:$i,_emscripten_glEndQueryEXT:ji,_emscripten_glEndTransformFeedback:zi,_emscripten_glFenceSync:Hi,_emscripten_glFinish:qi,_emscripten_glFlush:Yi,_emscripten_glFlushMappedBufferRange:Xi,_emscripten_glFramebufferRenderbuffer:Qi,_emscripten_glFramebufferTexture2D:Ki,_emscripten_glFramebufferTextureLayer:Zi,_emscripten_glFrontFace:Ji,_emscripten_glGenBuffers:to,_emscripten_glGenFramebuffers:ro,_emscripten_glGenQueries:no,_emscripten_glGenQueriesEXT:io,_emscripten_glGenRenderbuffers:oo,_emscripten_glGenSamplers:ao,_emscripten_glGenTextures:so,_emscripten_glGenTransformFeedbacks:uo,_emscripten_glGenVertexArrays:co,_emscripten_glGenVertexArraysOES:fo,_emscripten_glGenerateMipmap:lo,_emscripten_glGetActiveAttrib:po,_emscripten_glGetActiveUniform:mo,_emscripten_glGetActiveUniformBlockName:ho,_emscripten_glGetActiveUniformBlockiv:go,_emscripten_glGetActiveUniformsiv:yo,_emscripten_glGetAttachedShaders:vo,_emscripten_glGetAttribLocation:_o,_emscripten_glGetBooleanv:Eo,_emscripten_glGetBufferParameteri64v:wo,_emscripten_glGetBufferParameteriv:xo,_emscripten_glGetBufferPointerv:So,_emscripten_glGetError:To,_emscripten_glGetFloatv:Po,_emscripten_glGetFragDataLocation:Ao,_emscripten_glGetFramebufferAttachmentParameteriv:Co,_emscripten_glGetInteger64i_v:Bo,_emscripten_glGetInteger64v:Do,_emscripten_glGetIntegeri_v:Io,_emscripten_glGetIntegerv:ko,_emscripten_glGetInternalformativ:Fo,_emscripten_glGetProgramBinary:Ro,_emscripten_glGetProgramInfoLog:Lo,_emscripten_glGetProgramiv:Oo,_emscripten_glGetQueryObjecti64vEXT:No,_emscripten_glGetQueryObjectivEXT:Uo,_emscripten_glGetQueryObjectui64vEXT:Go,_emscripten_glGetQueryObjectuiv:Vo,_emscripten_glGetQueryObjectuivEXT:Wo,_emscripten_glGetQueryiv:$o,_emscripten_glGetQueryivEXT:jo,_emscripten_glGetRenderbufferParameteriv:zo,_emscripten_glGetSamplerParameterfv:Ho,_emscripten_glGetSamplerParameteriv:qo,_emscripten_glGetShaderInfoLog:Yo,_emscripten_glGetShaderPrecisionFormat:Xo,_emscripten_glGetShaderSource:Qo,_emscripten_glGetShaderiv:Ko,_emscripten_glGetString:Jo,_emscripten_glGetStringi:ea,_emscripten_glGetSynciv:ta,_emscripten_glGetTexParameterfv:ra,_emscripten_glGetTexParameteriv:na,_emscripten_glGetTransformFeedbackVarying:ia,_emscripten_glGetUniformBlockIndex:oa,_emscripten_glGetUniformIndices:aa,_emscripten_glGetUniformLocation:sa,_emscripten_glGetUniformfv:ca,_emscripten_glGetUniformiv:fa,_emscripten_glGetUniformuiv:la,_emscripten_glGetVertexAttribIiv:pa,_emscripten_glGetVertexAttribIuiv:ma,_emscripten_glGetVertexAttribPointerv:ha,_emscripten_glGetVertexAttribfv:ga,_emscripten_glGetVertexAttribiv:ya,_emscripten_glHint:va,_emscripten_glInvalidateFramebuffer:_a,_emscripten_glInvalidateSubFramebuffer:ba,_emscripten_glIsBuffer:Ea,_emscripten_glIsEnabled:wa,_emscripten_glIsFramebuffer:xa,_emscripten_glIsProgram:Sa,_emscripten_glIsQuery:Ta,_emscripten_glIsQueryEXT:Pa,_emscripten_glIsRenderbuffer:Aa,_emscripten_glIsSampler:Ca,_emscripten_glIsShader:Ma,_emscripten_glIsSync:Ba,_emscripten_glIsTexture:Da,_emscripten_glIsTransformFeedback:Ia,_emscripten_glIsVertexArray:ka,_emscripten_glIsVertexArrayOES:Fa,_emscripten_glLineWidth:Ra,_emscripten_glLinkProgram:La,_emscripten_glMapBufferRange:Oa,_emscripten_glPauseTransformFeedback:Na,_emscripten_glPixelStorei:Ua,_emscripten_glPolygonOffset:Ga,_emscripten_glProgramBinary:Va,_emscripten_glProgramParameteri:Wa,_emscripten_glQueryCounterEXT:$a,_emscripten_glReadBuffer:ja,_emscripten_glReadPixels:Za,_emscripten_glReleaseShaderCompiler:Ja,_emscripten_glRenderbufferStorage:es,_emscripten_glRenderbufferStorageMultisample:ts,_emscripten_glResumeTransformFeedback:rs,_emscripten_glSampleCoverage:ns,_emscripten_glSamplerParameterf:is,_emscripten_glSamplerParameterfv:os,_emscripten_glSamplerParameteri:as,_emscripten_glSamplerParameteriv:ss,_emscripten_glScissor:us,_emscripten_glShaderBinary:cs,_emscripten_glShaderSource:fs,_emscripten_glStencilFunc:ls,_emscripten_glStencilFuncSeparate:ds,_emscripten_glStencilMask:ps,_emscripten_glStencilMaskSeparate:ms,_emscripten_glStencilOp:hs,_emscripten_glStencilOpSeparate:gs,_emscripten_glTexImage2D:ys,_emscripten_glTexImage3D:vs,_emscripten_glTexParameterf:_s,_emscripten_glTexParameterfv:bs,_emscripten_glTexParameteri:Es,_emscripten_glTexParameteriv:ws,_emscripten_glTexStorage2D:xs,_emscripten_glTexStorage3D:Ss,_emscripten_glTexSubImage2D:Ts,_emscripten_glTexSubImage3D:Ps,_emscripten_glTransformFeedbackVaryings:As,_emscripten_glUniform1f:Cs,_emscripten_glUniform1fv:Ms,_emscripten_glUniform1i:Bs,_emscripten_glUniform1iv:Ds,_emscripten_glUniform1ui:Is,_emscripten_glUniform1uiv:ks,_emscripten_glUniform2f:Fs,_emscripten_glUniform2fv:Rs,_emscripten_glUniform2i:Ls,_emscripten_glUniform2iv:Os,_emscripten_glUniform2ui:Ns,_emscripten_glUniform2uiv:Us,_emscripten_glUniform3f:Gs,_emscripten_glUniform3fv:Vs,_emscripten_glUniform3i:Ws,_emscripten_glUniform3iv:$s,_emscripten_glUniform3ui:js,_emscripten_glUniform3uiv:zs,_emscripten_glUniform4f:Hs,_emscripten_glUniform4fv:qs,_emscripten_glUniform4i:Ys,_emscripten_glUniform4iv:Xs,_emscripten_glUniform4ui:Qs,_emscripten_glUniform4uiv:Ks,_emscripten_glUniformBlockBinding:Zs,_emscripten_glUniformMatrix2fv:Js,_emscripten_glUniformMatrix2x3fv:eu,_emscripten_glUniformMatrix2x4fv:tu,_emscripten_glUniformMatrix3fv:ru,_emscripten_glUniformMatrix3x2fv:nu,_emscripten_glUniformMatrix3x4fv:iu,_emscripten_glUniformMatrix4fv:ou,_emscripten_glUniformMatrix4x2fv:au,_emscripten_glUniformMatrix4x3fv:su,_emscripten_glUnmapBuffer:uu,_emscripten_glUseProgram:cu,_emscripten_glValidateProgram:fu,_emscripten_glVertexAttrib1f:lu,_emscripten_glVertexAttrib1fv:du,_emscripten_glVertexAttrib2f:pu,_emscripten_glVertexAttrib2fv:mu,_emscripten_glVertexAttrib3f:hu,_emscripten_glVertexAttrib3fv:gu,_emscripten_glVertexAttrib4f:yu,_emscripten_glVertexAttrib4fv:vu,_emscripten_glVertexAttribDivisor:_u,_emscripten_glVertexAttribDivisorANGLE:bu,_emscripten_glVertexAttribDivisorARB:Eu,_emscripten_glVertexAttribDivisorEXT:wu,_emscripten_glVertexAttribDivisorNV:xu,_emscripten_glVertexAttribI4i:Su,_emscripten_glVertexAttribI4iv:Tu,_emscripten_glVertexAttribI4ui:Pu,_emscripten_glVertexAttribI4uiv:Au,_emscripten_glVertexAttribIPointer:Cu,_emscripten_glVertexAttribPointer:Mu,_emscripten_glViewport:Bu,_emscripten_glWaitSync:Du,_emscripten_memcpy_big:Cf,_emscripten_resize_heap:Fu,_glActiveTexture:Ru,_glAttachShader:Lu,_glBindBuffer:Ou,_glBindBufferRange:Nu,_glBindFramebuffer:Uu,_glBindRenderbuffer:Gu,_glBindSampler:Vu,_glBindTexture:Wu,_glBindVertexArray:$u,_glBlendEquationSeparate:ju,_glBlendFuncSeparate:zu,_glBlitFramebuffer:Hu,_glBufferData:qu,_glBufferSubData:Yu,_glClear:Xu,_glClearColor:Qu,_glClearDepthf:Ku,_glClearStencil:Zu,_glColorMask:Ju,_glCompileShader:ec,_glCompressedTexSubImage2D:tc,_glCompressedTexSubImage3D:rc,_glCreateProgram:nc,_glCreateShader:ic,_glCullFace:oc,_glDeleteBuffers:ac,_glDeleteFramebuffers:sc,_glDeleteProgram:uc,_glDeleteRenderbuffers:cc,_glDeleteSamplers:fc,_glDeleteShader:lc,_glDeleteSync:dc,_glDeleteTextures:pc,_glDeleteVertexArrays:mc,_glDepthFunc:hc,_glDepthMask:gc,_glDetachShader:yc,_glDisable:vc,_glDisableVertexAttribArray:_c,_glDrawArrays:bc,_glDrawElements:Ui,_glDrawRangeElements:Ec,_glEnable:wc,_glEnableVertexAttribArray:xc,_glFenceSync:Sc,_glFlush:Tc,_glFramebufferRenderbuffer:Pc,_glFramebufferTexture2D:Ac,_glFramebufferTextureLayer:Cc,_glFrontFace:Mc,_glGenBuffers:Bc,_glGenFramebuffers:Dc,_glGenRenderbuffers:Ic,_glGenSamplers:kc,_glGenTextures:Fc,_glGenVertexArrays:Rc,_glGenerateMipmap:Lc,_glGetError:Oc,_glGetFloatv:Nc,_glGetIntegerv:Uc,_glGetProgramInfoLog:Gc,_glGetProgramiv:Vc,_glGetShaderInfoLog:Wc,_glGetShaderiv:$c,_glGetString:jc,_glGetStringi:zc,_glGetUniformBlockIndex:Hc,_glGetUniformLocation:qc,_glGetVertexAttribiv:Yc,_glHint:Xc,_glInvalidateFramebuffer:Qc,_glInvalidateSubFramebuffer:Kc,_glIsEnabled:Zc,_glLinkProgram:Jc,_glPixelStorei:ef,_glPolygonOffset:tf,_glReadPixels:rf,_glRenderbufferStorage:nf,_glRenderbufferStorageMultisample:of,_glSamplerParameteri:af,_glScissor:sf,_glShaderSource:uf,_glTexParameteri:cf,_glTexStorage2D:ff,_glTexStorage2DMultisample:lf,_glTexStorage3D:df,_glTexSubImage2D:pf,_glTexSubImage3D:mf,_glUniform1f:hf,_glUniform1i:gf,_glUniform4f:yf,_glUniformBlockBinding:vf,_glUseProgram:_f,_glVertexAttribIPointer:bf,_glVertexAttribPointer:Ef,_glViewport:wf,_glWaitSync:xf,_llvm_exp2_f32:Sf,_llvm_exp2_f64:Tf,_llvm_log2_f32:Pf,_llvm_trap:Af,_pthread_cond_destroy:Mf,_pthread_cond_signal:Bf,_pthread_cond_timedwait:Df,_pthread_cond_wait:If,_pthread_create:kf,_pthread_join:Ff,_sysconf:Rf,abortOnCannotGrowMemory:Iu,constNoSmartPtrRawPointerToWireType:zt,count_emval_handles:Pr,craftInvokerFunction:gr,createNamedFunction:lt,downcastPointer:Kt,embind__requireFunction:fr,embind_init_charCodes:bt,emscriptenWebGLGet:bo,emscriptenWebGLGetIndexed:Mo,emscriptenWebGLGetTexPixelData:Ya,emscriptenWebGLGetUniform:ua,emscriptenWebGLGetVertexAttrib:da,emscripten_realloc_buffer:ku,ensureOverloadTable:Vt,enumReadValueFromPointer:Dr,exposePublicSymbol:Wt,extendError:dt,floatReadValueFromPointer:Lr,flushPendingDeletes:Lt,genericPointerToWireType:Ht,getBasestPointer:nr,getInheritedInstance:ir,getInheritedInstanceCount:Zt,getLiveInheritedInstances:Jt,getShiftFromSize:_t,getStringOrSymbol:en,getTypeName:dr,get_first_emval:Ar,heap32VectorToArray:yr,init_ClassHandle:Nt,init_RegisteredPointer:sr,init_embind:tr,init_emval:Cr,integerReadValueFromPointer:Ur,makeClassHandle:or,makeLegalFunctionName:ft,new_:hr,nonConstNoSmartPtrRawPointerToWireType:qt,readLatin1String:wt,registerType:Tt,replacePublicSymbol:cr,requireHandle:Xr,requireRegisteredType:kr,runDestructor:Dt,runDestructors:nt,setDelayFunction:er,shallowCopyInternalPointer:Ct,simpleReadValueFromPointer:it,stringToNewUTF8:Zo,throwBindingError:St,throwInstanceAlreadyDeleted:Mt,throwInternalError:mt,throwUnboundTypeError:pr,upcastPointer:jt,validateThis:Er,whenDependentTypesAreResolved:ht,tempDoublePtr:Ce,DYNAMICTOP_PTR:K},Wf=a.asm(Gf,Vf,L);a.asm=Wf;a.___errno_location=function(){return a.asm.___errno_location.apply(null,arguments)};var $f=a.___getTypeName=function(){return a.asm.___getTypeName.apply(null,arguments)},jf=(a._emscripten_GetProcAddress=function(){return a.asm._emscripten_GetProcAddress.apply(null,arguments)},a._emscripten_replace_memory=function(){return a.asm._emscripten_replace_memory.apply(null,arguments)},a._free=function(){return a.asm._free.apply(null,arguments)}),zf=a._i64Subtract=function(){return a.asm._i64Subtract.apply(null,arguments)},Hf=(a._llvm_round_f32=function(){return a.asm._llvm_round_f32.apply(null,arguments)},a._malloc=function(){return a.asm._malloc.apply(null,arguments)}),qf=(a._memcpy=function(){return a.asm._memcpy.apply(null,arguments)},a._memmove=function(){return a.asm._memmove.apply(null,arguments)},a._memset=function(){return a.asm._memset.apply(null,arguments)},a._pthread_cond_broadcast=function(){return a.asm._pthread_cond_broadcast.apply(null,arguments)},a._sbrk=function(){return a.asm._sbrk.apply(null,arguments)},a._strstr=function(){return a.asm._strstr.apply(null,arguments)},a.establishStackSpace=function(){return a.asm.establishStackSpace.apply(null,arguments)},a.globalCtors=function(){return a.asm.globalCtors.apply(null,arguments)});a.stackAlloc=function(){return a.asm.stackAlloc.apply(null,arguments)},a.stackRestore=function(){return a.asm.stackRestore.apply(null,arguments)},a.stackSave=function(){return a.asm.stackSave.apply(null,arguments)},a.dynCall_dii=function(){return a.asm.dynCall_dii.apply(null,arguments)},a.dynCall_fi=function(){return a.asm.dynCall_fi.apply(null,arguments)},a.dynCall_fii=function(){return a.asm.dynCall_fii.apply(null,arguments)},a.dynCall_fiii=function(){return a.asm.dynCall_fiii.apply(null,arguments)},a.dynCall_i=function(){return a.asm.dynCall_i.apply(null,arguments)},a.dynCall_ii=function(){return a.asm.dynCall_ii.apply(null,arguments)},a.dynCall_iif=function(){return a.asm.dynCall_iif.apply(null,arguments)},a.dynCall_iiff=function(){return a.asm.dynCall_iiff.apply(null,arguments)},a.dynCall_iii=function(){return a.asm.dynCall_iii.apply(null,arguments)},a.dynCall_iiif=function(){return a.asm.dynCall_iiif.apply(null,arguments)},a.dynCall_iiiff=function(){return a.asm.dynCall_iiiff.apply(null,arguments)},a.dynCall_iiii=function(){return a.asm.dynCall_iiii.apply(null,arguments)},a.dynCall_iiiii=function(){return a.asm.dynCall_iiiii.apply(null,arguments)},a.dynCall_iiiiii=function(){return a.asm.dynCall_iiiiii.apply(null,arguments)},a.dynCall_iiiiiii=function(){return a.asm.dynCall_iiiiiii.apply(null,arguments)},a.dynCall_iiiiiiii=function(){return a.asm.dynCall_iiiiiiii.apply(null,arguments)},a.dynCall_iiij=function(){return a.asm.dynCall_iiij.apply(null,arguments)},a.dynCall_jii=function(){return a.asm.dynCall_jii.apply(null,arguments)},a.dynCall_v=function(){return a.asm.dynCall_v.apply(null,arguments)},a.dynCall_vf=function(){return a.asm.dynCall_vf.apply(null,arguments)},a.dynCall_vff=function(){return a.asm.dynCall_vff.apply(null,arguments)},a.dynCall_vffff=function(){return a.asm.dynCall_vffff.apply(null,arguments)},a.dynCall_vfi=function(){return a.asm.dynCall_vfi.apply(null,arguments)},a.dynCall_vi=function(){return a.asm.dynCall_vi.apply(null,arguments)},a.dynCall_viddd=function(){return a.asm.dynCall_viddd.apply(null,arguments)},a.dynCall_viddddi=function(){return a.asm.dynCall_viddddi.apply(null,arguments)},a.dynCall_vif=function(){return a.asm.dynCall_vif.apply(null,arguments)},a.dynCall_viff=function(){return a.asm.dynCall_viff.apply(null,arguments)},a.dynCall_vifff=function(){return a.asm.dynCall_vifff.apply(null,arguments)},a.dynCall_viffff=function(){return a.asm.dynCall_viffff.apply(null,arguments)},a.dynCall_vii=function(){return a.asm.dynCall_vii.apply(null,arguments)},a.dynCall_viid=function(){return a.asm.dynCall_viid.apply(null,arguments)},a.dynCall_viidd=function(){return a.asm.dynCall_viidd.apply(null,arguments)},a.dynCall_viiddd=function(){return a.asm.dynCall_viiddd.apply(null,arguments)},a.dynCall_viidddddd=function(){return a.asm.dynCall_viidddddd.apply(null,arguments)},a.dynCall_viiddddi=function(){return a.asm.dynCall_viiddddi.apply(null,arguments)},a.dynCall_viif=function(){return a.asm.dynCall_viif.apply(null,arguments)},a.dynCall_viiff=function(){return a.asm.dynCall_viiff.apply(null,arguments)},a.dynCall_viifff=function(){return a.asm.dynCall_viifff.apply(null,arguments)},a.dynCall_viiffff=function(){return a.asm.dynCall_viiffff.apply(null,arguments)},a.dynCall_viifi=function(){return a.asm.dynCall_viifi.apply(null,arguments)},a.dynCall_viii=function(){return a.asm.dynCall_viii.apply(null,arguments)},a.dynCall_viiidd=function(){return a.asm.dynCall_viiidd.apply(null,arguments)},a.dynCall_viiidddddd=function(){return a.asm.dynCall_viiidddddd.apply(null,arguments)},a.dynCall_viiif=function(){return a.asm.dynCall_viiif.apply(null,arguments)},a.dynCall_viiiffff=function(){return a.asm.dynCall_viiiffff.apply(null,arguments)},a.dynCall_viiii=function(){return a.asm.dynCall_viiii.apply(null,arguments)},a.dynCall_viiiii=function(){return a.asm.dynCall_viiiii.apply(null,arguments)},a.dynCall_viiiiii=function(){return a.asm.dynCall_viiiiii.apply(null,arguments)},a.dynCall_viiiiiii=function(){return a.asm.dynCall_viiiiiii.apply(null,arguments)},a.dynCall_viiiiiiii=function(){return a.asm.dynCall_viiiiiiii.apply(null,arguments)},a.dynCall_viiiiiiiii=function(){return a.asm.dynCall_viiiiiiiii.apply(null,arguments)},a.dynCall_viiiiiiiiii=function(){return a.asm.dynCall_viiiiiiiiii.apply(null,arguments)},a.dynCall_viiiiiiiiiii=function(){return a.asm.dynCall_viiiiiiiiiii.apply(null,arguments)},a.dynCall_viij=function(){return a.asm.dynCall_viij.apply(null,arguments)},a.dynCall_vij=function(){return a.asm.dynCall_vij.apply(null,arguments)};function Yf(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Xf(e){function t(){a.calledRun||(a.calledRun=!0,S||(se(),ue(),a.onRuntimeInitialized&&a.onRuntimeInitialized(),ce()))}e=e||a.arguments,ge>0||(ae(),ge>0||a.calledRun||(a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),t()},1)):t()))}function Qf(e){throw a.onAbort&&a.onAbort(e),void 0!==e?(g(e),y(e),e=JSON.stringify(e)):e="",S=!0,1,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(a.asm=Wf,Yf.prototype=new Error,Yf.prototype.constructor=Yf,ve=function e(){a.calledRun||Xf(),a.calledRun||(ve=e)},a.run=Xf,a.abort=Qf,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();function Kf(t){return("string"==typeof t||t instanceof String)&&(t=e.assets[t]),t.buffer instanceof ArrayBuffer&&(t=e.Buffer(t)),t}function Zf(e,t,r){return Math.max(Math.min(r,e),t)}return a.noExitRuntime=!0,Xf(),e.remainingInitializationTasks=1,e.init=function(t,r){e.onReady=r,e.remainingInitializationTasks+=t.length,e.assets={},"undefined"!=typeof glMatrix&&e.loadMathExtensions(),e.fetch(t,null,function(t){0==--e.remainingInitializationTasks&&e.onReady&&e.onReady()})},e.postRun=function(){e.loadClassExtensions(),0==--e.remainingInitializationTasks&&e.onReady&&e.onReady()},e.fetch=function(t,r,n){var i=t.length;t.forEach(function(t){const o=t.toLowerCase();if(o.endsWith(".jpeg")||o.endsWith(".jpg")){var a=new Image;return a.src=t,a.decoding="async",void(a.onload=function(){e.assets[t]=a,n&&n(t),0==--i&&r&&r()})}fetch(t).then(function(e){if(!e.ok)throw new Error(t);return e.arrayBuffer()}).then(function(o){e.assets[t]=new Uint8Array(o),n&&n(t),0==--i&&r&&r()})})},e.loadClassExtensions=function(){e.Engine.create=function(t,r){r=Object.assign({majorVersion:2,minorVersion:0,antialias:!1,depth:!1,alpha:!1},r);const n=t.getContext("webgl2",r),i=fn.registerContext(n,r);return fn.makeContextCurrent(i),n.getExtension("WEBGL_compressed_texture_s3tc"),n.getExtension("WEBGL_compressed_texture_astc"),n.getExtension("WEBGL_compressed_texture_etc"),e.Engine._create()},e.Engine.prototype.createMaterial=function(e){e=Kf(e);const t=this._createMaterial(e);return e.delete(),t},e.Engine.prototype.createTextureFromKtx=function(t,r){t=Kf(t);const n=e._createTextureFromKtx(t,this,r);return t.delete(),n},e.Engine.prototype.createIblFromKtx=function(t,r){t=Kf(t);const n=e._createIblFromKtx(t,this,r);return t.delete(),n},e.Engine.prototype.createSkyFromKtx=function(t,r){const n=this.createTextureFromKtx(t,r);return e.Skybox.Builder().environment(n).build(this)},e.Engine.prototype.createTextureFromPng=function(t,r){t=Kf(t);const n=e._createTextureFromPng(t,this,r);return t.delete(),n},e.Engine.prototype.createTextureFromJpeg=function(t,r){return r=r||{},("string"==typeof t||t instanceof String)&&(t=e.assets[t]),e._createTextureFromJpeg(t,this,r)},e.Engine.prototype.loadFilamesh=function(t,r,n){t=Kf(t);const i=e._loadFilamesh(this,t,r,n);return t.delete(),i},e.Engine.prototype.createAssetLoader=function(){const t=new e.gltfio$UbershaderLoader(this);return new e.gltfio$AssetLoader(this,t)},e.VertexBuffer.prototype.setBufferAt=function(e,t,r){r=Kf(r),this._setBufferAt(e,t,r),r.delete()},e.IndexBuffer.prototype.setBuffer=function(e,t){t=Kf(t),this._setBuffer(e,t),t.delete()},e.RenderableManager$Builder.prototype.build=e.LightManager$Builder.prototype.build=function(e,t){const r=this._build(e,t);return this.delete(),r},e.RenderTarget$Builder.prototype.build=e.VertexBuffer$Builder.prototype.build=e.IndexBuffer$Builder.prototype.build=e.Texture$Builder.prototype.build=e.IndirectLight$Builder.prototype.build=e.Skybox$Builder.prototype.build=function(e){const t=this._build(e);return this.delete(),t},e.KtxBundle.prototype.getBlob=function(e){const t=this._getBlob(e),r=t.getBytes();return t.delete(),r},e.KtxBundle.prototype.getCubeBlob=function(e){const t=this._getCubeBlob(e),r=t.getBytes();return t.delete(),r},e.Texture.prototype.setImage=function(e,t,r){this._setImage(e,t,r),r.delete()},e.Texture.prototype.setImageCube=function(e,t,r){this._setImageCube(e,t,r),r.delete()},e.SurfaceOrientation$Builder.prototype.build=function(){const e=this._build();return this.delete(),e},e.gltfio$AssetLoader.prototype.createAssetFromJson=function(e){"string"==typeof e&&e.endsWith(".glb")&&console.error("Please use createAssetFromBinary for glb files."),e=Kf(e);const t=this._createAssetFromJson(e);return e.delete(),t},e.gltfio$AssetLoader.prototype.createAssetFromBinary=function(e){"string"==typeof e&&e.endsWith(".gltf")&&console.error("Please use createAssetFromJson for gltf files."),e=Kf(e);const t=this._createAssetFromBinary(e);return e.delete(),t},e.gltfio$FilamentAsset.prototype.loadResources=function(t,r,n){const i=this,o=this.getEngine(),a=this.getResourceUrls(),s=new Set,u={};n=n||document.location;for(var c=0;c<a.size();c++){const e=a.get(c);if(e){const t=""+new URL(e,n);u[t]=e,s.add(t)}}const f=new e.gltfio$ResourceLoader(o),l=function(){const e=function(){f.loadResources(i),window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){f.delete()})})};t?t(e):e()};0!=s.size?e.fetch(Array.from(s),l,function(e){const t=Kf(e),n=u[e];f.addResourceData(n,t),t.delete(),r&&r(n)}):l()}},e.Buffer=function(t){console.assert(t.buffer instanceof ArrayBuffer),console.assert(t.byteLength>0),e.HEAPU32.buffer==t.buffer&&(t=new Uint8Array(t));const r=t,n=new e.driver$BufferDescriptor(r),i=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return n.getBytes().set(i),n},e.PixelBuffer=function(t,r,n){console.assert(t.buffer instanceof ArrayBuffer),console.assert(t.byteLength>0),e.HEAPU32.buffer==t.buffer&&(t=new Uint8Array(t));const i=t,o=new e.driver$PixelBufferDescriptor(i,r,n),a=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return o.getBytes().set(a),o},e.CompressedPixelBuffer=function(t,r,n){console.assert(t.buffer instanceof ArrayBuffer),console.assert(t.byteLength>0),n=n||t.byteLength,e.HEAPU32.buffer==t.buffer&&(t=new Uint8Array(t));const i=t,o=new e.driver$PixelBufferDescriptor(i,r,n,!0),a=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);return o.getBytes().set(a),o},e._loadFilamesh=function(t,r,n,i){i=i||{};const o=new e.MeshReader$MaterialRegistry;for(var a in i)o.set(a,i[a]);n&&o.set("DefaultMaterial",n);const s=e.MeshReader.loadMeshFromBuffer(t,r,o),u=o.keys();for(var c=0;c<u.size();c++){const e=u.get(c),t=o.get(e);i[e]=t}return{renderable:s.renderable(),vertexBuffer:s.vertexBuffer(),indexBuffer:s.indexBuffer()}},e.IcoSphere=function(t){const r=.5257311121191336,n=.8506508083520399;if(this.vertices=new Float32Array([-r,0,+n,+r,0,+n,-r,0,-n,+r,0,-n,0,+n,+r,0,+n,-r,0,-n,+r,0,-n,-r,+n,+r,0,-n,+r,0,+n,-r,0,-n,-r,0]),this.triangles=new Uint16Array([1,4,0,4,9,0,4,5,9,8,5,4,1,8,4,1,10,8,10,3,8,8,3,5,3,2,5,3,7,2,3,10,7,10,6,7,6,11,7,6,0,11,6,1,0,10,1,6,11,0,9,2,11,9,5,2,9,11,2,7]),t)for(;t-- >0;)this.subdivide();const i=this.vertices.length/3,o=e._malloc(this.vertices.length*this.vertices.BYTES_PER_ELEMENT);a.HEAPU8.set(new Uint8Array(this.vertices.buffer),o);const s=new e.SurfaceOrientation$Builder;s.vertexCount(i),s.normals(o,0);const u=s.build();e._free(o);const c=8*i,f=e._malloc(c);u.getQuats(f,i,e.VertexBuffer$AttributeType.SHORT4);const l=a.HEAPU8.subarray(f,f+c).slice().buffer;e._free(f),this.tangents=new Int16Array(l),u.delete()},e.IcoSphere.prototype.subdivide=function(){const e=this.triangles,t=this.vertices,r=e.length/3,n=4*r,i=t.length/3,o=i+3*r,a=new Uint16Array(3*n),s=new Float32Array(3*o);s.set(t);for(var u=0,c=0,f=3*i,l=f+3,d=l+3,p=0;p<r;p++,f+=9,l+=9,d+=9){const r=3*e[u++],n=3*e[u++],i=3*e[u++],o=t.subarray(r,r+3),p=t.subarray(n,n+3),m=t.subarray(i,i+3),h=s.subarray(f,f+3),g=s.subarray(l,l+3),y=s.subarray(d,d+3);vec3.normalize(h,vec3.add(h,o,p)),vec3.normalize(g,vec3.add(g,p,m)),vec3.normalize(y,vec3.add(y,m,o)),a[c++]=r/3,a[c++]=f/3,a[c++]=d/3,a[c++]=f/3,a[c++]=n/3,a[c++]=l/3,a[c++]=d/3,a[c++]=f/3,a[c++]=l/3,a[c++]=i/3,a[c++]=d/3,a[c++]=l/3}this.triangles=a,this.vertices=s},e.packSnorm16=function(e){return Math.round(32767*Zf(e,-1,1))},e.loadMathExtensions=function(){vec4.packSnorm16=function(t,r){return t[0]=e.packSnorm16(r[0]),t[1]=e.packSnorm16(r[1]),t[2]=e.packSnorm16(r[2]),t[3]=e.packSnorm16(r[3]),t};const t=mat3.fromRotation;mat3.fromRotation=function(e,r,n){return n?mat3.fromMat4(e,mat4.fromRotation(mat4.create(),r,n)):t(e,r)}},e._createTextureFromKtx=function(t,r,n){const i=(n=n||{}).ktx||new e.KtxBundle(t),o=!!n.srgb;return e.KtxUtility$createTexture(r,i,o)},e._createIblFromKtx=function(t,r,n){const i=(n=n||{}).ktx=new e.KtxBundle(t),o=i.info().glInternalFormat;o!=this.ctx.R11F_G11F_B10F&&o!=this.ctx.RGB16F&&o!=this.ctx.RGB32F&&console.warn("IBL texture format is 0x"+o.toString(16)+" which is not an expected floating-point format. Please use cmgen to generate IBL.");const a=e._createTextureFromKtx(t,r,n),s=i.getMetadata("sh").split(/\s/,27).map(parseFloat);return e.IndirectLight.Builder().reflections(a).irradianceSh(3,s).build(r)},e._createTextureFromPng=function(t,r,n){const i=e.Texture$Sampler,o=e.Texture$InternalFormat,a=e.PixelDataFormat,s=!!(n=n||{}).srgb,u=!!n.noalpha,c=!!n.nomips,f=e.decodePng(t,u?3:4);var l,d,p;u?(l=s?o.SRGB8:o.RGB8,d=a.RGB,p=e.PixelDataType.UBYTE):(l=s?o.SRGB8_A8:o.RGBA8,d=a.RGBA,p=e.PixelDataType.UBYTE);const m=e.Texture.Builder().width(f.width).height(f.height).levels(c?1:255).sampler(i.SAMPLER_2D).format(l).build(r),h=e.PixelBuffer(f.data.getBytes(),d,p);return m.setImage(r,0,h),c||m.generateMipmaps(r),m},e._createTextureFromJpeg=function(t,r,n){const i=!!(n=n||{}).srgb,o=!!n.nomips;var a=document.createElement("canvas").getContext("2d");a.canvas.width=t.width,a.canvas.height=t.height,a.width=t.width,a.height=t.height,a.globalCompositeOperation="copy",a.drawImage(t,0,0);var s=a.getImageData(0,0,t.width,t.height).data.buffer,u=new Uint8Array(s);const c=e.Texture$InternalFormat,f=i?c.SRGB8_A8:c.RGBA8,l=e.PixelDataFormat.RGBA,d=e.PixelDataType.UBYTE,p=e.Texture.Builder().width(t.width).height(t.height).levels(o?1:255).sampler(e.Texture$Sampler.SAMPLER_2D).format(f).build(r),m=e.PixelBuffer(u,l,d);return p.setImage(r,0,m),o||p.generateMipmaps(r),p},e.getSupportedFormats=function(){if(e.supportedFormats)return e.supportedFormats;const t={s3tc:!1,astc:!1,etc:!1};var r,n=document.createElement("canvas").getContext("webgl2",{majorVersion:2,minorVersion:0}).getSupportedExtensions(),i=n.length;for(r=0;r<i;r++){var o=n[r];"WEBGL_compressed_texture_s3tc"==o?t.s3tc=!0:"WEBGL_compressed_texture_astc"==o?t.astc=!0:"WEBGL_compressed_texture_etc"==o&&(t.etc=!0)}return e.supportedFormats=t},e.getSupportedFormatSuffix=function(t){t=t.split(" ");var r=e.getSupportedFormats();for(var n in r)if(r[n]&&t.includes(n))return"_"+n;return""},e}("object"==typeof o?o:{});e.exports=o}).call(this,r(10),"/",r(11).Buffer)},function(e,t){e.exports=fs},function(e,t){e.exports=path},,,,,,,,function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u,c=[],f=!1,l=-1;function d(){f&&u&&(f=!1,u.length?c=u.concat(c):l=-1,c.length&&p())}function p(){if(!f){var e=s(d);f=!0;for(var t=c.length;t;){for(u=c,c=[];++l<t;)u&&u[l].run();l=-1,t=c.length}u=null,f=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1!==c.length||f||s(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var n=r(13),i=r(14),o=r(15);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return c(this,e,t,r)}function c(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=d(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|m(t,r),i=(e=s(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|p(t.length);return 0===(e=s(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?s(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(f(t),e=s(e,t<0?0:0|p(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function d(e,t){var r=t.length<0?0:0|p(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function m(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(e).length;default:if(n)return V(e).length;t=(""+t).toLowerCase(),n=!0}}function h(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return B(this,t,r);case"utf8":case"utf-8":return P(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return M(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){var o,a=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var f=-1;for(o=r;o<s;o++)if(c(e,o)===c(t,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===u)return f*a}else-1!==f&&(o-=o-f),f=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var l=!0,d=0;d<u;d++)if(c(e,o+d)!==c(t,d)){l=!1;break}if(l)return o}return-1}function _(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function b(e,t,r,n){return $(V(t,e.length-r),e,r,n)}function E(e,t,r,n){return $(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function w(e,t,r,n){return E(e,t,r,n)}function x(e,t,r,n){return $(W(t),e,r,n)}function S(e,t,r,n){return $(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function P(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,u,c=e[i],f=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=r)switch(l){case 1:c<128&&(f=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(f=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(f=u)}null===f?(f=65533,l=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),i+=l}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=A));return r}(n)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return c(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,n){return f(t),t<=0?s(e,t):void 0!==r?"string"==typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return l(null,e)},u.allocUnsafeSlow=function(e){return l(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=u.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=m,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):h.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,n,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(n,i),f=e.slice(t,r),l=0;l<s;++l)if(c[l]!==f[l]){o=c[l],a=f[l];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":return E(this,e,t,r);case"latin1":case"binary":return w(this,e,t,r);case"base64":return x(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function C(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function M(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function B(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=G(e[o]);return i}function D(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function I(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,r,n,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function F(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function R(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function L(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function O(e,t,r,n,o){return o||L(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function N(e,t,r,n,o){return o||L(e,0,r,8),i.write(e,t,r,n,52,8),r+8}u.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},u.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||k(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||k(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);k(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);k(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return O(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return O(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=u.isBuffer(e)?e:V(new u(e,n).toString()),s=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function G(e){return e<16?"0"+e.toString(16):e.toString(16)}function V(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(12))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=c(e),a=n[0],s=n[1],u=new o(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),f=0,l=s>0?a-4:a;for(r=0;r<l;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],u[f++]=t>>16&255,u[f++]=t>>8&255,u[f++]=255&t;2===s&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,u[f++]=255&t);1===s&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,u[f++]=t>>8&255,u[f++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(f(e,a,a+16383>s?s:a+16383));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function f(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,f=-7,l=r?i-1:0,d=r?-1:1,p=e[t+l];for(l+=d,o=p&(1<<-f)-1,p>>=-f,f+=s;f>0;o=256*o+e[t+l],l+=d,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=n;f>0;a=256*a+e[t+l],l+=d,f-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=c}return(p?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,m=n?1:-1,h=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+l>=1?d/u:d*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(t*u-1)*Math.pow(2,i),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=255&s,p+=m,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[r+p]=255&a,p+=m,a/=256,c-=8);e[r+p-m]|=128*h}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){if("undefined"==typeof crypto){var r=new Error("Cannot find module 'crypto'");throw r.code="MODULE_NOT_FOUND",r}e.exports=crypto},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"EPSILON",function(){return s}),r.d(n,"ARRAY_TYPE",function(){return u}),r.d(n,"RANDOM",function(){return c}),r.d(n,"setMatrixArrayType",function(){return f}),r.d(n,"toRadian",function(){return d}),r.d(n,"equals",function(){return p});var i={};r.r(i),r.d(i,"create",function(){return m}),r.d(i,"clone",function(){return h}),r.d(i,"copy",function(){return g}),r.d(i,"fromValues",function(){return y}),r.d(i,"set",function(){return v}),r.d(i,"identity",function(){return _}),r.d(i,"transpose",function(){return b}),r.d(i,"invert",function(){return E}),r.d(i,"adjoint",function(){return w}),r.d(i,"determinant",function(){return x}),r.d(i,"multiply",function(){return S}),r.d(i,"translate",function(){return T}),r.d(i,"scale",function(){return P}),r.d(i,"rotate",function(){return A}),r.d(i,"rotateX",function(){return C}),r.d(i,"rotateY",function(){return M}),r.d(i,"rotateZ",function(){return B}),r.d(i,"fromTranslation",function(){return D}),r.d(i,"fromScaling",function(){return I}),r.d(i,"fromRotation",function(){return k}),r.d(i,"fromXRotation",function(){return F}),r.d(i,"fromYRotation",function(){return R}),r.d(i,"fromZRotation",function(){return L}),r.d(i,"fromRotationTranslation",function(){return O}),r.d(i,"fromQuat2",function(){return N}),r.d(i,"getTranslation",function(){return U}),r.d(i,"getScaling",function(){return G}),r.d(i,"getRotation",function(){return V}),r.d(i,"fromRotationTranslationScale",function(){return W}),r.d(i,"fromRotationTranslationScaleOrigin",function(){return $}),r.d(i,"fromQuat",function(){return j}),r.d(i,"frustum",function(){return z}),r.d(i,"perspective",function(){return H}),r.d(i,"perspectiveFromFieldOfView",function(){return q}),r.d(i,"ortho",function(){return Y}),r.d(i,"lookAt",function(){return X}),r.d(i,"targetTo",function(){return Q}),r.d(i,"str",function(){return K}),r.d(i,"frob",function(){return Z}),r.d(i,"add",function(){return J}),r.d(i,"subtract",function(){return ee}),r.d(i,"multiplyScalar",function(){return te}),r.d(i,"multiplyScalarAndAdd",function(){return re}),r.d(i,"exactEquals",function(){return ne}),r.d(i,"equals",function(){return ie}),r.d(i,"mul",function(){return oe}),r.d(i,"sub",function(){return ae});var o={};r.r(o),r.d(o,"create",function(){return se}),r.d(o,"clone",function(){return ue}),r.d(o,"length",function(){return ce}),r.d(o,"fromValues",function(){return fe}),r.d(o,"copy",function(){return le}),r.d(o,"set",function(){return de}),r.d(o,"add",function(){return pe}),r.d(o,"subtract",function(){return me}),r.d(o,"multiply",function(){return he}),r.d(o,"divide",function(){return ge}),r.d(o,"ceil",function(){return ye}),r.d(o,"floor",function(){return ve}),r.d(o,"min",function(){return _e}),r.d(o,"max",function(){return be}),r.d(o,"round",function(){return Ee}),r.d(o,"scale",function(){return we}),r.d(o,"scaleAndAdd",function(){return xe}),r.d(o,"distance",function(){return Se}),r.d(o,"squaredDistance",function(){return Te}),r.d(o,"squaredLength",function(){return Pe}),r.d(o,"negate",function(){return Ae}),r.d(o,"inverse",function(){return Ce}),r.d(o,"normalize",function(){return Me}),r.d(o,"dot",function(){return Be}),r.d(o,"cross",function(){return De}),r.d(o,"lerp",function(){return Ie}),r.d(o,"hermite",function(){return ke}),r.d(o,"bezier",function(){return Fe}),r.d(o,"random",function(){return Re}),r.d(o,"transformMat4",function(){return Le}),r.d(o,"transformMat3",function(){return Oe}),r.d(o,"transformQuat",function(){return Ne}),r.d(o,"rotateX",function(){return Ue}),r.d(o,"rotateY",function(){return Ge}),r.d(o,"rotateZ",function(){return Ve}),r.d(o,"angle",function(){return We}),r.d(o,"str",function(){return $e}),r.d(o,"exactEquals",function(){return je}),r.d(o,"equals",function(){return ze}),r.d(o,"sub",function(){return qe}),r.d(o,"mul",function(){return Ye}),r.d(o,"div",function(){return Xe}),r.d(o,"dist",function(){return Qe}),r.d(o,"sqrDist",function(){return Ke}),r.d(o,"len",function(){return Ze}),r.d(o,"sqrLen",function(){return Je}),r.d(o,"forEach",function(){return et});var a=r(0),s=1e-6,u="undefined"!=typeof Float32Array?Float32Array:Array,c=Math.random;function f(e){u=e}var l=Math.PI/180;function d(e){return e*l}function p(e,t){return Math.abs(e-t)<=s*Math.max(1,Math.abs(e),Math.abs(t))}function m(){var e=new u(16);return u!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function h(e){var t=new u(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function g(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function y(e,t,r,n,i,o,a,s,c,f,l,d,p,m,h,g){var y=new u(16);return y[0]=e,y[1]=t,y[2]=r,y[3]=n,y[4]=i,y[5]=o,y[6]=a,y[7]=s,y[8]=c,y[9]=f,y[10]=l,y[11]=d,y[12]=p,y[13]=m,y[14]=h,y[15]=g,y}function v(e,t,r,n,i,o,a,s,u,c,f,l,d,p,m,h,g){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=u,e[8]=c,e[9]=f,e[10]=l,e[11]=d,e[12]=p,e[13]=m,e[14]=h,e[15]=g,e}function _(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function b(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function E(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],f=t[8],l=t[9],d=t[10],p=t[11],m=t[12],h=t[13],g=t[14],y=t[15],v=r*s-n*a,_=r*u-i*a,b=r*c-o*a,E=n*u-i*s,w=n*c-o*s,x=i*c-o*u,S=f*h-l*m,T=f*g-d*m,P=f*y-p*m,A=l*g-d*h,C=l*y-p*h,M=d*y-p*g,B=v*M-_*C+b*A+E*P-w*T+x*S;return B?(B=1/B,e[0]=(s*M-u*C+c*A)*B,e[1]=(i*C-n*M-o*A)*B,e[2]=(h*x-g*w+y*E)*B,e[3]=(d*w-l*x-p*E)*B,e[4]=(u*P-a*M-c*T)*B,e[5]=(r*M-i*P+o*T)*B,e[6]=(g*b-m*x-y*_)*B,e[7]=(f*x-d*b+p*_)*B,e[8]=(a*C-s*P+c*S)*B,e[9]=(n*P-r*C-o*S)*B,e[10]=(m*w-h*b+y*v)*B,e[11]=(l*b-f*w-p*v)*B,e[12]=(s*T-a*A-u*S)*B,e[13]=(r*A-n*T+i*S)*B,e[14]=(h*_-m*E-g*v)*B,e[15]=(f*E-l*_+d*v)*B,e):null}function w(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],f=t[8],l=t[9],d=t[10],p=t[11],m=t[12],h=t[13],g=t[14],y=t[15];return e[0]=s*(d*y-p*g)-l*(u*y-c*g)+h*(u*p-c*d),e[1]=-(n*(d*y-p*g)-l*(i*y-o*g)+h*(i*p-o*d)),e[2]=n*(u*y-c*g)-s*(i*y-o*g)+h*(i*c-o*u),e[3]=-(n*(u*p-c*d)-s*(i*p-o*d)+l*(i*c-o*u)),e[4]=-(a*(d*y-p*g)-f*(u*y-c*g)+m*(u*p-c*d)),e[5]=r*(d*y-p*g)-f*(i*y-o*g)+m*(i*p-o*d),e[6]=-(r*(u*y-c*g)-a*(i*y-o*g)+m*(i*c-o*u)),e[7]=r*(u*p-c*d)-a*(i*p-o*d)+f*(i*c-o*u),e[8]=a*(l*y-p*h)-f*(s*y-c*h)+m*(s*p-c*l),e[9]=-(r*(l*y-p*h)-f*(n*y-o*h)+m*(n*p-o*l)),e[10]=r*(s*y-c*h)-a*(n*y-o*h)+m*(n*c-o*s),e[11]=-(r*(s*p-c*l)-a*(n*p-o*l)+f*(n*c-o*s)),e[12]=-(a*(l*g-d*h)-f*(s*g-u*h)+m*(s*d-u*l)),e[13]=r*(l*g-d*h)-f*(n*g-i*h)+m*(n*d-i*l),e[14]=-(r*(s*g-u*h)-a*(n*g-i*h)+m*(n*u-i*s)),e[15]=r*(s*d-u*l)-a*(n*d-i*l)+f*(n*u-i*s),e}function x(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],f=e[9],l=e[10],d=e[11],p=e[12],m=e[13],h=e[14],g=e[15];return(t*a-r*o)*(l*g-d*h)-(t*s-n*o)*(f*g-d*m)+(t*u-i*o)*(f*h-l*m)+(r*s-n*a)*(c*g-d*p)-(r*u-i*a)*(c*h-l*p)+(n*u-i*s)*(c*m-f*p)}function S(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],f=t[7],l=t[8],d=t[9],p=t[10],m=t[11],h=t[12],g=t[13],y=t[14],v=t[15],_=r[0],b=r[1],E=r[2],w=r[3];return e[0]=_*n+b*s+E*l+w*h,e[1]=_*i+b*u+E*d+w*g,e[2]=_*o+b*c+E*p+w*y,e[3]=_*a+b*f+E*m+w*v,_=r[4],b=r[5],E=r[6],w=r[7],e[4]=_*n+b*s+E*l+w*h,e[5]=_*i+b*u+E*d+w*g,e[6]=_*o+b*c+E*p+w*y,e[7]=_*a+b*f+E*m+w*v,_=r[8],b=r[9],E=r[10],w=r[11],e[8]=_*n+b*s+E*l+w*h,e[9]=_*i+b*u+E*d+w*g,e[10]=_*o+b*c+E*p+w*y,e[11]=_*a+b*f+E*m+w*v,_=r[12],b=r[13],E=r[14],w=r[15],e[12]=_*n+b*s+E*l+w*h,e[13]=_*i+b*u+E*d+w*g,e[14]=_*o+b*c+E*p+w*y,e[15]=_*a+b*f+E*m+w*v,e}function T(e,t,r){var n=r[0],i=r[1],o=r[2],a=void 0,s=void 0,u=void 0,c=void 0,f=void 0,l=void 0,d=void 0,p=void 0,m=void 0,h=void 0,g=void 0,y=void 0;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(a=t[0],s=t[1],u=t[2],c=t[3],f=t[4],l=t[5],d=t[6],p=t[7],m=t[8],h=t[9],g=t[10],y=t[11],e[0]=a,e[1]=s,e[2]=u,e[3]=c,e[4]=f,e[5]=l,e[6]=d,e[7]=p,e[8]=m,e[9]=h,e[10]=g,e[11]=y,e[12]=a*n+f*i+m*o+t[12],e[13]=s*n+l*i+h*o+t[13],e[14]=u*n+d*i+g*o+t[14],e[15]=c*n+p*i+y*o+t[15]),e}function P(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function A(e,t,r,n){var i,o,a,u,c,f,l,d,p,m,h,g,y,v,_,b,E,w,x,S,T,P,A,C,M=n[0],B=n[1],D=n[2],I=Math.sqrt(M*M+B*B+D*D);return I<s?null:(M*=I=1/I,B*=I,D*=I,i=Math.sin(r),a=1-(o=Math.cos(r)),u=t[0],c=t[1],f=t[2],l=t[3],d=t[4],p=t[5],m=t[6],h=t[7],g=t[8],y=t[9],v=t[10],_=t[11],b=M*M*a+o,E=B*M*a+D*i,w=D*M*a-B*i,x=M*B*a-D*i,S=B*B*a+o,T=D*B*a+M*i,P=M*D*a+B*i,A=B*D*a-M*i,C=D*D*a+o,e[0]=u*b+d*E+g*w,e[1]=c*b+p*E+y*w,e[2]=f*b+m*E+v*w,e[3]=l*b+h*E+_*w,e[4]=u*x+d*S+g*T,e[5]=c*x+p*S+y*T,e[6]=f*x+m*S+v*T,e[7]=l*x+h*S+_*T,e[8]=u*P+d*A+g*C,e[9]=c*P+p*A+y*C,e[10]=f*P+m*A+v*C,e[11]=l*P+h*A+_*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function C(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],f=t[9],l=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*n,e[5]=a*i+f*n,e[6]=s*i+l*n,e[7]=u*i+d*n,e[8]=c*i-o*n,e[9]=f*i-a*n,e[10]=l*i-s*n,e[11]=d*i-u*n,e}function M(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],c=t[8],f=t[9],l=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*n,e[1]=a*i-f*n,e[2]=s*i-l*n,e[3]=u*i-d*n,e[8]=o*n+c*i,e[9]=a*n+f*i,e[10]=s*n+l*i,e[11]=u*n+d*i,e}function B(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],u=t[3],c=t[4],f=t[5],l=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*n,e[1]=a*i+f*n,e[2]=s*i+l*n,e[3]=u*i+d*n,e[4]=c*i-o*n,e[5]=f*i-a*n,e[6]=l*i-s*n,e[7]=d*i-u*n,e}function D(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function I(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function k(e,t,r){var n,i,o,a=r[0],u=r[1],c=r[2],f=Math.sqrt(a*a+u*u+c*c);return f<s?null:(a*=f=1/f,u*=f,c*=f,n=Math.sin(t),o=1-(i=Math.cos(t)),e[0]=a*a*o+i,e[1]=u*a*o+c*n,e[2]=c*a*o-u*n,e[3]=0,e[4]=a*u*o-c*n,e[5]=u*u*o+i,e[6]=c*u*o+a*n,e[7]=0,e[8]=a*c*o+u*n,e[9]=u*c*o-a*n,e[10]=c*c*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function F(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function R(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function L(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function O(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=n+n,u=i+i,c=o+o,f=n*s,l=n*u,d=n*c,p=i*u,m=i*c,h=o*c,g=a*s,y=a*u,v=a*c;return e[0]=1-(p+h),e[1]=l+v,e[2]=d-y,e[3]=0,e[4]=l-v,e[5]=1-(f+h),e[6]=m+g,e[7]=0,e[8]=d+y,e[9]=m-g,e[10]=1-(f+p),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function N(e,t){var r=new u(3),n=-t[0],i=-t[1],o=-t[2],a=t[3],s=t[4],c=t[5],f=t[6],l=t[7],d=n*n+i*i+o*o+a*a;return d>0?(r[0]=2*(s*a+l*n+c*o-f*i)/d,r[1]=2*(c*a+l*i+f*n-s*o)/d,r[2]=2*(f*a+l*o+s*i-c*n)/d):(r[0]=2*(s*a+l*n+c*o-f*i),r[1]=2*(c*a+l*i+f*n-s*o),r[2]=2*(f*a+l*o+s*i-c*n)),O(e,t,r),e}function U(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function G(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],a=t[5],s=t[6],u=t[8],c=t[9],f=t[10];return e[0]=Math.sqrt(r*r+n*n+i*i),e[1]=Math.sqrt(o*o+a*a+s*s),e[2]=Math.sqrt(u*u+c*c+f*f),e}function V(e,t){var r=t[0]+t[5]+t[10],n=0;return r>0?(n=2*Math.sqrt(r+1),e[3]=.25*n,e[0]=(t[6]-t[9])/n,e[1]=(t[8]-t[2])/n,e[2]=(t[1]-t[4])/n):t[0]>t[5]&&t[0]>t[10]?(n=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/n,e[0]=.25*n,e[1]=(t[1]+t[4])/n,e[2]=(t[8]+t[2])/n):t[5]>t[10]?(n=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/n,e[0]=(t[1]+t[4])/n,e[1]=.25*n,e[2]=(t[6]+t[9])/n):(n=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/n,e[0]=(t[8]+t[2])/n,e[1]=(t[6]+t[9])/n,e[2]=.25*n),e}function W(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3],u=i+i,c=o+o,f=a+a,l=i*u,d=i*c,p=i*f,m=o*c,h=o*f,g=a*f,y=s*u,v=s*c,_=s*f,b=n[0],E=n[1],w=n[2];return e[0]=(1-(m+g))*b,e[1]=(d+_)*b,e[2]=(p-v)*b,e[3]=0,e[4]=(d-_)*E,e[5]=(1-(l+g))*E,e[6]=(h+y)*E,e[7]=0,e[8]=(p+v)*w,e[9]=(h-y)*w,e[10]=(1-(l+m))*w,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function $(e,t,r,n,i){var o=t[0],a=t[1],s=t[2],u=t[3],c=o+o,f=a+a,l=s+s,d=o*c,p=o*f,m=o*l,h=a*f,g=a*l,y=s*l,v=u*c,_=u*f,b=u*l,E=n[0],w=n[1],x=n[2],S=i[0],T=i[1],P=i[2],A=(1-(h+y))*E,C=(p+b)*E,M=(m-_)*E,B=(p-b)*w,D=(1-(d+y))*w,I=(g+v)*w,k=(m+_)*x,F=(g-v)*x,R=(1-(d+h))*x;return e[0]=A,e[1]=C,e[2]=M,e[3]=0,e[4]=B,e[5]=D,e[6]=I,e[7]=0,e[8]=k,e[9]=F,e[10]=R,e[11]=0,e[12]=r[0]+S-(A*S+B*T+k*P),e[13]=r[1]+T-(C*S+D*T+F*P),e[14]=r[2]+P-(M*S+I*T+R*P),e[15]=1,e}function j(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,u=i+i,c=r*a,f=n*a,l=n*s,d=i*a,p=i*s,m=i*u,h=o*a,g=o*s,y=o*u;return e[0]=1-l-m,e[1]=f+y,e[2]=d-g,e[3]=0,e[4]=f-y,e[5]=1-c-m,e[6]=p+h,e[7]=0,e[8]=d+g,e[9]=p-h,e[10]=1-c-l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function z(e,t,r,n,i,o,a){var s=1/(r-t),u=1/(i-n),c=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*u,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e}function H(e,t,r,n,i){var o=1/Math.tan(t/2),a=void 0;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e}function q(e,t,r,n){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-s)*u*.5,e[9]=(i-o)*c*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function Y(e,t,r,n,i,o,a){var s=1/(t-r),u=1/(n-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*u,e[14]=(a+o)*c,e[15]=1,e}function X(e,t,r,n){var i=void 0,o=void 0,a=void 0,u=void 0,c=void 0,f=void 0,l=void 0,d=void 0,p=void 0,m=void 0,h=t[0],g=t[1],y=t[2],v=n[0],b=n[1],E=n[2],w=r[0],x=r[1],S=r[2];return Math.abs(h-w)<s&&Math.abs(g-x)<s&&Math.abs(y-S)<s?_(e):(l=h-w,d=g-x,p=y-S,i=b*(p*=m=1/Math.sqrt(l*l+d*d+p*p))-E*(d*=m),o=E*(l*=m)-v*p,a=v*d-b*l,(m=Math.sqrt(i*i+o*o+a*a))?(i*=m=1/m,o*=m,a*=m):(i=0,o=0,a=0),u=d*a-p*o,c=p*i-l*a,f=l*o-d*i,(m=Math.sqrt(u*u+c*c+f*f))?(u*=m=1/m,c*=m,f*=m):(u=0,c=0,f=0),e[0]=i,e[1]=u,e[2]=l,e[3]=0,e[4]=o,e[5]=c,e[6]=d,e[7]=0,e[8]=a,e[9]=f,e[10]=p,e[11]=0,e[12]=-(i*h+o*g+a*y),e[13]=-(u*h+c*g+f*y),e[14]=-(l*h+d*g+p*y),e[15]=1,e)}function Q(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=n[0],u=n[1],c=n[2],f=i-r[0],l=o-r[1],d=a-r[2],p=f*f+l*l+d*d;p>0&&(f*=p=1/Math.sqrt(p),l*=p,d*=p);var m=u*d-c*l,h=c*f-s*d,g=s*l-u*f;return(p=m*m+h*h+g*g)>0&&(m*=p=1/Math.sqrt(p),h*=p,g*=p),e[0]=m,e[1]=h,e[2]=g,e[3]=0,e[4]=l*g-d*h,e[5]=d*m-f*g,e[6]=f*h-l*m,e[7]=0,e[8]=f,e[9]=l,e[10]=d,e[11]=0,e[12]=i,e[13]=o,e[14]=a,e[15]=1,e}function K(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Z(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))}function J(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function ee(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function te(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function re(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e}function ne(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function ie(e,t){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],u=e[5],c=e[6],f=e[7],l=e[8],d=e[9],p=e[10],m=e[11],h=e[12],g=e[13],y=e[14],v=e[15],_=t[0],b=t[1],E=t[2],w=t[3],x=t[4],S=t[5],T=t[6],P=t[7],A=t[8],C=t[9],M=t[10],B=t[11],D=t[12],I=t[13],k=t[14],F=t[15];return Math.abs(r-_)<=s*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(n-b)<=s*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(i-E)<=s*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(o-w)<=s*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-x)<=s*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(u-S)<=s*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-T)<=s*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(f-P)<=s*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(l-A)<=s*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(d-C)<=s*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-M)<=s*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(m-B)<=s*Math.max(1,Math.abs(m),Math.abs(B))&&Math.abs(h-D)<=s*Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(g-I)<=s*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(y-k)<=s*Math.max(1,Math.abs(y),Math.abs(k))&&Math.abs(v-F)<=s*Math.max(1,Math.abs(v),Math.abs(F))}var oe=S,ae=ee;function se(){var e=new u(3);return u!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ue(e){var t=new u(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function ce(e){var t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}function fe(e,t,r){var n=new u(3);return n[0]=e,n[1]=t,n[2]=r,n}function le(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function de(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function pe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function me(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function he(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function ge(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function ye(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function ve(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function _e(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function be(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function Ee(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function we(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function xe(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function Se(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(r*r+n*n+i*i)}function Te(e,t){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2];return r*r+n*n+i*i}function Pe(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function Ae(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Ce(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Me(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e}function Be(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function De(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],u=r[2];return e[0]=i*u-o*s,e[1]=o*a-n*u,e[2]=n*s-i*a,e}function Ie(e,t,r,n){var i=t[0],o=t[1],a=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e}function ke(e,t,r,n,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),f=a*(3-2*o);return e[0]=t[0]*s+r[0]*u+n[0]*c+i[0]*f,e[1]=t[1]*s+r[1]*u+n[1]*c+i[1]*f,e[2]=t[2]*s+r[2]*u+n[2]*c+i[2]*f,e}function Fe(e,t,r,n,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,f=3*o*s,l=3*u*a,d=u*o;return e[0]=t[0]*c+r[0]*f+n[0]*l+i[0]*d,e[1]=t[1]*c+r[1]*f+n[1]*l+i[1]*d,e[2]=t[2]*c+r[2]*f+n[2]*l+i[2]*d,e}function Re(e,t){t=t||1;var r=2*c()*Math.PI,n=2*c()-1,i=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*i,e[1]=Math.sin(r)*i,e[2]=n*t,e}function Le(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,e}function Oe(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}function Ne(e,t,r){var n=r[0],i=r[1],o=r[2],a=r[3],s=t[0],u=t[1],c=t[2],f=i*c-o*u,l=o*s-n*c,d=n*u-i*s,p=i*d-o*l,m=o*f-n*d,h=n*l-i*f,g=2*a;return f*=g,l*=g,d*=g,p*=2,m*=2,h*=2,e[0]=s+f+p,e[1]=u+l+m,e[2]=c+d+h,e}function Ue(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function Ge(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function Ve(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function We(e,t){var r=fe(e[0],e[1],e[2]),n=fe(t[0],t[1],t[2]);Me(r,r),Me(n,n);var i=Be(r,n);return i>1?0:i<-1?Math.PI:Math.acos(i)}function $e(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function je(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function ze(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],a=t[1],u=t[2];return Math.abs(r-o)<=s*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-u)<=s*Math.max(1,Math.abs(i),Math.abs(u))}var He,qe=me,Ye=he,Xe=ge,Qe=Se,Ke=Te,Ze=ce,Je=Pe,et=(He=se(),function(e,t,r,n,i,o){var a=void 0,s=void 0;for(t||(t=3),r||(r=0),s=n?Math.min(n*t+r,e.length):e.length,a=r;a<s;a+=t)He[0]=e[a],He[1]=e[a+1],He[2]=e[a+2],i(He,He,o),e[a]=He[0],e[a+1]=He[1],e[a+2]=He[2];return e});const tt={faces:[[0,3,8,5,1],[2,7,15,13,6],[4,10,18,20,11],[9,14,23,27,17],[12,21,31,29,19],[16,26,36,35,25],[22,32,42,43,33],[24,30,40,44,34],[28,39,49,48,38],[37,47,55,54,46],[41,45,53,57,50],[51,52,56,59,58],[0,1,4,11,7,2],[0,2,6,14,9,3],[1,5,12,19,10,4],[3,9,17,26,16,8],[5,8,16,25,21,12],[6,13,22,33,23,14],[7,11,20,30,24,15],[10,19,29,39,28,18],[13,15,24,34,32,22],[17,27,37,46,36,26],[18,28,38,40,30,20],[21,25,35,45,41,31],[23,33,43,47,37,27],[29,31,41,50,49,39],[32,34,44,52,51,42],[35,36,46,54,53,45],[38,48,56,52,44,40],[42,51,58,55,47,43],[48,49,50,57,59,56],[53,54,55,58,59,57]],edges:[[13,15],[19,29],[20,30],[41,50],[35,45],[32,22],[56,52],[12,5],[48,56],[58,51],[40,30],[57,53],[16,26],[33,43],[33,22],[21,31],[8,5],[0,3],[2,6],[2,7],[13,6],[10,18],[46,54],[13,22],[49,50],[58,59],[45,53],[12,21],[57,59],[1,5],[28,39],[36,46],[41,31],[35,36],[26,36],[32,42],[17,26],[0,2],[57,50],[17,9],[54,55],[10,19],[16,8],[1,4],[25,21],[40,44],[18,20],[10,4],[42,51],[24,30],[34,44],[24,34],[11,7],[0,1],[25,35],[14,23],[41,45],[8,3],[55,47],[56,59],[49,39],[24,15],[48,38],[37,46],[40,38],[19,12],[48,49],[15,7],[58,55],[27,23],[29,39],[29,31],[11,4],[9,3],[51,52],[18,28],[11,20],[28,38],[9,14],[16,25],[33,23],[17,27],[27,37],[52,44],[37,47],[43,47],[42,43],[32,34],[14,6],[53,54]],verts:[[0,0,1.021],[.4035482,0,.9378643],[-.2274644,.3333333,.9378643],[-.1471226,-.375774,.9378643],[.579632,.3333333,.7715933],[.5058321,-.375774,.8033483],[-.6020514,.2908927,.7715933],[-.05138057,.6666667,.7715933],[.1654988,-.6080151,.8033483],[-.5217096,-.4182147,.7715933],[.8579998,.2908927,.4708062],[.3521676,.6666667,.6884578],[.7841999,-.4182147,.5025612],[-.657475,.5979962,.5025612],[-.749174,-.08488134,.6884578],[-.3171418,.8302373,.5025612],[.1035333,-.8826969,.5025612],[-.5836751,-.6928964,.4708062],[.8025761,.5979962,.2017741],[.9602837,-.08488134,.3362902],[.4899547,.8302373,.3362902],[.7222343,-.6928964,.2017741],[-.8600213,.5293258,.1503935],[-.9517203,-.1535518,.3362902],[-.1793548,.993808,.1503935],[.381901,-.9251375,.2017741],[-.2710537,-.9251375,.3362902],[-.8494363,-.5293258,.2017741],[.8494363,.5293258,-.2017741],[1.007144,-.1535518,-.06725804],[.2241935,.993808,.06725804],[.8600213,-.5293258,-.1503935],[-.7222343,.6928964,-.2017741],[-1.007144,.1535518,.06725804],[-.381901,.9251375,-.2017741],[.1793548,-.993808,-.1503935],[-.2241935,-.993808,-.06725804],[-.8025761,-.5979962,-.2017741],[.5836751,.6928964,-.4708062],[.9517203,.1535518,-.3362902],[.2710537,.9251375,-.3362902],[.657475,-.5979962,-.5025612],[-.7841999,.4182147,-.5025612],[-.9602837,.08488134,-.3362902],[-.1035333,.8826969,-.5025612],[.3171418,-.8302373,-.5025612],[-.4899547,-.8302373,-.3362902],[-.8579998,-.2908927,-.4708062],[.5217096,.4182147,-.7715933],[.749174,.08488134,-.6884578],[.6020514,-.2908927,-.7715933],[-.5058321,.375774,-.8033483],[-.1654988,.6080151,-.8033483],[.05138057,-.6666667,-.7715933],[-.3521676,-.6666667,-.6884578],[-.579632,-.3333333,-.7715933],[.1471226,.375774,-.9378643],[.2274644,-.3333333,-.9378643],[-.4035482,0,-.9378643],[0,0,-1.021]]},rt="env/pillars_ibl.ktx.bmp",nt="env/pillars_skybox.ktx.bmp",it="materials/step1.filamat.bmp",ot="materials/step1_cylinder_back.filamat.bmp",at="materials/step1_cylinder_front.filamat.bmp",st="materials/step2.filamat.bmp",ut="materials/step3.filamat.bmp",ct="materials/step4.filamat.bmp",ft="materials/step5_poly.filamat.bmp",lt="materials/step5.filamat.bmp",dt=[nt,rt,it,ot,at,st,ut,ct,ft,lt];class pt{constructor(e,t){this.currentStep=0,n.setMatrixArrayType(Array),window.vec3=o,this.production=e,this.scene=t,this.canvas2d=document.getElementById("canvas2d"),this.canvas3d=document.getElementById("canvas3d"),this.context2d=this.canvas2d.getContext("2d"),this.engine=a.Engine.create(this.canvas3d),this.filamentScene=this.engine.createScene(),this.swapChain=this.engine.createSwapChain(),this.renderer=this.engine.createRenderer(),this.camera=this.engine.createCamera(),this.view=this.engine.createView(),this.view.setCamera(this.camera),this.view.setScene(this.filamentScene);const r=this.engine.createMaterial(it),i=this.engine.createMaterial(ot),s=this.engine.createMaterial(at),u=this.engine.createMaterial(st),c=this.engine.createMaterial(ut),f=this.engine.createMaterial(ct),l=this.engine.createMaterial(ft),d=this.engine.createMaterial(lt),p=[this.step1SphereMaterial=r.createInstance(),this.step1CylinderBackMaterial=i.createInstance(),this.step1CylinderFrontMaterial=s.createInstance(),this.step2SphereMaterial=u.createInstance(),this.step3SphereMaterial=c.createInstance(),this.step4SphereMaterial=f.createInstance(),this.step5SphereMaterial=d.createInstance()];this.step5PolyhedronMaterial=l.createInstance();const m=a.RgbType.sRGB;for(const e of p)e.setColor3Parameter("baseColor",m,[0,.4,.8]),e.setFloatParameter("roughness",.5),e.setFloatParameter("clearCoat",0),e.setFloatParameter("clearCoatRoughness",.8);this.createCylinders(),this.createCentralSphere(),this.createPolyhedron(),this.filamentScene.addEntity(this.sphereEntity),this.skybox=this.engine.createSkyFromKtx(nt),this.indirectLight=this.engine.createIblFromKtx(rt),this.indirectLight.setIntensity(5e4);const h=this.indirectLight.getDirectionEstimate(),g=this.indirectLight.getColorEstimate(h);this.filamentScene.setSkybox(this.skybox),this.filamentScene.setIndirectLight(this.indirectLight);const y=a.EntityManager.get().create();a.LightManager.Builder(a.LightManager$Type.SUN).color(g.slice(0,3)).castShadows(!1).intensity(g[3]).direction([.5,-1,0]).build(this.engine,y),this.filamentScene.addEntity(y),this.currentStep=-1,this.update(0)}render(){const e=this.scene.viewpoint;this.camera.lookAt(e.eye,e.center,e.up),this.renderer.render(this.swapChain,this.view);const t=this.canvas2d.width,r=this.canvas2d.height,n=t/36;this.context2d.setTransform(1,0,0,1,0,0),this.context2d.clearRect(0,0,t,r),this.context2d.font=`${n}px 'circular-bold', sans-serif`,this.context2d.textAlign="center";for(const e of this.scene.textSpans){const n=t/2+e.x*t/2,i=r/2+e.y*t/2;this.context2d.fillStyle=`rgba(0, 0, 0, ${e.opacity})`,this.context2d.fillText(e.text,n,i)}this.context2d.fillStyle="rgba(0, 0, 0, 1)",this.production||(this.context2d.translate(t/2,r/2),this.context2d.scale(t/2,t/2),this.context2d.beginPath(),this.context2d.moveTo(-1,0),this.context2d.lineTo(1,0),this.context2d.lineWidth=.01,this.context2d.setLineDash([.01,.02]),this.context2d.stroke())}resize(){const e=a.Camera$Fov,t=window.devicePixelRatio,r=this.canvas3d.width=this.canvas3d.clientWidth*t,n=this.canvas3d.height=this.canvas3d.clientHeight*t;this.view.setViewport([0,0,r,n]),this.canvas2d.width=r,this.canvas2d.height=n,this.context2d.setTransform(1,0,0,1,0,0),this.context2d.translate(r/2,n/2),this.context2d.scale(r/2,r/2);const i=r/n;this.camera.setProjectionFov(45,i,1,2e4,e.HORIZONTAL)}update(e){const t=this.engine.getRenderableManager(),r=this.engine.getTransformManager();if(this.currentStep!==e){const r=t.getInstance(this.sphereEntity);if(this.filamentScene.remove(this.frontCylinderEntity),this.filamentScene.remove(this.backCylinderEntity),4===this.currentStep)for(const e of this.polyhedronEntities)this.filamentScene.remove(e);let n;switch(e){case 0:this.filamentScene.addEntity(this.backCylinderEntity),this.filamentScene.addEntity(this.frontCylinderEntity);default:n=this.step1SphereMaterial;break;case 1:n=this.step2SphereMaterial;break;case 2:n=this.step3SphereMaterial;break;case 3:n=this.step4SphereMaterial;break;case 4:n=this.step5SphereMaterial;for(const e of this.polyhedronEntities)this.filamentScene.addEntity(e)}t.setMaterialInstanceAt(r,0,n),this.currentStep=e}const n=a.RgbaType.sRGB;switch(e){default:case 0:this.step1SphereMaterial.setFloatParameter("gridlines",this.scene.sphereGridlines),this.step1CylinderFrontMaterial.setFloatParameter("gridlines",this.scene.cylinderGridlines),this.step1CylinderFrontMaterial.setColor4Parameter("baseColor",n,this.scene.baseColor),this.step1CylinderBackMaterial.setColor4Parameter("baseColor",n,this.scene.baseColor);const t=r.getInstance(this.frontCylinderEntity);r.setTransform(t,this.scene.cylinderTransform),t.delete();const i=r.getInstance(this.backCylinderEntity);r.setTransform(i,this.scene.cylinderTransform),i.delete();break;case 1:this.step2SphereMaterial.setFloatParameter("greatCircle",this.scene.greatCircle),this.step2SphereMaterial.setFloatParameter("luneAlpha",this.scene.luneAlpha),this.step2SphereMaterial.setFloatParameter("luneExpansion",this.scene.luneExpansion),this.step2SphereMaterial.setFloatParameter("antipodeAlpha",this.scene.antipodeAlpha);break;case 2:this.step3SphereMaterial.setFloatParameter("rotation",this.scene.rotation),this.step3SphereMaterial.setFloatParameter("fadeInTriangle",this.scene.fadeInTriangle),this.step3SphereMaterial.setFloatParameter("triangleExpansion",this.scene.triangleExpansion),this.step3SphereMaterial.setFloatParameter("fadeInLuneA",this.scene.fadeInLuneA),this.step3SphereMaterial.setFloatParameter("fadeInLuneB",this.scene.fadeInLuneB),this.step3SphereMaterial.setFloatParameter("fadeInLuneC",this.scene.fadeInLuneC);break;case 3:this.step4SphereMaterial.setFloatParameter("fadeInPolygon",this.scene.fadeInPolygon),this.step4SphereMaterial.setFloatParameter("fadeInTriangle",this.scene.fadeInTriangle);break;case 4:this.step5SphereMaterial.setFloatParameter("opacity",this.scene.opacity),this.step5PolyhedronMaterial.setFloatParameter("inflation",this.scene.inflation)}}createCentralSphere(){const e=a.VertexBuffer$AttributeType,t=a.IndexBuffer$IndexType,r=a.RenderableManager$PrimitiveType,n=a.VertexAttribute,i=new a.IcoSphere(5),o=a.VertexBuffer.Builder().vertexCount(i.vertices.length/3).bufferCount(2).attribute(n.POSITION,0,e.FLOAT3,0,0).attribute(n.TANGENTS,1,e.SHORT4,0,0).normalized(n.TANGENTS).build(this.engine),s=a.IndexBuffer.Builder().indexCount(i.triangles.length).bufferType(t.USHORT).build(this.engine);o.setBufferAt(this.engine,0,i.vertices),o.setBufferAt(this.engine,1,i.tangents),s.setBuffer(this.engine,i.triangles),this.sphereEntity=a.EntityManager.get().create(),a.RenderableManager.Builder(1).boundingBox({center:[-1,-1,-1],halfExtent:[1,1,1]}).material(0,this.step1SphereMaterial).geometry(0,r.TRIANGLES,o,s).build(this.engine,this.sphereEntity)}createCylinders(){const e=a.VertexBuffer$AttributeType,t=a.IndexBuffer$IndexType,r=a.RenderableManager$PrimitiveType,n=a.VertexAttribute,o=2*Math.PI/50,s={normals:new Float32Array(300),tangents:void 0,triangles:new Uint16Array(300),vertices:new Float32Array(300)};let u=0,c=-1,f=-1,l=-1;for(let e=0;e<50;e+=1,u+=o)s.triangles[l+=1]=(c/3+3)%100,s.triangles[l+=1]=(c/3+2)%100,s.triangles[l+=1]=(c/3+1)%100,s.triangles[l+=1]=(c/3+3)%100,s.triangles[l+=1]=(c/3+4)%100,s.triangles[l+=1]=(c/3+2)%100,s.vertices[c+=1]=Math.cos(u),s.vertices[c+=1]=Math.sin(u),s.vertices[c+=1]=0,s.vertices[c+=1]=Math.cos(u),s.vertices[c+=1]=Math.sin(u),s.vertices[c+=1]=1,s.normals[f+=1]=Math.cos(u),s.normals[f+=1]=Math.sin(u),s.normals[f+=1]=0,s.normals[f+=1]=Math.cos(u),s.normals[f+=1]=Math.sin(u),s.normals[f+=1]=0;const d=a._malloc(s.normals.length*s.normals.BYTES_PER_ELEMENT);a.HEAPU8.set(new Uint8Array(s.normals.buffer),d);const p=new a.SurfaceOrientation$Builder;p.vertexCount(100),p.normals(d,0);const m=p.build();a._free(d);const h=a._malloc(800);m.getQuats(h,100,a.VertexBuffer$AttributeType.SHORT4);const g=a.HEAPU8.subarray(h,h+800).slice().buffer;a._free(h),s.tangents=new Int16Array(g);const y=this.cylinderVertexBuffer=a.VertexBuffer.Builder().vertexCount(100).bufferCount(2).attribute(n.POSITION,0,e.FLOAT3,0,0).attribute(n.TANGENTS,1,e.SHORT4,0,0).normalized(n.TANGENTS).build(this.engine),v=this.cylinderIndexBuffer=a.IndexBuffer.Builder().indexCount(s.triangles.length).bufferType(t.USHORT).build(this.engine);y.setBufferAt(this.engine,0,s.vertices),y.setBufferAt(this.engine,1,s.tangents),v.setBuffer(this.engine,s.triangles);const _=i.fromRotation(i.create(),Math.PI/2,[1,0,0]),b=i.fromTranslation(i.create(),[0,0,-.5]),E=i.fromScaling(i.create(),[1,1,2]);i.multiply(_,_,E),i.multiply(_,_,b),this.frontCylinderEntity=a.EntityManager.get().create(),a.RenderableManager.Builder(1).boundingBox({center:[-1,-1,-1],halfExtent:[1,1,1]}).material(0,this.step1CylinderFrontMaterial).geometry(0,r.TRIANGLES,y,v).culling(!1).build(this.engine,this.frontCylinderEntity),this.backCylinderEntity=a.EntityManager.get().create(),a.RenderableManager.Builder(1).boundingBox({center:[-1,-1,-1],halfExtent:[1,1,1]}).material(0,this.step1CylinderBackMaterial).geometry(0,r.TRIANGLES,y,v).culling(!1).build(this.engine,this.backCylinderEntity);const w=this.engine.getTransformManager();w.create(this.frontCylinderEntity);let x=w.getInstance(this.frontCylinderEntity);w.setTransform(x,_),x.delete(),w.create(this.backCylinderEntity),x=w.getInstance(this.backCylinderEntity),w.setTransform(x,_),x.delete()}createPolyhedron(){const e=a.RenderableManager$PrimitiveType,t=(tt.faces,tt.edges),r=tt.verts,n=this.cylinderVertexBuffer,s=this.cylinderIndexBuffer;this.polyhedronEntities=[],this.polyhedronEntities.length=t.length;const u=o.fromValues(0,0,1),c=o.create(),f=o.create(),l=o.create(),d=o.create();for(let p=0;p<t.length;p+=1){const m=this.polyhedronEntities[p]=a.EntityManager.get().create();a.RenderableManager.Builder(1).boundingBox({center:[-1,-1,-1],halfExtent:[1,1,1]}).material(0,this.step5PolyhedronMaterial).geometry(0,e.TRIANGLES,n,s).culling(!1).build(this.engine,m),o.scale(l,r[t[p][0]],.9),o.scale(d,r[t[p][1]],.9),o.sub(f,d,l),o.normalize(f,f),o.cross(c,u,f),o.normalize(c,c);const h=Math.acos(o.dot(u,f)),g=o.distance(l,d),y=i.fromTranslation(i.create(),l),v=i.fromRotation(i.create(),h,c),_=i.fromScaling(i.create(),[.02,.02,g]);i.multiply(y,y,v),i.multiply(y,y,_);const b=this.engine.getTransformManager();b.create(m);const E=b.getInstance(m);b.setTransform(E,y),E.delete()}}}class mt{constructor(){this.center=o.fromValues(0,0,0),this.eye=o.fromValues(0,1,3),this.up=o.fromValues(0,1,0)}}class ht{constructor(){this.antipodeAlpha=0,this.baseColor=[0,0,0,0],this.cylinderGridlines=0,this.cylinderTransform=i.create(),this.fadeInLuneA=0,this.fadeInLuneB=0,this.fadeInLuneC=0,this.fadeInPolygon=0,this.fadeInTriangle=0,this.greatCircle=0,this.inflation=0,this.luneAlpha=0,this.luneExpansion=0,this.opacity=0,this.rotation=0,this.sphereGridlines=0,this.textSpans=[],this.triangleExpansion=0,this.viewpoint=new mt}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */class gt{constructor(e){if(this.config=e,this.activePanelIndex=-1,this.progressValue=-1,this.frameCount=0,this.container=document.querySelector(e.containerSelector),!this.container)throw Error("Scrollytell container not found.");const t=window.getComputedStyle(this.container);if("scroll"!==t.getPropertyValue("overflow-y"))throw Error("Scrollytell container must have overflow-y:scroll.");if("relative"!==t.getPropertyValue("position"))throw Error("Scrollytell container must have position:relative.");if(this.panels=document.querySelectorAll(e.panelSelector),!this.panels)throw Error("Scrollytell panels not found.");if(this.chart=document.querySelector(e.chartSelector),e.fullsizeChart&&!this.chart)throw Error("Scrollytell chart not found.");if(e.fullsizeChart){const t=this.container.getBoundingClientRect().height;this.chart.style.height=`${t}px`,this.chart.style.top="0";const r=document.querySelectorAll(e.segmentSelector);for(const e of r)e.style.height=`${t}px`}e.developerHud&&this.showDeveloperHud(!0),this.tick=this.render.bind(this),window.requestAnimationFrame(this.tick)}getActivePanelIndex(){return this.activePanelIndex}getProgressValue(){return this.progressValue}refresh(){this.scrollTop=void 0,this.activePanelIndex=-2}showDeveloperHud(e){if(this.developerHudCanvas){const t=e?"visible":"hidden";return void(this.developerHudCanvas.style.visibility=t)}if(!e)return;const t=document.createElement("canvas"),r=t.style;r.position="fixed",r.width="100%",r.height="100%",r.left="0",r.top="0",r.zIndex="100",r.pointerEvents="none",this.container.appendChild(t);const n=window.devicePixelRatio;t.width=t.clientWidth*n,t.height=t.clientHeight*n,this.developerHudContext=t.getContext("2d"),this.developerHudContext.scale(n,n),this.developerHudCanvas=t;this.developerHudContext.font="bold 14px 'Lexend Deca', sans-serif",this.scrollTop=void 0}render(){const e=this.container.scrollTop;if(e===this.scrollTop)return void window.requestAnimationFrame(this.tick);this.scrollTop=e;const t=this.container.getBoundingClientRect(),r=(t.top+t.bottom)/2,n=this.activePanelIndex,i=this.progressValue;this.activePanelIndex=-1,this.progressValue=-1;for(const[e,t]of this.panels.entries()){const n=t.getBoundingClientRect(),i=!(n.top>r||n.bottom<r),o=(r-n.top)/n.height;if(i){this.activePanelIndex=e,this.progressValue=o;break}}const o=n!==this.activePanelIndex,a=i!==this.progressValue;o&&(this.config.exitHandler&&this.config.exitHandler(this,n),this.config.enterHandler&&this.config.enterHandler(this,this.activePanelIndex)),(a||o)&&(this.frameCount+=1,this.config.progressHandler&&this.config.progressHandler(this,this.progressValue)),this.developerHudContext&&this.renderDeveloperHud(t),window.requestAnimationFrame(this.tick)}renderDeveloperHud(e){const t=e,r=this.developerHudContext,n=(t.top+t.bottom)/2,i=this.developerHudCanvas.width,o=this.developerHudCanvas.height;r.clearRect(0,0,i,o),r.beginPath(),r.fillStyle="rgba(128, 128, 128, 0.125)";for(const[e,t]of this.panels.entries()){const e=t.getBoundingClientRect();r.rect(e.left,e.top,e.width,e.height)}r.fill(),r.beginPath(),r.fillStyle="rgba(255, 255, 255, 0.5)",r.rect(0,0,200,100),r.fill(),r.fillStyle="rgba(50, 50, 0, 1)";const a=`progress value = ${this.progressValue.toFixed(2)}`;r.fillText(a,10,20);const s=`active panel = ${this.activePanelIndex}`;r.fillText(s,10,40);const u=`frame count = ${this.frameCount}`;r.fillText(u,10,60),r.strokeStyle="rgba(255, 255, 255, 1.0)",r.beginPath(),r.moveTo(t.left,n-1),r.lineTo(t.right,n-1),r.moveTo(t.left,n+1),r.lineTo(t.right,n+1),r.stroke(),r.strokeStyle="rgba(0, 0, 0, 1.0)",r.setLineDash([10,1]),r.beginPath(),r.moveTo(t.left,n),r.lineTo(t.right,n),r.stroke()}}const yt=(e,t,r)=>Math.max(Math.min(e,r),t),vt=(e,t,r)=>e*(1-r)+t*r,_t=(e,t,r)=>{const n=yt((r-e)/(t-e),0,1);return n*n*(3-2*n)};class bt{constructor(e){this.previousStep=-1,this.scene=e}enterStep3(){this.scene.textSpans.length=3,this.scene.textSpans[0]={opacity:1,text:"a",x:-.61,y:-.2},this.scene.textSpans[1]={opacity:1,text:"b",x:.48,y:-.13},this.scene.textSpans[2]={opacity:1,text:"c",x:-.13,y:.54}}enterStep4(){this.scene.textSpans.length=11;const e=this.scene.textSpans[0]={opacity:1,text:"a",x:.13,y:-.03},t=this.scene.textSpans[1]={opacity:1,text:"b",x:.37,y:.31},r=this.scene.textSpans[2]={opacity:1,text:"c",x:.12,y:.63},n=this.scene.textSpans[3]={opacity:1,text:"d",x:-.3,y:.52},i=this.scene.textSpans[4]={opacity:1,text:"e",x:-.325,y:.12};this.scene.textSpans[5]={opacity:1,text:"-π",x:(e.x+t.x)/2,y:(e.y+t.y)/2},this.scene.textSpans[6]={opacity:1,text:"-π",x:(t.x+r.x)/2,y:(t.y+r.y)/2},this.scene.textSpans[7]={opacity:1,text:"-π",x:(r.x+n.x)/2,y:(r.y+n.y)/2},this.scene.textSpans[8]={opacity:1,text:"-π",x:(n.x+i.x)/2,y:(n.y+i.y)/2},this.scene.textSpans[9]={opacity:1,text:"-π",x:(i.x+e.x)/2,y:(i.y+e.y)/2};const o=(e.x+t.x+r.x+n.x+i.x)/5,a=(e.y+t.y+r.y+n.y+i.y)/5;this.scene.textSpans[10]={opacity:1,text:"2π",x:o,y:a}}exitStep3(){this.scene.textSpans.length=0}exitStep4(){this.scene.textSpans.length=0}update(e,t){const r=this[`updateStep${e+1}`],n=this[`exitStep${this.previousStep+1}`],i=this[`enterStep${e+1}`];return e!==this.previousStep&&(n&&n.apply(this),i&&i.apply(this),this.previousStep=e),r?r.apply(this,[t]):this.updateStep1(0)}updateStep1(e){const t=_t(.16,.29,e),r=_t(.28,.42,e),n=_t(.42,.66,e),a=_t(.66,.9,e),s=_t(.95,1,e);o.lerp(this.scene.viewpoint.eye,[0,0,3],[0,1.5,3.5],t*(1-a));const u=vt(1-t*(1-a)-.5,-4,s),c=i.fromRotation(i.create(),Math.PI/2,[1,0,0]),f=i.fromTranslation(i.create(),[0,0,u]),l=i.fromScaling(i.create(),[1,1,2]);return i.multiply(c,c,l),i.multiply(c,c,f),i.copy(this.scene.cylinderTransform,c),this.scene.sphereGridlines=n*(1-s),this.scene.cylinderGridlines=r*(1-n),this.scene.baseColor=[0,0,0,0],!1}updateStep2(e){const t=_t(0,.11,e),r=_t(.18,.22,e),n=_t(.31,.51,e),i=_t(.61,.71,e),a=_t(.72,.81,e),s=_t(.9,1,e);return o.lerp(this.scene.viewpoint.eye,[0,0,3],[0,1,3],t*(1-s)),this.scene.greatCircle=t*(1-s),this.scene.luneAlpha=r*(1-s),this.scene.luneExpansion=n*(1-i),this.scene.antipodeAlpha=a*(1-s),!1}updateStep3(e){const t=_t(0,.08,e),r=_t(.17,.23,e),n=_t(.23,.26,e),i=_t(.35,.4,e),a=_t(.4,.42,e),s=_t(.52,.63,e),u=_t(.63,.69,e),c=_t(.69,.75,e),f=_t(.75,.77,e),l=_t(.77,.92,e),d=_t(.92,1,e),p=o.create(),m=o.create();o.lerp(p,[0,0,3],[0,1,3],t*(1-d)),o.lerp(m,p,[2,2,2],n*(1-i)),o.lerp(this.scene.viewpoint.eye,m,[0,-1,3],c*(1-f)),this.scene.rotation=c*(1-f)*Math.PI,this.scene.fadeInTriangle=t*(1-d),this.scene.triangleExpansion=r*(1-i);const h=Math.sin(yt(3*s-0,0,1)*Math.PI),g=Math.sin(yt(3*s-1,0,1)*Math.PI),y=Math.sin(yt(3*s-2,0,1)*Math.PI);this.scene.fadeInLuneA=h,this.scene.fadeInLuneB=g,this.scene.fadeInLuneC=y,u>0&&u<=1&&(this.scene.fadeInLuneA=u*(1-d),this.scene.fadeInLuneB=u*(1-d),this.scene.fadeInLuneC=u*(1-d));const v=a*(1-u)+l*(1-d);return this.scene.textSpans[0].opacity=v,this.scene.textSpans[1].opacity=v,this.scene.textSpans[2].opacity=v,!1}updateStep4(e){const t=_t(0,.14,e),r=_t(.27,.39,e),n=_t(.65,.8,e),i=_t(.8,.87,e),a=_t(.93,1,e);o.lerp(this.scene.viewpoint.eye,[0,0,3],[0,1,3],t*(1-a)),this.scene.fadeInPolygon=t*(1-a),this.scene.fadeInTriangle=r*(1-n);const s=i*(1-a);for(const e of this.scene.textSpans)e.opacity=s;return!1}updateStep5(e){const t=_t(0,.07,e),r=_t(.19,.26,e);this.scene.opacity=1-(1*t-.9*r),this.scene.inflation=r}}r.d(t,"App",function(){return Et});class Et{constructor(){this.scene=new ht,this.production="build:release".indexOf("release")>-1,console.info(this.production?"Production mode":"Development mode"),this.story=new gt({chartSelector:".chart",containerSelector:".container",panelSelector:".panel",segmentSelector:"segment",developerHud:!this.production,fullsizeChart:!0,progressHandler:e=>{if(this.display){const t=e.getActivePanelIndex(),r=e.getProgressValue();this.render(t,r)}}}),a.init(dt,()=>{this.display=new pt(this.production,this.scene),this.timeline=new bt(this.scene),this.timeline.update(0,0),this.display.update(0),this.display.resize(),this.story.refresh()}),document.querySelector(".container").focus()}render(e,t){e>-1&&(this.timeline.update(e,t),this.display.update(e)),this.display.render()}}window.onload=()=>{window.app=new Et}}]);
//# sourceMappingURL=main.js.map